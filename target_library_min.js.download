String.prototype.startsWith||(String.prototype.startsWith=function(e,a){return a=a||0,this.indexOf(e,a)===a}),window.analytics_ow=window.analytics_ow||{},window.analytics_ow.target=window.analytics_ow.target||{},window.analytics_ow.personalisation=window.analytics_ow.personalisation||{},window.analytics_ow.target.setup=window.analytics_ow.setup||{},window.analytics_ow.target.func=window.analytics_ow.target.func||{},window.analytics_ow.target.triggers=window.analytics_ow.target.triggers||{},window.analytics_ow.personalisation.globalvars=window.analytics_ow.personalisation.globalvars||{},window.analytics_ow.personalisation.func=window.analytics_ow.personalisation.func||{},window.analytics_ow.personalisation.func.find_all_by_key=(e,a)=>{if(e)return Object.entries(e).reduce(((e,[t,n],o)=>t===a?e.concat(n):"object"==typeof n&&"gtm.elementVisibility"!==n?.event?e.concat(window.analytics_ow.personalisation.func.find_all_by_key(n,a)):e),[])},window.analytics_ow.personalisation.func.find_value_by_event=(e,a,t)=>{if("object"==typeof e&&e.length>0)for(let n=0;n<e.length;n++)if(e[n].event===a)return analytics_ow.personalisation.func.find_all_by_key(e[n],t)[0]},window.analytics_ow.personalisation.func.setLocales=()=>{window.analytics_ow.personalisation.globalvars.market=window.analytics_ow.personalisation.func.find_all_by_key(dataLayer_ow,"market")[0],window.analytics_ow.personalisation.globalvars.language=window.analytics_ow.personalisation.func.find_all_by_key(dataLayer_ow,"language")[0]},window.analytics_ow.personalisation.func.setVehicleInformation=()=>{window.analytics_ow.personalisation.globalvars.bm=window.analytics_ow.personalisation.func.find_all_by_key(dataLayer_ow,"baumusterId")[0],window.analytics_ow.personalisation.globalvars.modelcode=window.analytics_ow.personalisation.func.find_all_by_key(dataLayer_ow,"modelCode")[0]},window.analytics_ow.target.func.sendMbox=(e,a,t)=>{adobe?.target&&("trackEvent"===e?adobe.target.trackEvent({mbox:a,params:t}):"applyoffer"===e&&adobe.target.getOffer({mbox:a,params:t,success:function(e){adobe.target.applyOffer({mbox:a,offer:e})},error:function(e,a){console&&console.log&&(console.log(e),console.log(a))},timeout:5e3}))},window.analytics_ow.target.func.setScrollingTriggers=()=>{if(window.location.pathname.indexOf("/passengercars/")>-1||window.location.pathname.indexOf("/vans/")>-1){target_scrolling=()=>{if(e.length<2){const a=window.innerHeight||(document.documentElement||document.body).clientHeight,t=document,n=Math.max(t.body.scrollHeight,t.documentElement.scrollHeight,t.body.offsetHeight,t.documentElement.offsetHeight,t.body.clientHeight,t.documentElement.clientHeight),o=window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop,i=n-a,s=Math.floor(o/i*100);s>=25&&-1==e.indexOf(25)&&"TR"===analytics_ow.personalisation.globalvars.market&&(window.location.pathname.includes("/electromobility/e-mobility")||window.location.pathname.includes("/eqa/explore"))?(e.push(25),dataLayer_ow.push({event:"target_dmp_scroll",eventdetail:{scrollingdepth:25}})):s>=50&&-1==e.indexOf(50)&&(e.push(50),dataLayer_ow.push({event:"target_dmp_scroll",eventdetail:{scrollingdepth:50}}))}else window.removeEventListener("scroll",target_scrolling)};let e=[];-1==window.location.pathname.indexOf("/models/")&&-1==window.location.pathname.indexOf("/mercedes-benz-cars/")&&-1==window.location.pathname.indexOf("/campaigns/")&&-1==window.location.pathname.indexOf("/mercedes-me/")&&-1==window.location.pathname.indexOf("/services-accessories/")&&-1==window.location.pathname.indexOf("/mercedes-me-connect")&&-1==window.location.pathname.indexOf("/services/")&&e.push(50),("TR"===analytics_ow.personalisation.globalvars.market||window.location.pathname.includes("/electromobility/e-mobility"))&&window.location.pathname.includes("/eqa/explore")||e.push(25),window.analytics_ow.target.triggers.fiften_sec=!0,window.addEventListener("scroll",target_scrolling)}},window.analytics_ow.personalisation.func.localStorage_check=()=>{Object.keys(localStorage).forEach((function(e){var a=localStorage.getItem(e);if((e.indexOf("target_")>-1||e.indexOf("dmp_")>-1)&&"undefined"!==a&&-1===e.indexOf("target_realGroup")){var t=JSON.parse(a),n=t.expiration,o=t.timestamp;if(void 0!==n&&void 0!==o)Date.now()>o+1e3*n*60*60*24&&localStorage.removeItem(e)}}))},window.analytics_ow.personalisation.func.getStorageConsent=()=>{if(window.location.hostname.includes("antarctica"))return!0;{const e=JSON.parse(localStorage.getItem("cmp_consents"));return e.Personsalization_Component?e.Personsalization_Component:e["Personsalization Component"]}},window.analytics_ow.personalisation.func.localStorage_set=(e,a,t)=>{if(!0===analytics_ow.personalisation.func.getStorageConsent()){void 0===t&&(t=120),"string"==typeof a&&(a=JSON.parse(a));var n=Date.now();return a&&!a.timestamp&&a.timestamp!==n&&(a.timestamp=Date.now()),a&&!a.expiration&&(a.expiration=t),localStorage.setItem(e,JSON.stringify(a)),!0}return!1},window.analytics_ow.personalisation.func.sessionstorage_set=(e,a)=>!0===analytics_ow.personalisation.func.getStorageConsent()&&(!(!e||!a)&&("object"==typeof a&&(a=JSON.stringify(a)),sessionStorage.setItem(e,a),!0)),window.analytics_ow.personalisation.func.check_storages=()=>{if(!1===analytics_ow.personalisation.func.getStorageConsent()&&setTimeout((function(){let e=Object.keys(localStorage),a=Object.keys(sessionStorage),t=e.concat(a);for(key in t)localStorage[t[key]]&&t[key].includes("target_")?localStorage.removeItem(t[key]):sessionStorage[t[key]]&&t[key].includes("target_")&&sessionStorage.removeItem(t[key])}),1500),localStorage?.target_dcp_retargeting){const e=JSON.parse(localStorage.target_dcp_retargeting);!e?.dcpProductbm||e.dcpProductbm.startsWith("1")||e.dcpProductbm.startsWith("2")||"4632"===e.dcpProductbm||localStorage.removeItem("target_dcp_retargeting")}},window.analytics_ow.target.func.check_product_array=function(e){for(var a=0;e.length;a++)if(e[a]?.type&&e[a].type.toLowerCase().indexOf("ncos")>-1||e[a].type.toLowerCase().indexOf("ucos")>-1)return e[a].id},window.analytics_ow.target.func.user_profile=(e,a,t,n,o,i,s,l,c,r,d,p,g,_,u,w,f,m,y,h)=>{if(adobe?.target?.trackEvent){var v={};if(void 0===n&&("pageview"===r||"click"===r)){var b=dataLayer_ow.filter((function(e){return e.event===r})),k=b[b.length-1];n=k.application.id,"product_detail"===(c=k.page.name)&&(_=k.page.products)}if("shop.mercedes-benz.com"!==window.location.hostname&&"emh"!==n||(_&&1==_.length?t=window.analytics_ow.target.func.check_product_array(_):u&&u.length>=1?t=window.analytics_ow.target.func.check_product_array(u):w&&w.length>=1?t=window.analytics_ow.target.func.check_product_array(w):y&&y.length>=1&&(t=window.analytics_ow.target.func.check_product_array(y))),"click"!==r||"product_detail"!==m||"add_to_cart"!==f&&"request_quote"!==f?"pageview"===r&&"rfq_start"===c&&"marketplace"===n&&(c="checkout_started"):c="checkout_started",(void 0!==t||void 0!==s)&&(void 0!==s&&(v.car_series_modelcode=s,v["user.categoryId"]=s,v["profile.additionalData.lastSeenVehicle"]=s),void 0!==t)){v.car_series_bm=t.slice(0,4);var S="",x="",O="",C="",L="",D="mercedes";if(analytics_ow.personalisation.func.getVMDSData(),analytics_ow?.personalisation?.vehicledata){var I=analytics_ow.personalisation.vehicledata,E=!1;if(t.length>4){for(var j=0;j<I.length&&!E;j++)for(var q=I[j].bodytypes,M=0;M<q.length&&!E;M++)for(var T=q[M].models,N=0;N<T.length&&!E;N++)for(var A=T[N].vehicles,P=0;P<A.length&&!E;P++)if(A[P].baumuster.indexOf(t)>-1){O=(O=A[P].bodytypeId).charAt(0).toUpperCase()+O.slice(1),S=A[P].classId,x=A[P].name,"COMBUSTION"===A[P].technicalData.engine.engineConcept?C="petrol_only":"PLUGIN_HYBRID"===A[P].technicalData.engine.engineConcept?C="hybrid":"ELECTRIC"===A[P].technicalData.engine.engineConcept&&(C="full-electric"),C+=","+A[P].technicalData.engine.fuelType[0],E=!0;break}}else{let e=analytics_ow.personalisation.func.get_model_details_by("baumusterId",t);Object.keys(e).length>0&&(O=(O=e.bodytypeData.id).charAt(0).toUpperCase()+O.slice(1),S=e.classData.id)}}switch(S){case"a-class":case"cla-class":case"gla-class":case"glb-class":L=-1==x.indexOf("AMG")?"low":"mid";break;case"eqa-class":case"b-class":L="low";break;case"c-class":case"glc-clas":L=-1==x.indexOf("AMG")?"mid":"high";break;case"eqc-class":case"eqv-class":case"v-class":L="mid";break;case"e-class":case"gle-class":case"cls-class":L=-1==x.indexOf("AMG")?"high":"higher";break;case"s-class":case"gls-class":L=-1==x.indexOf("AMG")&&-1==x.indexOf("Maybach")?"higher":"highest";break;case"eqs-class":L="higher";break;case"g-class":L="highest",D="g";break;case"gt-class":L="highest"}x.indexOf("AMG")>-1?D="amg":x.indexOf("eq")>-1?D="EQ":x.indexOf("Maybach")>-1&&(D="maybach"),v.car_body=O,v.car_brand=D,"select_motorization"!==c&&(v.car_drivetype=C,v.car_pricesegment=L)}const e=window.location.pathname;e.indexOf("/models/")>-1?(6===e.split("/").length?v.car_interest=e.split("/")[5].replace(".html",""):v.car_interest=e.split("/")[6].replace(".html",""),v.content_lsc=v.content_fsc=window.location.href.split("?")[0],e.indexOf("leasing-and-prices")>-1&&(v.car_finance="leasing-prices")):e.indexOf("/leasing")>-1||e.indexOf("/lease")>-1?v.car_finance="leasing":e.indexOf("/financing")>-1||e.indexOf("/finance/finance")>-1?v.car_finance="finance":e.indexOf("/fleet-and-business/")>-1&&(v["profile.car_b2b"]="true");var R=new Date,z=String(R.getDate()).padStart(2,"0")+"/"+String(R.getMonth()+1).padStart(2,"0")+"/"+R.getFullYear();switch(n){case"owcc":"select_motorization"===c?(v["profile.cj_users_owcc"]="true,"+z,v["profile.configurator_started_"+t.slice(0,4)]="true"):"your_vehicle"===c&&(v["profile.cj_engagers_owcc"]="true,"+z,v["profile.configurator_completed_"+t.slice(0,4)]="true");break;case"otbc":"dealer"===c&&void 0===sessionStorage.target_userprofile_td_started?(v["profile.cj_users_td"]="true,"+z,v["profile.testdrive_started_"+t.slice(0,4)]="true",window.analytics_ow.personalisation.func.sessionstorage_set("target_userprofile_td_started","true")):"confirmed"===c&&(v["profile.cj_engagers_td"]="true,"+z,v["profile.cj_vehicleleads_td"]="true,"+z,v["profile.testdrive_completed_"+t.slice(0,4)]="true");break;case"vs":"product_detail"===c&&("ncos"===o?v["profile.cj_engager_nvs"]="true,"+z:"ucos"===o&&(v["profile.cj_engager_uvs"]="true,"+z));break;case"one_dlc":"click"===r&&"dealer_details"===d&&(v["profile.cj_engager_dl"]="true,"+z);break;case"aem_forms":if("click"===r&&"form_submitted"===p)switch(g){case"owcc":v["profile.cj_vehicleleads_owcc"]="true,"+z;break;case"vs":e.indexOf("/u/used-vehicles")>-1?v["profile.cj_vehicleleads_uvs"]="true,"+z:v["profile.cj_vehicleleads_nvs"]="true,"+z}break;case"marketplace":case"emh":"pageview"===r&&("product_detail"===c||"product detail"===c?v["profile.cj_engagers_ncos"]="true,"+z:"cart_overview"===c?v["profile.cj_cartusers_ncos"]="true,"+z:"purchase"===c||"order_confirmation"===c?v["profile.cj_vehicleleads_ncos"]="true,"+z:"business-cars-storfront"===c&&(v["profile.car_b2b"]="true"));break;case"cscs":"click"===r&&"customer_type_context.switch"===d&&"toggle-business"===p&&(v["profile.car_b2b"]="true")}"select_motorization"===c&&e.indexOf("/motorization/")>-1?v["profile.cj_users_owcc"]="true,"+z:"your_vehicle"===c&&e.indexOf("/configuration/")>-1&&(v["profile.cj_engagers_owcc"]="true,"+z),("dealer"===c||window.location.href.indexOf("/dealer")>-1)&&e.indexOf("/online-testdrive")>-1&&"pageview"===r&&"one_dlc"!==h&&void 0===sessionStorage.target_userprofile_td_started?(v["profile.cj_users_td"]="true,"+z,v["profile.testdrive_started_"+t.slice(0,4)]="true",window.analytics_ow.personalisation.func.sessionstorage_set("target_userprofile_td_started","true")):"confirmed"===c&&e.indexOf("/online-testdrive")>-1&&(v["profile.cj_engagers_td"]="true,"+z,v["profile.cj_vehicleleads_td"]="true,"+z,v["profile.configurator_completed_"+t.slice(0,4)]="true"),"logged out"!==i&&(v["profile.status_login"]="true"),v.pageType=n,"aem"===n&&"product"===h&&(v.pageType="product"),v.pageName=c,"click"!==r?c!=sessionStorage.target_last_pagename_userprofile&&analytics_ow.target.func.sendMbox("trackEvent","mboxProfileData",v):analytics_ow.target.func.sendMbox("trackEvent","mboxProfileData",v),window.analytics_ow.personalisation.func.sessionstorage_set("target_last_pagename_userprofile",c)}},analytics_ow.personalisation.func.set_cc_localstorage=(e,a,t,n,o,i="car")=>{window.setTimeout((function(){let s,l=t,c=a,r=n;if("car"==i){const e=document.querySelector("owcc-car-configurator"),a=e?.shadowRoot,t=a?.querySelector(".cc-header-info__image-container__image");s=t?.getAttribute("src")?.split("&")[0]}if("van"==i){var d=document.querySelector("voc-ow-voc-wrapper")?.shadowRoot?.querySelector("voc-root")?.shadowRoot?.querySelector(".big-image");s=d?.style?.backgroundImage?.split('"')[1]}if("canceled"===e&"car"==i){void 0!==c&&"undefined"!==c&&(c=c.toLowerCase());let e={vehicleBaumuster:r,vehicleid:l,vehicleimage:s,vehiclecode:c};if("function"==typeof analytics_ow.personalisation.func.localStorage_set){analytics_ow.personalisation.func.localStorage_set("target_configured_canceled",e,30);let a=localStorage.target_configured_canceled_class_specific;void 0!==a?(a=JSON.parse(localStorage.target_configured_canceled_class_specific),a[c]=e):(a={},a[c]=e),analytics_ow.personalisation.func.localStorage_set("target_configured_canceled_class_specific",a,30)}}else if("completed"===e){onlinecode=o;let e={vehicleBaumuster:r,onlinecode:onlinecode,vehicleimage:s,vehiclecode:c,vehicleid:l};if("function"==typeof analytics_ow.personalisation.func.localStorage_set){var p="van"==i?"vans_":"";analytics_ow.personalisation.func.localStorage_set(p+"target_configured_details",e,30)}if("n293"==c||"h247"==c||"x247"==c){var g={"profile.additionalData.last-configured-vehicle":c,"last-configured-vehicle":c};analytics_ow.target.func.sendMbox("applyoffer","target-pc-mbox",g)}else{g={"profile.additionalData.last-configured-vehicle":c};analytics_ow.target.func.sendMbox("applyoffer","target-global-mbox",g)}}}),500)},analytics_ow.target.func.frequencyCapping=(e,a,t)=>{let n,o;const i=window.location.pathname;let s="";"/"==i||"/passenger-cars"==i?s="homepage":i.indexOf("latest-offers")>-1?s="latest-offers":""!==a&&(s=a),o={vehicle_seen:s,"target-campaign":t},e&&(e.includes("notificationbox")||e.includes("contentmodule")?n="nbFrequencyCapping":e.includes("simple-teaser")?n="simpleteaserFrequencyCapping":e.includes("livechat")?n="livechatFrequencyCapping":e.includes("stage")&&(n="stageFrequencyCapping",o={"target-campaign":t})),o&&n&&analytics_ow.target.func.sendMbox("trackEvent",n,o)},analytics_ow.target.func.frequencyCappingClick=(e,a,t)=>{let n;if(e&&!a.includes("control")&&(e.includes("notificationbox")||e.includes("contentmodule")?n="nbFrequencyCappingClick":e.indexOf("simple-teaser")>-1&&(n="simpleteaserFrequencyCappingClick")),n){const e={"target-campaign":t};analytics_ow.target.func.sendMbox("trackEvent",n,e)}},analytics_ow.target.func.impressionTracking=(e,a)=>{e&&a&&dataLayer_ow.push({event:"click",eventDetail:{category:"impression",action:"Target",label:e,target:a},application:{id:"target",parentApplicationId:"aem"}})},analytics_ow.target.func.clickTracking=(e,a,t)=>{e&&a&&t&&(a=(a=(a=a.toLowerCase()).replace(/\s/g,"_")).replace(".",""),e.addEventListener("click",(function(){dataLayer_ow.push({event:"click",eventDetail:{category:"click",action:"Target",label:a,target:t},application:{id:"target",parentApplicationId:"aem"}})})))},analytics_ow.personalisation.func.set_vs_localstorage=(e,a,t)=>{setItem=(e,a,t,n,o,i,s,l)=>{if(c={trigger:a,vehicleclass:t,vehiclebody:n,baumusterid:i,lastURL:s,vehicleclassfull:l},o&&(c.location=o),"completed"===a&&void 0!==localStorage[e]){var r=JSON.parse(localStorage[e]);void 0!==r.location&&(c.location={},c.location=r.location)}"function"==typeof analytics_ow.personalisation.func.localStorage_set&&analytics_ow.personalisation.func.localStorage_set(e,c)};var n="",o="",i="",s="",l="",c={},r=window.location.href.replace("&intLink=last_viewed","");if(window.location.pathname.includes("new-vehicles")?s="target_owvs_n":window.location.pathname.includes("used-vehicles")&&(s="target_owvs_u"),"results"===e){var d=a;if(void 0!==d&&d.length>0)for(var p=0;p<d.length;p++){var g=d[p];if("salesClass"===g.name){if(3!=g.value.length){let e;e=g.value.indexOf("-")>-1?g.value.split("-"):g.value.split(" ");for(let a=0;a<e.length;a++)1===e[a].length&&(n=e[a])}else n=g.value;o=g.value}else"bodyGroup"===g.name?i=g.value.replace(/\|/g,","):"location"===g.name&&(l=g.value)}setItem(s,"started",n,i,l,void 0,r,o)}else"product_detail"===e&&setItem(s,"completed","","","","",r,"")},analytics_ow.personalisation.func.getVMDSData=e=>{analytics_ow.personalisation.func.setLocales();let a=!0;"shop.mercedes-benz.com"===window.location.hostname&&window.location.pathname.indexOf("/connect/")>-1||window.location.pathname.indexOf("/u/used-vehicles/")>-1?a=!1:window?.analytics_ow?.personalisation?.globalvars?.market&&""!==window.analytics_ow.personalisation.globalvars.market&&window?.analytics_ow?.personalisation?.globalvars?.language&&""!==window.analytics_ow.personalisation.globalvars.language||(a=!1),a&&(analytics_ow?.personalisation?.vehicledata&&""!==analytics_ow.personalisation.vehicledata?void 0!==e&&e():fetch("https://api.oneweb.mercedes-benz.com/vmds-api/v1/vehicles/"+analytics_ow.personalisation.globalvars.market+"/"+analytics_ow.personalisation.globalvars.language).then((e=>e.json())).then((a=>{window.analytics_ow.personalisation.vehicledata=a,void 0!==e&&e()})))},analytics_ow.personalisation.func.getVehicleDeeplinks=e=>{let a=analytics_ow.personalisation.globalvars.market,t=analytics_ow.personalisation.globalvars.language;t&&a&&fetch("https://api.oneweb.mercedes-benz.com/vehicle-deeplinks-api/v1/deeplinks/"+a+"/"+t+"/model-series").then((function(a){a.ok?a.json().then((function(a){window.analytics_ow.personalisation.func.sessionstorage_set("target_vehicle_deeplinks_"+t,a),void 0!==e&&e()})):console.log("Error in calling the api: "+a.status)})).catch((function(e){console.log("Error in calling the api: "+e)}))},analytics_ow.personalisation.func.get_model_details_by=(e,a)=>{analytics_ow.personalisation.func.getVMDSData();var t=analytics_ow.personalisation.vehicledata?analytics_ow.personalisation.vehicledata:[],n={},o=[];return t.find((t=>t?.bodytypes.find((t=>t?.models.find((function(t){"modelCode"==e&&t.modelSeries.toLowerCase()==a.toLowerCase()&&(n=t),"baumusterId"==e&&t.bm4==a&&(n=t),"vehicleClass"==e&&t?.vehicles.filter((function(e){e.classId==a&&o.push(e)}))})))))),o.length>0?o:n},analytics_ow.personalisation.func.impressionTracking=(e,a,t)=>{dlFunction=a.trackingBlock?console.log:dataLayer_ow.push,dlFunction({event:"click",eventDetail:{category:"impression",action:"Target",label:t,target:e},application:{id:"target",parentApplicationId:"aem"}})},analytics_ow.personalisation.func.clickTracking=(e,a,t)=>{e.addEventListener("click",(function(e){let n=e.target.textContent.toLowerCase().trim().replace(/\s/g,"_").replace(".","");dlFunction=t.trackingBlock?console.log:dataLayer_ow.push,dlFunction({event:"click",eventDetail:{category:"click",action:"Target",label:n,target:a},application:{id:"target",parentApplicationId:"aem"}})}))},analytics_ow.personalisation.func.sendEvergageData=(e,a,t,n)=>{let o=!1;"control"===a.experience&&(o=!0);const i={experienceId:e.experience,stat:t,control:o};if("Impression"===t)Evergage.sendStat({campaignStats:[i]}),"true"!==sessionStorage.sendEvent_disable_test&&Evergage.sendEvent({action:a.campaign+" - impression"});else{n.addEventListener("click",(function(e){Evergage.sendStat({campaignStats:[i]}),Evergage.sendEvent({action:a.campaign+" - click"})}))}},analytics_ow.personalisation.func.set_shop_pdp_srp_info=(e,a)=>{setTimeout((function(){window.location.pathname.indexOf("new-car/product.html")>-1&&"pageview"===e?set_pdp_info("integrated"):window.location.pathname.indexOf("/new-car/search-results")>-1&&window.location.search.indexOf("emhmodel=")>-1&&function(e){if(!1===window.location.search.includes("vehicleAssortment=new-commercial-vans")){let e,t=a,o=0;if(void 0!==t){for(let a=0;a<t.length;a++)"model"===t[a].name&&(e=t[a].value.toLowerCase(),o++);1===o&&(n={name:"target_dcp_last_model_filter",value:{dcp_last_modelfilter:e,dcp_last_search_url:document.URL}}),void 0!==n&&window.analytics_ow.personalisation.func.localStorage_set(n.name,n.value)}}}()}),1500);let t,n={};set_pdp_info=e=>{if(!1===window.analytics_ow.personalisation.func.find_all_by_key(dataLayer_ow,"products")[0].type.includes("COMVANS")){const e=window.location.href.split("/").pop(),a=Date.now(),n=30;let o,i;const s=document.querySelector("emh-product-details").shadowRoot;o=s.querySelector(".wb-360-viewer__image").getAttribute("style").split('background-image: url("')[1].split('");')[0].split("&")[0],i=s.querySelector(".dcp-cars-buy-box__product-variation-name").textContent,imgParams="&imgt=P27&pov=BE030&im=Crop,rect=(240,260,1680,923);Resize,width=480";let l,c={dcpProductLink:document.URL,dcpProductId:e,dcpProductImg:o+imgParams,dcpProductVehicle:i,timestamp:a,expiration:n,target:!0},r={name:"target_dcp_retargeting",value:c};for(let e=dataLayer_ow.length-1;e>=0;e--)if("pageview"===dataLayer_ow[e].event&&1===dataLayer_ow[e].page.products.length){l=dataLayer_ow[e].page.products;break}if(void 0!==l&&void 0!==l[0]){const e=l[0].id;c.dcpProductbm=e,t={name:"target_dcp_retargeting_"+e,value:{}},t.value=c}void 0!==r&&window.analytics_ow.personalisation.func.localStorage_set(r.name,r.value),void 0!==t&&window.analytics_ow.personalisation.func.localStorage_set(t.name,t.value)}}},analytics_ow.personalisation.func.stage_update=e=>{const a=document.querySelector("owc-stage"),t=analytics_ow.personalisation.func.getJSONData(a.getAttribute("component-id"))||"{}";e.cta={ctaDisplayMethod:"manual"};var n=Object.assign({},t,e);return a.personalisation(n),a},analytics_ow.personalisation.func.simpleteaser_update=(e,a,t,n,o,i,s,l,c,r)=>{const d=document.querySelectorAll("owc-simple-teaser");let p,g='[data-aem-targeting-use-case="'+a+'"]';c&&(g+='[data-aem-targeting-use-case-variant="'+c+'"]'),r&&(g+='[data-aem-targeting-vehicle="'+r+'"]');for(let e=0;e<d.length;e++)if(!d[e].classList.contains("aem--is-hidden")&&null!==d[e].shadowRoot.querySelector(g)){p=d[e];break}if(p){const a=p.shadowRoot.querySelector(g);if(e)return a;if(a?.personalisation)return simpleteaser_data=analytics_ow.personalisation.func.getJSONData(a.getAttribute("component-id"))||"{}",simpleteaser_data.headline=null!==t?t:simpleteaser_data.headline,simpleteaser_data.copy=null!==n?n:simpleteaser_data.copy,simpleteaser_data.image=null!==o?o:simpleteaser_data.image,simpleteaser_data.links=null!==i?i:simpleteaser_data.links,simpleteaser_data.tags=null!==s?s:simpleteaser_data.tags,simpleteaser_data.bullets=null!==l?l:simpleteaser_data.bullets,a.personalisation(simpleteaser_data),a.classList.remove("aem--is-hidden"),a}},analytics_ow.personalisation.func.banner_teaser_update=(e,a,t,n)=>{let o='owc-banner-teaser[data-aem-targeting-use-case="'+e+'"]';a&&""!==a&&(o+='[data-aem-targeting-vehicle="'+a+'"]'),t&&""!==t&&(o+='[data-aem-targeting-use-case-variant="'+t+'"]');let i=document.querySelector(o),s=analytics_ow.personalisation.func.getJSONData(i.getAttribute("component-id"))||"{}";if(i?.personalisation){var l=Object.assign({},s,n);return i.personalisation(l),i.classList.remove("aem--is-hidden"),i}},analytics_ow.personalisation.func.getVehicleImage=(e,a,t="none",n="stage")=>{var o=analytics_ow.personalisation.func.get_model_details_by("vehicleClass",e);if(o.length>0){var i=o.find((e=>e.bodytypeId==a)),s=i?.images?.stage;switch(n){case"simple_teaser":var l="&Resize,width=480";break;case"banner_teaser":l="&Resize,width=960";break;case"stage":l=""}return s?"default"==t?s+l:"none"==t?s.split("&&BKGND=")[0]:s.split("&&BKGND=")[0]+t+l:null}return null},analytics_ow.personalisation.func.getJSONData=e=>{var a;return seamlessStore.store.subscribe("OWC_COMPONENT_REGISTRY",(function(t){a=t.components[e]})),a},setTimeout((function(){analytics_ow.personalisation.func.setLocales(),analytics_ow.personalisation.func.setVehicleInformation(),("/"===window.location.pathname||window.location.pathname.includes("/passengercars.html")||window.location.pathname.includes("/models/"))&&analytics_ow.personalisation.func.getVMDSData()}),500),analytics_ow.personalisation.func.setLocales(),analytics_ow.target.func.setScrollingTriggers(),analytics_ow.personalisation.func.localStorage_check(),analytics_ow.personalisation.func.check_storages(),("/"===window.location.pathname||window.location.pathname.includes("/passengercars.html")||window.location.pathname.includes("/models/"))&&analytics_ow.personalisation.func.getVMDSData();