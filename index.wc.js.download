(function(z,v){typeof exports=="object"&&typeof module<"u"?v(require("vue"),require("@seamless/store"),require("@seamless/logger")):typeof define=="function"&&define.amd?define(["vue","@seamless/store","@seamless/logger"],v):(z=typeof globalThis<"u"?globalThis:z||self,v(z.Vue,z.window.top.seamlessStore,z.window.top.seamlessLogger))})(this,function(z,v,K){"use strict";var Wm=Object.defineProperty;var Ym=(z,v,K)=>v in z?Wm(z,v,{enumerable:!0,configurable:!0,writable:!0,value:K}):z[v]=K;var E=(z,v,K)=>(Ym(z,typeof v!="symbol"?v+"":v,K),K);const Pe=(t=>t&&typeof t=="object"&&"default"in t?t:{default:t})(z);/**
  * vue-class-component v7.2.6
  * (c) 2015-present Evan You
  * @license MIT
  */function Zt(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Zt=function(e){return typeof e}:Zt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zt(t)}function ic(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oc(t){return ac(t)||cc(t)||uc()}function ac(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function cc(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}function uc(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function lc(){return typeof Reflect<"u"&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys}function dc(t,e){Jn(t,e),Object.getOwnPropertyNames(e.prototype).forEach(function(n){Jn(t.prototype,e.prototype,n)}),Object.getOwnPropertyNames(e).forEach(function(n){Jn(t,e,n)})}function Jn(t,e,n){var r=n?Reflect.getOwnMetadataKeys(e,n):Reflect.getOwnMetadataKeys(e);r.forEach(function(s){var i=n?Reflect.getOwnMetadata(s,e,n):Reflect.getOwnMetadata(s,e);n?Reflect.defineMetadata(s,i,t,n):Reflect.defineMetadata(s,i,t)})}var fc={__proto__:[]},pc=fc instanceof Array;function hc(t){return function(e,n,r){var s=typeof e=="function"?e:e.constructor;s.__decorators__||(s.__decorators__=[]),typeof r!="number"&&(r=void 0),s.__decorators__.push(function(i){return t(i,n,r)})}}function gc(t){var e=Zt(t);return t==null||e!=="object"&&e!=="function"}function mc(t,e){var n=e.prototype._init;e.prototype._init=function(){var i=this,o=Object.getOwnPropertyNames(t);if(t.$options.props)for(var a in t.$options.props)t.hasOwnProperty(a)||o.push(a);o.forEach(function(c){Object.defineProperty(i,c,{get:function(){return t[c]},set:function(d){t[c]=d},configurable:!0})})};var r=new e;e.prototype._init=n;var s={};return Object.keys(r).forEach(function(i){r[i]!==void 0&&(s[i]=r[i])}),s}var Vn=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function js(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.name=e.name||t._componentTag||t.name;var n=t.prototype;Object.getOwnPropertyNames(n).forEach(function(a){if(a!=="constructor"){if(Vn.indexOf(a)>-1){e[a]=n[a];return}var c=Object.getOwnPropertyDescriptor(n,a);c.value!==void 0?typeof c.value=="function"?(e.methods||(e.methods={}))[a]=c.value:(e.mixins||(e.mixins=[])).push({data:function(){return ic({},a,c.value)}}):(c.get||c.set)&&((e.computed||(e.computed={}))[a]={get:c.get,set:c.set})}}),(e.mixins||(e.mixins=[])).push({data:function(){return mc(this,t)}});var r=t.__decorators__;r&&(r.forEach(function(a){return a(e)}),delete t.__decorators__);var s=Object.getPrototypeOf(t.prototype),i=s instanceof Pe.default?s.constructor:Pe.default,o=i.extend(e);return yc(o,t,i),lc()&&dc(o,t),o}var vc={prototype:!0,arguments:!0,callee:!0,caller:!0};function yc(t,e,n){Object.getOwnPropertyNames(e).forEach(function(r){if(!vc[r]){var s=Object.getOwnPropertyDescriptor(t,r);if(!(s&&!s.configurable)){var i=Object.getOwnPropertyDescriptor(e,r);if(!pc){if(r==="cid")return;var o=Object.getOwnPropertyDescriptor(n,r);if(!gc(i.value)&&o&&o.value===i.value)return}Object.defineProperty(t,r,i)}}})}function qe(t){return typeof t=="function"?js(t):function(e){return js(e,t)}}qe.registerHooks=function(e){Vn.push.apply(Vn,oc(e))},globalThis&&globalThis.__spreadArrays;var bc=typeof Reflect<"u"&&typeof Reflect.getMetadata<"u";function Ec(t,e,n){if(bc&&!Array.isArray(t)&&typeof t!="function"&&!t.hasOwnProperty("type")&&typeof t.type>"u"){var r=Reflect.getMetadata("design:type",e,n);r!==Object&&(t.type=r)}}function Z(t){return t===void 0&&(t={}),function(e,n){Ec(t,e,n),hc(function(r,s){(r.props||(r.props={}))[s]=t})(e,n)}}/*! component-registry-connection 1.8.0 */const Ds={components:{}},$e="OWC_COMPONENT_REGISTRY",Ms="ADD_COMPONENT",Fs="REMOVE_COMPONENT",Hs="ADD_COMPONENTS",wc=new class extends v.SeamlessConnection{constructor(){super($e)}get initialState(){return Ds}getReducer(){return(t=Ds,e)=>{switch(e.type){case this.getActionType(Ms):return t.components[e.payload.id]=e.payload.data,{...t,components:{...t.components,[e.payload.id]:e.payload.data}};case this.getActionType(Hs):return{...t,components:{...t.components,...e.payload}};case this.getActionType(Fs):return delete t.components[e.payload],{...t,components:{...t.components}};default:return t}}}getPublicDispatchers(){return{addComponents:t=>this.getAction(Hs,t),addComponent:t=>this.getAction(Ms,t),removeComponent:t=>this.getAction(Fs,t)}}},Sc=()=>v.initializeStore().addConnection(wc),Qt=async()=>await v.initializeStore().getConnectionDispatchers($e),Gs=(t,e)=>{if(t===e)return!0;if(typeof t!="object"||typeof e!="object")return!1;const n=Object.keys(t);return n.length===Object.keys(e).length&&n.every(r=>Gs(t[r],e[r]))},zs="OWC_AEM_ENV";new class extends v.SeamlessConnection{constructor(){super(zs)}get initialState(){var n,r,s,i,o,a;const t=((n=window.aemNamespace)==null?void 0:n.environmentVariables)||((s=(r=window.top)==null?void 0:r.aemNamespace)==null?void 0:s.environmentVariables),e=((i=window.aemNamespace)==null?void 0:i.pageEnvironmentVariables)||((a=(o=window.top)==null?void 0:o.aemNamespace)==null?void 0:a.pageEnvironmentVariables);return t&&e?{...t,...e}:{}}getReducer(){return()=>this.initialState}getPublicDispatchers(){return{}}};class qs{constructor(){E(this,"store",v.initializeStore());E(this,"logger",K.initializeLogger("OWC FE LIBS COMPONENT REGISTRY"));E(this,"previousState",{});E(this,"compareStateReference",{});E(this,"componentListeners",new Map);this.store.subscribe($e,e=>{!Object.keys(this.previousState).length&&Object.keys(e.components).length&&(this.compareStateReference=e.components);for(const[n,r]of this.componentListeners){const s=e.components[n];this.hasComponentStateChanged(n,s)&&r.forEach(i=>i(s))}this.previousState=e.components}),this.initConnection()}async initConnection(){var r;await Sc();const e=await Qt(),n=window.top||window;n.aemNamespace||(this.logger.warn("window.top?.aemNamespace is not defined, adding an empty Object"),n.aemNamespace={}),(r=n.aemNamespace)!=null&&r.componentData&&e.addComponents(n.aemNamespace.componentData),this.store.subscribe(zs,async s=>{if(s.runMode==="AUTHOR"){const{proxy:i}=await Promise.resolve().then(()=>km);i(e)}})}subscribe(e,n){this.getComponentDataListeners(e).push(n),this.previousState&&e in this.previousState&&n(this.previousState[e])}unsubscribe(e,n){const r=this.getComponentDataListeners(e),s=r.indexOf(n);s>=0&&r.splice(s,1)}getComponentDataListeners(e){let n=this.componentListeners.get(e);return n==null&&(n=[],this.componentListeners.set(e,n)),n}hasComponentStateChanged(e,n){const r=!Gs(n,this.compareStateReference[e]);return(e&&n&&r||!this.compareStateReference[e])&&(this.compareStateReference[e]=n),r}async addComponents(e){(await Qt()).addComponents(e)}async addComponent(e){(await Qt()).addComponent(e)}async removeComponent(e){(await Qt()).removeComponent(e)}}function Cc(){const t=window.top||window;return t.owc==null&&(t.owc={componentRegistry:new qs}),t.owc.componentRegistry==null&&(t.owc.componentRegistry=new qs),t.owc.componentRegistry}/*! connection-aem-environment 1.8.0 */const oe="OWC_AEM_ENV";new class extends v.SeamlessConnection{constructor(){super(oe)}get initialState(){var n,r,s,i,o,a;const t=((n=window.aemNamespace)==null?void 0:n.environmentVariables)||((s=(r=window.top)==null?void 0:r.aemNamespace)==null?void 0:s.environmentVariables),e=((i=window.aemNamespace)==null?void 0:i.pageEnvironmentVariables)||((a=(o=window.top)==null?void 0:o.aemNamespace)==null?void 0:a.pageEnvironmentVariables);return t&&e?{...t,...e}:{}}getReducer(){return()=>this.initialState}getPublicDispatchers(){return{}}};var k={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},_=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Object.prototype.hasOwnProperty.call(k,t)||(t=k.log),_[t].apply(_,e)},q=console;_.debug=q.debug.bind(q),_.log=q.log.bind(q),_.info=q.info.bind(q),_.warn=q.warn.bind(q),_.error=q.error.bind(q);function Wn(t){return t!==0&&Math.random()*100<=t}function Yn(t){return Tc(t)&&t>=0&&t<=100}function Tc(t){return typeof t=="number"}var Tt=1e3,Ne=60*Tt,Oc=60*Ne;function Ot(){return new Date().getTime()}function ye(){return Ot()}function _t(){return performance.now()}function Je(){return{relative:_t(),timeStamp:ye()}}function _c(){return{relative:0,timeStamp:Js()}}function Rc(t,e){return e-t}function Ac(t){return t-Js()}var Xn;function Js(){return Xn===void 0&&(Xn=performance.timing.navigationStart),Xn}function Ve(t){return t?(parseInt(t,10)^Math.random()*16>>parseInt(t,10)/4).toString(16):"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,Ve)}function Ic(t,e){var n=new RegExp("(?:^|;)\\s*".concat(e,"\\s*=\\s*([^;]+)")),r=n.exec(t);return r?r[1]:void 0}function Pc(t,e,n){n===void 0&&(n="");var r=t.charCodeAt(e-1),s=r>=55296&&r<=56319,i=s?e+1:e;return t.length<=i?t:"".concat(t.slice(0,i)).concat(n)}var Vs=Tt;function en(t,e,n,r){var s=new Date;s.setTime(s.getTime()+n);var i="expires=".concat(s.toUTCString()),o=r&&r.crossSite?"none":"strict",a=r&&r.domain?";domain=".concat(r.domain):"",c=r&&r.secure?";secure":"";document.cookie="".concat(t,"=").concat(e,";").concat(i,";path=/;samesite=").concat(o).concat(a).concat(c)}function ae(t){return Ic(document.cookie,t)}function Kn(t,e){en(t,"",0,e)}function $c(t){if(document.cookie===void 0||document.cookie===null)return!1;try{var e="dd_cookie_test_".concat(Ve()),n="test";en(e,n,Ne,t);var r=ae(e)===n;return Kn(e,t),r}catch(s){return _.error(s),!1}}var Zn;function Nc(){if(Zn===void 0){for(var t="dd_site_test_".concat(Ve()),e="test",n=window.location.hostname.split("."),r=n.pop();n.length&&!ae(t);)r="".concat(n.pop(),".").concat(r),en(t,e,Tt,{domain:r});Kn(t,{domain:r}),Zn=r}return Zn}function Ws(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return t.apply(void 0,n)}catch(s){_.error(e,s)}}}var Rt;(function(t){t.PAGEHIDE="pagehide",t.FEATURE_FLAGS="feature_flags",t.RESOURCE_PAGE_STATES="resource_page_states",t.COLLECT_FLUSH_REASON="collect_flush_reason"})(Rt||(Rt={}));var Qn=new Set;function Lc(t){t.forEach(function(e){Qn.add(e)})}function Ys(t){return Qn.has(t)}function xc(){return Qn}var be=1024,Xs=1024*be,Uc=/[^\u0000-\u007F]/;function er(t){return Uc.test(t)?window.TextEncoder!==void 0?new TextEncoder().encode(t).length:new Blob([t]).size:t.length}function We(t,e){return t.indexOf(e)!==-1}function Ks(t){if(Array.from)return Array.from(t);var e=[];if(t instanceof Set)t.forEach(function(r){return e.push(r)});else for(var n=0;n<t.length;n++)e.push(t[n]);return e}function Bc(t,e){for(var n=0;n<t.length;n+=1){var r=t[n];if(e(r,n))return r}}function Ye(t){return Object.keys(t).map(function(e){return t[e]})}function kc(t){return Object.keys(t).map(function(e){return[e,t[e]]})}function Zs(t,e){return t.slice(0,e.length)===e}function jc(t,e){return t.slice(-e.length)===e}function F(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.forEach(function(r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}),t}function Dc(t){return F({},t)}function Mc(t,e){return Object.keys(t).some(function(n){return t[n]===e})}function Qs(t){return Object.keys(t).length===0}function Xe(){if(typeof globalThis=="object")return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var t=_dd_temp_;return delete Object.prototype._dd_temp_,typeof t!="object"&&(typeof self=="object"?t=self:typeof window=="object"?t=window:t={}),t}function Ke(t,e){var n=Xe(),r;return n.Zone&&typeof n.Zone.__symbol__=="function"&&(r=t[n.Zone.__symbol__(e)]),r||(r=t[e]),r}var Fc=globalThis&&globalThis.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},tn,ei=!1;function Hc(t){tn=t}function Gc(t){ei=t}function zc(t,e,n){var r=n.value;n.value=function(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];var o=tn?C(r):r;return o.apply(this,s)}}function C(t){return function(){return Le(t,this,arguments)}}function Le(t,e,n){try{return t.apply(e,n)}catch(r){if(tr(k.error,r),tn)try{tn(r)}catch(s){tr(k.error,s)}}}function tr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];ei&&_.apply(void 0,Fc([t,"[MONITOR]"],e,!1))}function At(t,e){return Ke(Xe(),"setTimeout")(C(t),e)}function ti(t){Ke(Xe(),"clearTimeout")(t)}function nr(t,e){return Ke(window,"setInterval")(C(t),e)}function ni(t){Ke(window,"clearInterval")(t)}function ri(t,e,n){var r=n&&n.leading!==void 0?n.leading:!0,s=n&&n.trailing!==void 0?n.trailing:!0,i=!1,o,a;return{throttled:function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];if(i){o=c;return}r?t.apply(void 0,c):o=c,i=!0,a=At(function(){s&&o&&t.apply(void 0,o),i=!1,o=void 0},e)},cancel:function(){ti(a),i=!1,o=void 0}}}function It(){}function Ze(t,e,n){if(typeof t!="object"||t===null)return JSON.stringify(t);var r=Qe(Object.prototype),s=Qe(Array.prototype),i=Qe(Object.getPrototypeOf(t)),o=Qe(t);try{return JSON.stringify(t,e,n)}catch{return"<error: unable to serialize object>"}finally{r(),s(),i(),o()}}function Qe(t){var e=t,n=e.toJSON;return n?(delete e.toJSON,function(){e.toJSON=n}):It}function nn(t){return qc(t,Vc()).href}function qc(t,e){var n=Jc();if(n)try{return e!==void 0?new n(t,e):new n(t)}catch(o){throw new Error("Failed to construct URL: ".concat(String(o)," ").concat(Ze({url:t,base:e})))}if(e===void 0&&!/:/.test(t))throw new Error("Invalid URL: '".concat(t,"'"));var r=document,s=r.createElement("a");if(e!==void 0){r=document.implementation.createHTMLDocument("");var i=r.createElement("base");i.href=e,r.head.appendChild(i),r.body.appendChild(s)}return s.href=t,s}var si=URL,rn;function Jc(){if(rn===void 0)try{var t=new si("http://test/path");rn=t.href==="http://test/path"}catch{rn=!1}return rn?si:void 0}function Vc(){return Wc(window.location)}function Wc(t){if(t.origin)return t.origin;var e=t.host.replace(/(:80|:443)$/,"");return"".concat(t.protocol,"//").concat(e)}var Yc="datad0g.com",Pt="datadoghq.com",Xc="ap1.datadoghq.com",Kc="ddog-gov.com",Zc={logs:"logs",rum:"rum",sessionReplay:"session-replay"},Qc={logs:"logs",rum:"rum",sessionReplay:"replay"};function $t(t,e,n){var r=eu(t,e);return{build:function(s,i,o){var a=nu(t,e,n,s,i,o);return r(a)},urlPrefix:r(""),endpointType:e}}function eu(t,e){var n="/api/v2/".concat(Qc[e]),r=t.proxy,s=t.proxyUrl;if(r){var i=nn(r);return function(c){return"".concat(i,"?ddforward=").concat(encodeURIComponent("".concat(n,"?").concat(c)))}}var o=tu(t,e);if(r===void 0&&s){var a=nn(s);return function(c){return"".concat(a,"?ddforward=").concat(encodeURIComponent("https://".concat(o).concat(n,"?").concat(c)))}}return function(c){return"https://".concat(o).concat(n,"?").concat(c)}}function tu(t,e){var n=t.site,r=n===void 0?Pt:n,s=t.internalAnalyticsSubdomain;if(s&&r===Pt)return"".concat(s,".").concat(Pt);var i=r.split("."),o=i.pop(),a=r!==Xc?"".concat(Zc[e],"."):"";return"".concat(a,"browser-intake-").concat(i.join("-"),".").concat(o)}function nu(t,e,n,r,s,i){var o=t.clientToken,a=t.internalAnalyticsSubdomain,c=["sdk_version:".concat("4.42.2"),"api:".concat(r)].concat(n);s&&Ys(Rt.COLLECT_FLUSH_REASON)&&c.push("flush_reason:".concat(s)),i&&c.push("retry_count:".concat(i.count),"retry_after:".concat(i.lastFailureStatus));var u=["ddsource=browser","ddtags=".concat(encodeURIComponent(c.join(","))),"dd-api-key=".concat(o),"dd-evp-origin-version=".concat(encodeURIComponent("4.42.2")),"dd-evp-origin=browser","dd-request-id=".concat(Ve())];return e==="rum"&&u.push("batch_time=".concat(ye())),a&&u.reverse(),u.join("&")}var ru=200;function su(t){var e=t.env,n=t.service,r=t.version,s=t.datacenter,i=[];return e&&i.push(sn("env",e)),n&&i.push(sn("service",n)),r&&i.push(sn("version",r)),s&&i.push(sn("datacenter",s)),i}var iu=/[^a-z0-9_:./-]/;function sn(t,e){var n=ru-t.length-1;(e.length>n||iu.test(e))&&_.warn("".concat(t," value doesn't meet tag requirements and will be sanitized"));var r=e.replace(/,/g,"_");return"".concat(t,":").concat(r)}function ou(t){var e=su(t),n=au(t,e),r=Ye(n).map(function(i){return i.urlPrefix}),s=cu(t,r,e);return F({isIntakeUrl:function(i){return r.some(function(o){return i.indexOf(o)===0})},replica:s,site:t.site||Pt},n)}function au(t,e){return{logsEndpointBuilder:$t(t,"logs",e),rumEndpointBuilder:$t(t,"rum",e),sessionReplayEndpointBuilder:$t(t,"sessionReplay",e)}}function cu(t,e,n){if(!!t.replica){var r=F({},t,{site:Pt,clientToken:t.replica.clientToken}),s={logsEndpointBuilder:$t(r,"logs",n),rumEndpointBuilder:$t(r,"rum",n)};return e.push.apply(e,Ye(s).map(function(i){return i.urlPrefix})),F({applicationId:t.replica.applicationId},s)}}function uu(t){var e,n,r;if(!t||!t.clientToken){_.error("Client Token is not configured, we will not send any data.");return}var s=(e=t.sessionSampleRate)!==null&&e!==void 0?e:t.sampleRate;if(s!==void 0&&!Yn(s)){_.error("Session Sample Rate should be a number between 0 and 100");return}if(t.telemetrySampleRate!==void 0&&!Yn(t.telemetrySampleRate)){_.error("Telemetry Sample Rate should be a number between 0 and 100");return}if(t.telemetryConfigurationSampleRate!==void 0&&!Yn(t.telemetryConfigurationSampleRate)){_.error("Telemetry Configuration Sample Rate should be a number between 0 and 100");return}return Array.isArray(t.enableExperimentalFeatures)&&Lc(t.enableExperimentalFeatures.filter(function(i){return Mc(Rt,i)})),F({beforeSend:t.beforeSend&&Ws(t.beforeSend,"beforeSend threw an error:"),cookieOptions:lu(t),sessionSampleRate:s!=null?s:100,telemetrySampleRate:(n=t.telemetrySampleRate)!==null&&n!==void 0?n:20,telemetryConfigurationSampleRate:(r=t.telemetryConfigurationSampleRate)!==null&&r!==void 0?r:5,service:t.service,silentMultipleInit:!!t.silentMultipleInit,batchBytesLimit:16*be,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:30*Tt,batchMessagesLimit:50,messageBytesLimit:256*be},ou(t))}function lu(t){var e={};return e.secure=du(t),e.crossSite=!!t.useCrossSiteSessionCookie,t.trackSessionAcrossSubdomains&&(e.domain=Nc()),e}function du(t){return!!t.useSecureSessionCookie||!!t.useCrossSiteSessionCookie}function fu(t){var e,n,r=(e=t.proxy)!==null&&e!==void 0?e:t.proxyUrl;return{session_sample_rate:(n=t.sessionSampleRate)!==null&&n!==void 0?n:t.sampleRate,telemetry_sample_rate:t.telemetrySampleRate,telemetry_configuration_sample_rate:t.telemetryConfigurationSampleRate,use_before_send:!!t.beforeSend,use_cross_site_session_cookie:t.useCrossSiteSessionCookie,use_secure_session_cookie:t.useSecureSessionCookie,use_proxy:r!==void 0?!!r:void 0,silent_multiple_init:t.silentMultipleInit,track_session_across_subdomains:t.trackSessionAcrossSubdomains,track_resources:t.trackResources,track_long_task:t.trackLongTasks}}var Nt="?";function le(t){var e=[],n=rr(t,"stack"),r=String(t);return n&&Zs(n,r)&&(n=n.slice(r.length)),n&&n.split(`
`).forEach(function(s){var i=gu(s)||vu(s)||bu(s)||Su(s);i&&(!i.func&&i.line&&(i.func=Nt),e.push(i))}),{message:rr(t,"message"),name:rr(t,"name"),stack:e}}var ii="((?:file|https?|blob|chrome-extension|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",et="(?::(\\d+))",pu=new RegExp("^\\s*at (.*?) ?\\(".concat(ii).concat(et,"?").concat(et,"?\\)?\\s*$"),"i"),hu=new RegExp("\\((\\S*)".concat(et).concat(et,"\\)"));function gu(t){var e=pu.exec(t);if(!!e){var n=e[2]&&e[2].indexOf("native")===0,r=e[2]&&e[2].indexOf("eval")===0,s=hu.exec(e[2]);return r&&s&&(e[2]=s[1],e[3]=s[2],e[4]=s[3]),{args:n?[e[2]]:[],column:e[4]?+e[4]:void 0,func:e[1]||Nt,line:e[3]?+e[3]:void 0,url:n?void 0:e[2]}}}var mu=new RegExp("^\\s*at ?".concat(ii).concat(et,"?").concat(et,"??\\s*$"),"i");function vu(t){var e=mu.exec(t);if(!!e)return{args:[],column:e[3]?+e[3]:void 0,func:Nt,line:e[2]?+e[2]:void 0,url:e[1]}}var yu=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function bu(t){var e=yu.exec(t);if(!!e)return{args:[],column:e[4]?+e[4]:void 0,func:e[1]||Nt,line:+e[3],url:e[2]}}var Eu=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,wu=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function Su(t){var e=Eu.exec(t);if(!!e){var n=e[3]&&e[3].indexOf(" > eval")>-1,r=wu.exec(e[3]);return n&&r&&(e[3]=r[1],e[4]=r[2],e[5]=void 0),{args:e[2]?e[2].split(","):[],column:e[5]?+e[5]:void 0,func:e[1]||Nt,line:e[4]?+e[4]:void 0,url:e[3]}}}function rr(t,e){if(!(typeof t!="object"||!t||!(e in t))){var n=t[e];return typeof n=="string"?n:void 0}}function oi(t,e,n){var r=t[e],s=n(r),i=function(){if(typeof s=="function")return s.apply(this,arguments)};return t[e]=i,{stop:function(){t[e]===i?t[e]=r:s=r}}}function tt(t,e,n){var r=n.before,s=n.after;return oi(t,e,function(i){return function(){var o=arguments,a;return r&&Le(r,this,o),typeof i=="function"&&(a=i.apply(this,o)),s&&Le(s,this,o),a}})}var Cu=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function Tu(t){var e=Ou(t).stop,n=Ru(t).stop;return{stop:function(){e(),n()}}}function Ou(t){return tt(window,"onerror",{before:function(e,n,r,s,i){var o;if(i instanceof Error)o=le(i);else{var a=[{url:n,column:s,line:r}],c=_u(e),u=c.name,d=c.message;o={name:u,message:d,stack:a}}t(o,i!=null?i:e)}})}function _u(t){var e,n,r;return{}.toString.call(t)==="[object String]"&&(e=Cu.exec(t),n=e[1],r=e[2]),{name:n,message:r}}function Ru(t){return tt(window,"onunhandledrejection",{before:function(e){var n=e.reason||"Empty reason",r=le(n);t(r,n)}})}var Au=220*be,Iu="$",Pu=3;function de(t,e){var n;e===void 0&&(e=Au);var r=Qe(Object.prototype),s=Qe(Array.prototype),i=[],o=new WeakMap,a=sr(t,Iu,void 0,i,o),c=((n=JSON.stringify(a))===null||n===void 0?void 0:n.length)||0;if(c>e){ir(e,"discarded",t);return}for(;i.length>0&&c<e;){var u=i.shift(),d=0;if(Array.isArray(u.source))for(var l=0;l<u.source.length;l++){var f=sr(u.source[l],u.path,l,i,o);if(f!==void 0?c+=JSON.stringify(f).length:c+=4,c+=d,d=1,c>e){ir(e,"truncated",t);break}u.target[l]=f}else for(var l in u.source)if(Object.prototype.hasOwnProperty.call(u.source,l)){var f=sr(u.source[l],u.path,l,i,o);if(f!==void 0&&(c+=JSON.stringify(f).length+d+l.length+Pu,d=1),c>e){ir(e,"truncated",t);break}u.target[l]=f}}return r(),s(),a}function sr(t,e,n,r,s){var i=Lu(t);if(!i||typeof i!="object")return $u(i);var o=Nu(i);if(o!=="[Object]"&&o!=="[Array]"&&o!=="[Error]")return o;var a=t;if(s.has(a))return"[Reference seen at ".concat(s.get(a),"]");var c=n!==void 0?"".concat(e,".").concat(n):e,u=Array.isArray(i)?[]:{};return s.set(a,c),r.push({source:i,target:u,path:c}),u}function $u(t){return typeof t=="bigint"?"[BigInt] ".concat(t.toString()):typeof t=="function"?"[Function] ".concat(t.name||"unknown"):typeof t=="symbol"?"[Symbol] ".concat(t.description||t.toString()):t}function Nu(t){try{if(t instanceof Event)return{isTrusted:t.isTrusted};var e=Object.prototype.toString.call(t),n=e.match(/\[object (.*)\]/);if(n&&n[1])return"[".concat(n[1],"]")}catch{}return"[Unserializable]"}function Lu(t){var e=t;if(e&&typeof e.toJSON=="function")try{return e.toJSON()}catch{}return t}function ir(t,e,n){_.warn("The data provided has been ".concat(e," as it is over the limit of ").concat(t," characters:"),n)}var ai="No stack, consider using an instance of Error";function ci(t){var e=t.stackTrace,n=t.originalError,r=t.handlingStack,s=t.startClocks,i=t.nonErrorPrefix,o=t.source,a=t.handling,c=n instanceof Error,u=xu(e,c,i,n),d=Uu(c,e)?xe(e):ai,l=c?ju(n,o):void 0,f=e==null?void 0:e.name,p=ui(n);return{startClocks:s,source:o,handling:a,handlingStack:r,originalError:n,type:f,message:u,stack:d,causes:l,fingerprint:p}}function xu(t,e,n,r){return(t==null?void 0:t.message)&&(t==null?void 0:t.name)?t.message:e?"Empty message":"".concat(n," ").concat(Ze(de(r)))}function Uu(t,e){return e===void 0?!1:t?!0:e.stack.length>0&&(e.stack.length>1||e.stack[0].url!==void 0)}function ui(t){return t instanceof Error&&"dd_fingerprint"in t?String(t.dd_fingerprint):void 0}function xe(t){var e=li(t);return t.stack.forEach(function(n){var r=n.func==="?"?"<anonymous>":n.func,s=n.args&&n.args.length>0?"(".concat(n.args.join(", "),")"):"",i=n.line?":".concat(n.line):"",o=n.line&&n.column?":".concat(n.column):"";e+=`
  at `.concat(r).concat(s," @ ").concat(n.url).concat(i).concat(o)}),e}function Bu(t){var e;return(e=/@ (.+)/.exec(t))===null||e===void 0?void 0:e[1]}function li(t){return"".concat(t.name||"Error",": ").concat(t.message)}function ku(){var t=2,e=new Error,n;if(!e.stack)try{throw e}catch{}return Le(function(){var r=le(e);r.stack=r.stack.slice(t),n=xe(r)}),n}function ju(t,e){for(var n=t,r=[];(n==null?void 0:n.cause)instanceof Error&&r.length<10;){var s=le(n.cause);r.push({message:n.cause.message,source:e,type:s==null?void 0:s.name,stack:s&&xe(s)}),n=n.cause}return r.length?r:void 0}var R={AGENT:"agent",CONSOLE:"console",CUSTOM:"custom",LOGGER:"logger",NETWORK:"network",SOURCE:"source",REPORT:"report"};function Du(t){return Tu(function(e,n){t.notify(ci({stackTrace:e,originalError:n,startClocks:Je(),nonErrorPrefix:"Uncaught",source:R.SOURCE,handling:"unhandled"}))})}function Mu(t){var e=F({version:"4.42.2",onReady:function(n){n()}},t);return Object.defineProperty(e,"_setDebug",{get:function(){return Gc},enumerable:!1}),e}function Fu(t,e,n){var r=t[e];t[e]=n,r&&r.q&&r.q.forEach(function(s){return Ws(s,"onReady callback threw an error:")()})}var J=function(){function t(e){this.onFirstSubscribe=e,this.observers=[]}return t.prototype.subscribe=function(e){var n=this;return!this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe()||void 0),this.observers.push(e),{unsubscribe:function(){n.observers=n.observers.filter(function(r){return e!==r}),!n.observers.length&&n.onLastUnsubscribe&&n.onLastUnsubscribe()}}},t.prototype.notify=function(e){this.observers.forEach(function(n){return n(e)})},t}();function di(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=new J(function(){var r=t.map(function(s){return s.subscribe(function(i){return n.notify(i)})});return function(){return r.forEach(function(s){return s.unsubscribe()})}});return n}function Lt(t,e,n,r){return or(t,[e],n,r)}function or(t,e,n,r){var s=r===void 0?{}:r,i=s.once,o=s.capture,a=s.passive,c=C(i?function(f){l(),n(f)}:n),u=a?{capture:o,passive:a}:o,d=Ke(t,"addEventListener");e.forEach(function(f){return d.call(t,f,c,u)});function l(){var f=Ke(t,"removeEventListener");e.forEach(function(p){return f.call(t,p,c,u)})}return{stop:l}}var Ee={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function Hu(t){var e=[];We(t,Ee.cspViolation)&&e.push(zu());var n=t.filter(function(r){return r!==Ee.cspViolation});return n.length&&e.push(Gu(n)),di.apply(void 0,e)}function Gu(t){var e=new J(function(){if(!!window.ReportingObserver){var n=C(function(s){return s.forEach(function(i){e.notify(qu(i))})}),r=new window.ReportingObserver(n,{types:t,buffered:!0});return r.observe(),function(){r.disconnect()}}});return e}function zu(){var t=new J(function(){var e=Lt(document,"securitypolicyviolation",function(n){t.notify(Ju(n))}).stop;return e});return t}function qu(t){var e=t.type,n=t.body;return{type:e,subtype:n.id,message:"".concat(e,": ").concat(n.message),stack:fi(n.id,n.message,n.sourceFile,n.lineNumber,n.columnNumber)}}function Ju(t){var e=Ee.cspViolation,n="'".concat(t.blockedURI,"' blocked by '").concat(t.effectiveDirective,"' directive");return{type:Ee.cspViolation,subtype:t.effectiveDirective,message:"".concat(e,": ").concat(n),stack:fi(t.effectiveDirective,t.originalPolicy?"".concat(n,' of the policy "').concat(Pc(t.originalPolicy,100,"..."),'"'):"no policy",t.sourceFile,t.lineNumber,t.columnNumber)}}function fi(t,e,n,r,s){return n&&xe({name:t,message:e,stack:[{func:"?",url:n,line:r,column:s}]})}function pi(t,e){var n=window.__ddBrowserSdkExtensionCallback;n&&n({type:t,payload:e})}function hi(t){return t===null?"null":Array.isArray(t)?"array":typeof t}function on(t,e,n){if(n===void 0&&(n=Vu()),e===void 0)return t;if(typeof e!="object"||e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){var r=e.flags||[e.global?"g":"",e.ignoreCase?"i":"",e.multiline?"m":"",e.sticky?"y":"",e.unicode?"u":""].join("");return new RegExp(e.source,r)}if(!n.hasAlreadyBeenSeen(e)){if(Array.isArray(e)){for(var s=Array.isArray(t)?t:[],i=0;i<e.length;++i)s[i]=on(s[i],e[i],n);return s}var o=hi(t)==="object"?t:{};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(o[a]=on(o[a],e[a],n));return o}}function ar(t){return on(void 0,t)}function an(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n,r=0,s=t;r<s.length;r++){var i=s[r];i!=null&&(n=on(n,i))}return n}function Vu(){if(typeof WeakSet<"u"){var t=new WeakSet;return{hasAlreadyBeenSeen:function(n){var r=t.has(n);return r||t.add(n),r}}}var e=[];return{hasAlreadyBeenSeen:function(n){var r=e.indexOf(n)>=0;return r||e.push(n),r}}}var cr={log:"log",configuration:"configuration"},Wu=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","http://localhost","<anonymous>"],Yu=[Kc],ce={maxEventsPerPage:0,sentEventCount:0,telemetryEnabled:!1,telemetryConfigurationEnabled:!1},ur;function Xu(t,e){var n,r=new J;ce.telemetryEnabled=!We(Yu,e.site)&&Wn(e.telemetrySampleRate),ce.telemetryConfigurationEnabled=ce.telemetryEnabled&&Wn(e.telemetryConfigurationSampleRate),ur=function(i){if(ce.telemetryEnabled){var o=s(t,i);r.notify(o),pi("telemetry",o)}},Hc(gi),F(ce,{maxEventsPerPage:e.maxTelemetryEventsPerPage,sentEventCount:0});function s(i,o){return an({type:"telemetry",date:ye(),service:i,version:"4.42.2",source:"browser",_dd:{format_version:2},telemetry:o,experimental_features:Ks(xc())},n!==void 0?n():{})}return{setContextProvider:function(i){n=i},observable:r,enabled:ce.telemetryEnabled}}function Ku(t){return t.site===Yc}function Zu(t,e){tr(k.debug,t,e),lr(F({type:cr.log,message:t,status:"debug"},e))}function gi(t){lr(F({type:cr.log,status:"error"},el(t)))}function Qu(t){ce.telemetryConfigurationEnabled&&lr({type:cr.configuration,configuration:t})}function lr(t){ur&&ce.sentEventCount<ce.maxEventsPerPage&&(ce.sentEventCount+=1,ur(t))}function el(t){if(t instanceof Error){var e=le(t);return{error:{kind:e.name,stack:xe(tl(e))},message:e.message}}return{error:{stack:ai},message:"".concat("Uncaught"," ").concat(Ze(t))}}function tl(t){return t.stack=t.stack.filter(function(e){return!e.url||Wu.some(function(n){return Zs(e.url,n)})}),t}var cn=1/0,nl=Ne,rl=function(){function t(e){var n=this;this.expireDelay=e,this.entries=[],this.clearOldValuesInterval=nr(function(){return n.clearOldValues()},nl)}return t.prototype.add=function(e,n){var r=this,s={value:e,startTime:n,endTime:cn,remove:function(){var i=r.entries.indexOf(s);i>=0&&r.entries.splice(i,1)},close:function(i){s.endTime=i}};return this.entries.unshift(s),s},t.prototype.find=function(e){e===void 0&&(e=cn);for(var n=0,r=this.entries;n<r.length;n++){var s=r[n];if(s.startTime<=e){if(e<=s.endTime)return s.value;break}}},t.prototype.closeActive=function(e){var n=this.entries[0];n&&n.endTime===cn&&n.close(e)},t.prototype.findAll=function(e){return e===void 0&&(e=cn),this.entries.filter(function(n){return n.startTime<=e&&e<=n.endTime}).map(function(n){return n.value})},t.prototype.reset=function(){this.entries=[]},t.prototype.stop=function(){ni(this.clearOldValuesInterval)},t.prototype.clearOldValues=function(){for(var e=_t()-this.expireDelay;this.entries.length>0&&this.entries[this.entries.length-1].endTime<e;)this.entries.pop()},t}();function sl(){return!!window.chrome||/HeadlessChrome/.test(window.navigator.userAgent)}var mi=4*Oc,vi=15*Ne,yi=/^([a-z]+)=([a-z0-9-]+)$/,dr="&",un="_dd_s",il=10,ol=100,bi=[],ln;function xt(t,e){var n;if(e===void 0&&(e=0),ln||(ln=t),t!==ln){bi.push(t);return}if(e>=ol){Ei();return}var r,s=Ut();if(fr()){if(s.lock){dn(t,e);return}if(r=Ve(),s.lock=r,pr(s,t.options),s=Ut(),s.lock!==r){dn(t,e);return}}var i=t.process(s);if(fr()&&(s=Ut(),s.lock!==r)){dn(t,e);return}if(i&&wi(i,t.options),fr()&&!(i&&Ci(i))){if(s=Ut(),s.lock!==r){dn(t,e);return}delete s.lock,pr(s,t.options),i=s}(n=t.after)===null||n===void 0||n.call(t,i||s),Ei()}function fr(){return sl()}function dn(t,e){At(function(){xt(t,e+1)},il)}function Ei(){ln=void 0;var t=bi.shift();t&&xt(t)}function wi(t,e){if(Ci(t)){Si(e);return}t.expire=String(Ot()+vi),pr(t,e)}function pr(t,e){en(un,al(t),vi,e)}function al(t){return kc(t).map(function(e){var n=e[0],r=e[1];return"".concat(n,"=").concat(r)}).join(dr)}function Ut(){var t=ae(un),e={};return cl(t)&&t.split(dr).forEach(function(n){var r=yi.exec(n);if(r!==null){var s=r[1],i=r[2];e[s]=i}}),e}function Si(t){Kn(un,t)}function cl(t){return t!==void 0&&(t.indexOf(dr)!==-1||yi.test(t))}function Ci(t){return Qs(t)}var ul="_dd",ll="_dd_r",dl="_dd_l",fl="rum",pl="logs";function hl(t){var e=ae(un),n=ae(ul),r=ae(ll),s=ae(dl);if(!e){var i={};n&&(i.id=n),s&&/^[01]$/.test(s)&&(i[pl]=s),r&&/^[012]$/.test(r)&&(i[fl]=r),wi(i,t)}}function gl(t,e,n){var r=new J,s=new J,i=nr(u,Vs),o=b();function a(){var y;xt({options:t,process:function(g){var U=d(g);return y=l(U),U},after:function(g){y&&!f()&&m(g),o=g}})}function c(){xt({options:t,process:function(y){return f()?d(y):void 0}})}function u(){xt({options:t,process:function(y){return T(y)?void 0:{}},after:d})}function d(y){return T(y)||(y={}),f()&&(p(y)?h():o=y),y}function l(y){var g=n(y[e]),U=g.trackingType,B=g.isTracked;return y[e]=U,B&&!y.id&&(y.id=Ve(),y.created=String(Ot())),B}function f(){return o[e]!==void 0}function p(y){return o.id!==y.id||o[e]!==y[e]}function h(){o={},s.notify()}function m(y){o=y,r.notify()}function b(){var y=Ut();return T(y)?y:{}}function T(y){return(y.created===void 0||Ot()-Number(y.created)<mi)&&(y.expire===void 0||Ot()<Number(y.expire))}return{expandOrRenewSession:ri(a,Vs).throttled,expandSession:c,getSession:function(){return o},renewObservable:r,expireObservable:s,expire:function(){Si(t),d({})},stop:function(){ni(i)}}}var ml=Ne,vl=mi;function yl(t,e,n){hl(t);var r=gl(t,e,n),s=new rl(vl);r.renewObservable.subscribe(function(){s.add(i(),_t())}),r.expireObservable.subscribe(function(){s.closeActive(_t())}),r.expandOrRenewSession(),s.add(i(),_c().relative),bl(function(){return r.expandOrRenewSession()}),El(function(){return r.expandSession()});function i(){return{id:r.getSession().id,trackingType:r.getSession()[e]}}return{findActiveSession:function(o){return s.find(o)},renewObservable:r.renewObservable,expireObservable:r.expireObservable,expire:r.expire}}function bl(t){or(window,["click","touchstart","keydown","scroll"],t,{capture:!0,passive:!0}).stop}function El(t){var e=function(){document.visibilityState==="visible"&&t()};Lt(document,"visibilitychange",e).stop,nr(e,ml)}function Ti(t){return t>=500}function wl(t){try{return t.clone()}catch{return}}var Sl=80*be,Cl=32,Oi=3*Xs,Tl=Ne,_i=Tt;function Ri(t,e,n,r,s){e.transportStatus===0&&e.queuedPayloads.size()===0&&e.bandwidthMonitor.canHandle(t)?Ii(t,e,n,{onSuccess:function(){return Pi(0,e,n,r,s)},onFailure:function(){e.queuedPayloads.enqueue(t),Ai(e,n,r,s)}}):e.queuedPayloads.enqueue(t)}function Ai(t,e,n,r){t.transportStatus===2&&At(function(){var s=t.queuedPayloads.first();Ii(s,t,e,{onSuccess:function(){t.queuedPayloads.dequeue(),t.currentBackoffTime=_i,Pi(1,t,e,n,r)},onFailure:function(){t.currentBackoffTime=Math.min(Tl,t.currentBackoffTime*2),Ai(t,e,n,r)}})},t.currentBackoffTime)}function Ii(t,e,n,r){var s=r.onSuccess,i=r.onFailure;e.bandwidthMonitor.add(t),n(t,function(o){e.bandwidthMonitor.remove(t),Ol(o)?(e.transportStatus=e.bandwidthMonitor.ongoingRequestCount>0?1:2,t.retry={count:t.retry?t.retry.count+1:1,lastFailureStatus:o.status},i()):(e.transportStatus=0,s())})}function Pi(t,e,n,r,s){t===0&&e.queuedPayloads.isFull()&&!e.queueFullReported&&(s({message:"Reached max ".concat(r," events size queued for upload: ").concat(Oi/Xs,"MiB"),source:R.AGENT,startClocks:Je()}),e.queueFullReported=!0);var i=e.queuedPayloads;for(e.queuedPayloads=$i();i.size()>0;)Ri(i.dequeue(),e,n,r,s)}function Ol(t){return t.type!=="opaque"&&(t.status===0&&!navigator.onLine||t.status===408||t.status===429||Ti(t.status))}function _l(){return{transportStatus:0,currentBackoffTime:_i,bandwidthMonitor:Rl(),queuedPayloads:$i(),queueFullReported:!1}}function $i(){var t=[];return{bytesCount:0,enqueue:function(e){this.isFull()||(t.push(e),this.bytesCount+=e.bytesCount)},first:function(){return t[0]},dequeue:function(){var e=t.shift();return e&&(this.bytesCount-=e.bytesCount),e},size:function(){return t.length},isFull:function(){return this.bytesCount>=Oi}}}function Rl(){return{ongoingRequestCount:0,ongoingByteCount:0,canHandle:function(t){return this.ongoingRequestCount===0||this.ongoingByteCount+t.bytesCount<=Sl&&this.ongoingRequestCount<Cl},add:function(t){this.ongoingRequestCount+=1,this.ongoingByteCount+=t.bytesCount},remove:function(t){this.ongoingRequestCount-=1,this.ongoingByteCount-=t.bytesCount}}}function Al(t,e,n){var r=_l(),s=function(i,o){return $l(t,e,i,o)};return{send:function(i){Ri(i,r,s,t.endpointType,n)},sendOnExit:function(i){Il(t,e,i)}}}function Il(t,e,n){var r=n.data,s=n.bytesCount,i=n.flushReason,o=!!navigator.sendBeacon&&s<e;if(o)try{var a=t.build("beacon",i),c=navigator.sendBeacon(a,r);if(c)return}catch(d){Pl(d)}var u=t.build("xhr",i);hr(u,r)}var Ni=!1;function Pl(t){Ni||(Ni=!0,gi(t))}function $l(t,e,n,r){var s=n.data,i=n.bytesCount,o=n.flushReason,a=n.retry,c=Nl()&&i<e;if(c){var u=t.build("fetch",o,a);fetch(u,{method:"POST",body:s,keepalive:!0,mode:"cors"}).then(C(function(l){return r==null?void 0:r({status:l.status,type:l.type})}),C(function(){var l=t.build("xhr",o,a);hr(l,s,r)}))}else{var d=t.build("xhr",o,a);hr(d,s,r)}}function Nl(){try{return window.Request&&"keepalive"in new Request("http://a")}catch{return!1}}function hr(t,e,n){var r=new XMLHttpRequest;r.open("POST",t,!0),Lt(r,"loadend",function(){n==null||n({status:r.status})},{once:!0}),r.send(e)}var Bt={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function Ll(){var t=new J(function(){var e=Ys(Rt.PAGEHIDE),n=or(window,["visibilitychange","freeze","pagehide"],function(s){s.type==="pagehide"&&e?t.notify({reason:Bt.PAGEHIDE}):s.type==="visibilitychange"&&document.visibilityState==="hidden"?t.notify({reason:Bt.HIDDEN}):s.type==="freeze"&&t.notify({reason:Bt.FROZEN})},{capture:!0}).stop,r=It;return e||(r=Lt(window,"beforeunload",function(){t.notify({reason:Bt.UNLOADING})}).stop),function(){n(),r()}});return t}function xl(t){return We(Ye(Bt),t)}var Ul=function(){function t(e,n,r){var s=this;this.request=e,this.flushController=n,this.messageBytesLimit=r,this.pushOnlyBuffer=[],this.upsertBuffer={},this.flushController.flushObservable.subscribe(function(i){return s.flush(i)})}return t.prototype.add=function(e){this.addOrUpdate(e)},t.prototype.upsert=function(e,n){this.addOrUpdate(e,n)},t.prototype.flush=function(e){var n=this.pushOnlyBuffer.concat(Ye(this.upsertBuffer));this.pushOnlyBuffer=[],this.upsertBuffer={};var r={data:n.join(`
`),bytesCount:e.bytesCount,flushReason:e.reason};xl(e.reason)?this.request.sendOnExit(r):this.request.send(r)},t.prototype.addOrUpdate=function(e,n){var r=this.process(e),s=r.processedMessage,i=r.messageBytesCount;if(i>=this.messageBytesLimit){_.warn("Discarded a message whose size was bigger than the maximum allowed size ".concat(this.messageBytesLimit,"KB."));return}this.hasMessageFor(n)&&this.remove(n),this.push(s,i,n)},t.prototype.process=function(e){var n=Ze(e),r=er(n);return{processedMessage:n,messageBytesCount:r}},t.prototype.push=function(e,n,r){var s=this.flushController.messagesCount>0?1:0;this.flushController.notifyBeforeAddMessage(n+s),r!==void 0?this.upsertBuffer[r]=e:this.pushOnlyBuffer.push(e),this.flushController.notifyAfterAddMessage()},t.prototype.remove=function(e){var n=this.upsertBuffer[e];delete this.upsertBuffer[e];var r=er(n),s=this.flushController.messagesCount>1?1:0;this.flushController.notifyAfterRemoveMessage(r+s)},t.prototype.hasMessageFor=function(e){return e!==void 0&&this.upsertBuffer[e]!==void 0},t}();function gr(){var t=Bl();if(!!t)return{getAllowedWebViewHosts:function(){return JSON.parse(t.getAllowedWebViewHosts())},send:function(e,n){t.send(JSON.stringify({eventType:e,event:n}))}}}function fn(t){var e;t===void 0&&(t=(e=Xe().location)===null||e===void 0?void 0:e.hostname);var n=gr();return!!n&&n.getAllowedWebViewHosts().some(function(r){return t===r||jc(t,".".concat(r))})}function Bl(){return Xe().DatadogEventBridge}function kl(t){var e=t.messagesLimit,n=t.bytesLimit,r=t.durationLimit,s=t.pageExitObservable,i=t.sessionExpireObservable,o=new J;s.subscribe(function(p){return u(p.reason)}),i.subscribe(function(){return u("session_expire")});var a=0,c=0;function u(p){if(c!==0){var h=c,m=a;c=0,a=0,f(),o.notify({reason:p,messagesCount:h,bytesCount:m})}}var d;function l(){d===void 0&&(d=At(function(){u("duration_limit")},r))}function f(){ti(d),d=void 0}return{flushObservable:o,get messagesCount(){return c},notifyBeforeAddMessage:function(p){a+p>=n&&u("bytes_limit"),c+=1,a+=p,l()},notifyAfterAddMessage:function(){c>=e?u("messages_limit"):a>=n&&u("bytes_limit")},notifyAfterRemoveMessage:function(p){a-=p,c-=1,c===0&&f()}}}function Li(t,e,n,r,s,i){var o=c(e),a;i&&(a=c(i));function c(u){return new Ul(Al(u,t.batchBytesLimit,n),kl({messagesLimit:t.batchMessagesLimit,bytesLimit:t.batchBytesLimit,durationLimit:t.flushTimeout,pageExitObservable:r,sessionExpireObservable:s}),t.messageBytesLimit)}return{add:function(u,d){d===void 0&&(d=!0),o.add(u),a&&d&&a.add(u)}}}function jl(t){var e=new Set;return t.forEach(function(n){return e.add(n)}),Ks(e)}var Dl=function(){function t(){this.callbacks={}}return t.prototype.notify=function(e,n){var r=this.callbacks[e];r&&r.forEach(function(s){return s(n)})},t.prototype.subscribe=function(e,n){var r=this;return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),{unsubscribe:function(){r.callbacks[e]=r.callbacks[e].filter(function(s){return n!==s})}}},t}();function Ml(t,e,n){var r=0,s=!1;return{isLimitReached:function(){if(r===0&&At(function(){r=0},Ne),r+=1,r<=e||s)return s=!1,!1;if(r===e+1){s=!0;try{n({message:"Reached max number of ".concat(t,"s by minute: ").concat(e),source:R.AGENT,startClocks:Je()})}finally{s=!1}}return!0}}}var mr,vr=new WeakMap;function Fl(){return mr||(mr=Hl()),mr}function Hl(){var t=new J(function(){var e=tt(XMLHttpRequest.prototype,"open",{before:Gl}).stop,n=tt(XMLHttpRequest.prototype,"send",{before:function(){zl.call(this,t)}}).stop,r=tt(XMLHttpRequest.prototype,"abort",{before:ql}).stop;return function(){e(),n(),r()}});return t}function Gl(t,e){vr.set(this,{state:"open",method:t,url:nn(String(e))})}function zl(t){var e=this,n=vr.get(this);if(!!n){var r=n;r.state="start",r.startTime=_t(),r.startClocks=Je(),r.isAborted=!1,r.xhr=this;var s=!1,i=tt(this,"onreadystatechange",{before:function(){this.readyState===XMLHttpRequest.DONE&&o()}}).stop,o=function(){if(a(),i(),!s){s=!0;var c=n;c.state="complete",c.duration=Rc(r.startClocks.timeStamp,ye()),c.status=e.status,t.notify(Dc(c))}},a=Lt(this,"loadend",o).stop;t.notify(r)}}function ql(){var t=vr.get(this);t&&(t.isAborted=!0)}var yr;function Jl(){return yr||(yr=Vl()),yr}function Vl(){var t=new J(function(){if(!!window.fetch){var e=oi(window,"fetch",function(n){return function(r,s){var i,o=Le(Wl,null,[t,r,s]);return o?(i=n.call(this,o.input,o.init),Le(Yl,null,[t,i,o])):i=n.call(this,r,s),i}}).stop;return e}});return t}function Wl(t,e,n){var r=n&&n.method||e instanceof Request&&e.method||"GET",s=e instanceof Request?e.url:nn(String(e)),i=Je(),o={state:"start",init:n,input:e,method:r,startClocks:i,url:s};return t.notify(o),o}function Yl(t,e,n){var r=function(s){var i=n;i.state="resolve","stack"in s||s instanceof Error?(i.status=0,i.isAborted=s instanceof DOMException&&s.code===DOMException.ABORT_ERR,i.error=s):"status"in s&&(i.response=s,i.responseType=s.type,i.status=s.status,i.isAborted=!1),t.notify(i)};e.then(C(r),C(r))}var br={};function Xl(t){var e=t.map(function(n){return br[n]||(br[n]=Kl(n)),br[n]});return di.apply(void 0,e)}function Kl(t){var e=new J(function(){var n=q[t];return q[t]=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];n.apply(console,r);var i=ku();Le(function(){e.notify(Zl(r,t,i))})},function(){q[t]=n}});return e}function Zl(t,e,n){var r=t.map(function(a){return Ql(a)}).join(" "),s,i;if(e===k.error){var o=Bc(t,function(a){return a instanceof Error});s=o?xe(le(o)):void 0,i=ui(o),r="console error: ".concat(r)}return{api:e,message:r,stack:s,handlingStack:n,fingerprint:i}}function Ql(t){return typeof t=="string"?de(t):t instanceof Error?li(le(t)):Ze(de(t),void 0,2)}var ed=500,td=function(){function t(){this.buffer=[]}return t.prototype.add=function(e){var n=this.buffer.push(e);n>ed&&this.buffer.splice(0,1)},t.prototype.drain=function(){this.buffer.forEach(function(e){return e()}),this.buffer.length=0},t}(),xi=3*be;function nd(t,e){return t>xi?(_.warn("The ".concat(e," data is over ").concat(xi/be,"KiB. On low connectivity, the SDK has the potential to exhaust the user's upload bandwidth.")),!0):!1}var rd=200;function Er(t,e){e===void 0&&(e=er);var n={},r,s=!1,i=ri(function(o){r=e(Ze(o)),s||(s=nd(r,t))},rd).throttled;return{getBytesCount:function(){return r},get:function(){return n},add:function(o,a){n[o]=a,i(n)},remove:function(o){delete n[o],i(n)},set:function(o){n=o,i(n)},getContext:function(){return ar(n)},setContext:function(o){n=de(o),i(n)},setContextProperty:function(o,a){n[o]=de(a),i(n)},removeContextProperty:function(o){delete n[o],i(n)},clearContext:function(){n={},r=0}}}function sd(t,e,n){var r=t.getReader(),s=[],i=0;o();function o(){r.read().then(C(function(c){if(c.done){a();return}n.collectStreamBody&&s.push(c.value),i+=c.value.length,i>n.bytesLimit?a():o()}),C(function(c){return e(c)}))}function a(){r.cancel().catch(It);var c,u;if(n.collectStreamBody){var d;if(s.length===1)d=s[0];else{d=new Uint8Array(i);var l=0;s.forEach(function(f){d.set(f,l),l+=f.length})}c=d.slice(0,n.bytesLimit),u=d.length>n.bytesLimit}e(void 0,c,u)}}var id="datadog-synthetics-public-id",od="datadog-synthetics-result-id",ad="datadog-synthetics-injects-rum";function Ui(){return Boolean(window._DATADOG_SYNTHETICS_INJECTS_RUM||ae(ad))}function cd(){var t=window._DATADOG_SYNTHETICS_PUBLIC_ID||ae(id);return typeof t=="string"?t:void 0}function ud(){var t=window._DATADOG_SYNTHETICS_RESULT_ID||ae(od);return typeof t=="string"?t:void 0}function Bi(t){var e=F({},t),n=["id","name","email"];return n.forEach(function(r){r in e&&(e[r]=String(e[r]))}),e}function ld(t){var e=hi(t)==="object";return e||_.error("Unsupported user:",t),e}var dd=32*be;function fd(t){var e=uu(t),n=ki(t.forwardConsoleLogs,Ye(k),"Forward Console Logs"),r=ki(t.forwardReports,Ye(Ee),"Forward Reports");if(!(!e||!n||!r))return t.forwardErrorsToLogs&&!We(n,k.error)&&n.push(k.error),F({forwardErrorsToLogs:t.forwardErrorsToLogs!==!1,forwardConsoleLogs:n,forwardReports:r,requestErrorResponseLengthLimit:dd},e)}function ki(t,e,n){if(t===void 0)return[];if(!(t==="all"||Array.isArray(t)&&t.every(function(r){return We(e,r)}))){_.error("".concat(n,' should be "all" or an array with allowed values "').concat(e.join('", "'),'"'));return}return t==="all"?e:jl(t)}function pd(t){var e=fu(t);return F({forward_errors_to_logs:t.forwardErrorsToLogs,forward_console_logs:t.forwardConsoleLogs,forward_reports:t.forwardReports},e)}var hd=globalThis&&globalThis.__decorate||function(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},O={debug:"debug",error:"error",info:"info",warn:"warn"},wr={console:"console",http:"http",silent:"silent"},gd=Object.keys(O),ji=function(){function t(e,n,r,s,i){r===void 0&&(r=wr.http),s===void 0&&(s=O.debug),i===void 0&&(i={}),this.handleLogStrategy=e,this.handlerType=r,this.level=s,this.contextManager=Er("logger context"),this.contextManager.set(F({},i,n?{logger:{name:n}}:void 0))}return t.prototype.log=function(e,n,r,s){r===void 0&&(r=O.info);var i;if(r===O.error&&(i={origin:R.LOGGER}),s!=null){var o=s instanceof Error?le(s):void 0,a=ci({stackTrace:o,originalError:s,nonErrorPrefix:"Provided",source:R.LOGGER,handling:"handled",startClocks:Je()});i={origin:R.LOGGER,stack:a.stack,kind:a.type,message:a.message}}var c=de(n),u=i?an({error:i},c):c;this.handleLogStrategy({message:de(e),context:u,status:r},this)},t.prototype.debug=function(e,n,r){this.log(e,n,O.debug,r)},t.prototype.info=function(e,n,r){this.log(e,n,O.info,r)},t.prototype.warn=function(e,n,r){this.log(e,n,O.warn,r)},t.prototype.error=function(e,n,r){this.log(e,n,O.error,r)},t.prototype.setContext=function(e){this.contextManager.set(e)},t.prototype.getContext=function(){return this.contextManager.get()},t.prototype.addContext=function(e,n){this.contextManager.add(e,n)},t.prototype.removeContext=function(e){this.contextManager.remove(e)},t.prototype.setHandler=function(e){this.handlerType=e},t.prototype.getHandler=function(){return this.handlerType},t.prototype.setLevel=function(e){this.level=e},t.prototype.getLevel=function(){return this.level},hd([zc],t.prototype,"log",null),t}();function md(t){var e=!1,n=Er("global context"),r=Er("user"),s={},i=function(){},o=new td,a=function(p,h,m,b){m===void 0&&(m=ar(d())),b===void 0&&(b=ye()),o.add(function(){return a(p,h,m,b)})},c=function(){},u=new ji(function(){for(var p=[],h=0;h<arguments.length;h++)p[h]=arguments[h];return a.apply(void 0,p)});function d(){return{view:{referrer:document.referrer,url:window.location.href},context:n.getContext(),user:r.getContext()}}return Mu({logger:u,init:C(function(p){var h;if(c=function(){return ar(p)},fn()&&(p=l(p)),!!f(p)){var m=fd(p);!m||(h=t(p,m,d,u),a=h.handleLog,i=h.getInternalContext,o.drain(),e=!0)}}),getLoggerGlobalContext:C(n.get),getGlobalContext:C(n.getContext),setLoggerGlobalContext:C(n.set),setGlobalContext:C(n.setContext),addLoggerGlobalContext:C(n.add),setGlobalContextProperty:C(n.setContextProperty),removeLoggerGlobalContext:C(n.remove),removeGlobalContextProperty:C(n.removeContextProperty),clearGlobalContext:C(n.clearContext),createLogger:C(function(p,h){return h===void 0&&(h={}),s[p]=new ji(function(){for(var m=[],b=0;b<arguments.length;b++)m[b]=arguments[b];return a.apply(void 0,m)},de(p),h.handler,h.level,de(h.context)),s[p]}),getLogger:C(function(p){return s[p]}),getInitConfiguration:C(function(){return c()}),getInternalContext:C(function(p){return i(p)}),setUser:C(function(p){ld(p)&&r.setContext(Bi(p))}),getUser:C(r.getContext),setUserProperty:C(function(p,h){var m,b=Bi((m={},m[p]=h,m))[p];r.setContextProperty(p,b)}),removeUserProperty:C(r.removeContextProperty),clearUser:C(r.clearContext)});function l(p){return F({},p,{clientToken:"empty"})}function f(p){return e?(p.silentMultipleInit||_.error("DD_LOGS is already initialized."),!1):!0}}var vd="logs";function yd(t){var e=yl(t.cookieOptions,vd,function(n){return Ed(t,n)});return{findTrackedSession:function(n){var r=e.findActiveSession(n);return r&&r.trackingType==="1"?{id:r.id}:void 0},expireObservable:e.expireObservable}}function bd(t){var e=Di(t)==="1",n=e?{}:void 0;return{findTrackedSession:function(){return n},expireObservable:new J}}function Di(t){return Wn(t.sessionSampleRate)?"1":"0"}function Ed(t,e){var n=wd(e)?e:Di(t);return{trackingType:n,isTracked:n==="1"}}function wd(t){return t==="0"||t==="1"}var nt,Mi=(nt={},nt[O.debug]=0,nt[O.info]=1,nt[O.warn]=2,nt[O.error]=3,nt);function Sd(t){function e(n,r,s,i){var o=n.context;Fi(n.status,wr.console,r)&&_(n.status,n.message,an(r.getContext(),o)),t.notify(0,{rawLogsEvent:{date:i||ye(),message:n.message,status:n.status,origin:R.LOGGER},messageContext:o,savedCommonContext:s,logger:r})}return{handleLog:e}}function Fi(t,e,n){var r=n.getHandler(),s=Array.isArray(r)?r:[r];return Mi[t]>=Mi[n.getLevel()]&&We(s,e)}function Cd(t,e,n,r,s,i){var o=gd.concat(["custom"]),a={};o.forEach(function(c){a[c]=Ml(c,e.eventRateLimiterThreshold,i)}),n.subscribe(0,function(c){var u,d,l,f=c.rawLogsEvent,p=c.messageContext,h=p===void 0?void 0:p,m=c.savedCommonContext,b=m===void 0?void 0:m,T=c.logger,y=T===void 0?s:T,g=Ac(f.date),U=t.findTrackedSession(g);if(!!U){var B=b||r(),ue=an({service:e.service,session_id:U.id,usr:Qs(B.user)?void 0:B.user,view:B.view},B.context,pn(g),f,y.getContext(),h);!Fi(f.status,wr.http,y)||((u=e.beforeSend)===null||u===void 0?void 0:u.call(e,ue))===!1||((d=ue.error)===null||d===void 0?void 0:d.origin)!==R.AGENT&&((l=a[ue.status])!==null&&l!==void 0?l:a.custom).isLimitReached()||n.notify(1,ue)}})}var Hi=!1;function pn(t){var e=window;if(Ui()){var n=r(e.DD_RUM_SYNTHETICS);return!n&&!Hi&&(Hi=!0,Zu("Logs sent before RUM is injected by the synthetics worker",{testId:cd(),resultId:ud()})),n}return r(e.DD_RUM);function r(s){if(s&&s.getInternalContext)return s.getInternalContext(t)}}var Ue,Td=(Ue={},Ue[k.log]=O.info,Ue[k.debug]=O.debug,Ue[k.info]=O.info,Ue[k.warn]=O.warn,Ue[k.error]=O.error,Ue);function Od(t,e){var n=Xl(t.forwardConsoleLogs).subscribe(function(r){e.notify(0,{rawLogsEvent:{date:ye(),message:r.message,origin:R.CONSOLE,error:r.api===k.error?{origin:R.CONSOLE,stack:r.stack,fingerprint:r.fingerprint}:void 0,status:Td[r.api]}})});return{stop:function(){n.unsubscribe()}}}var kt,_d=(kt={},kt[Ee.cspViolation]=O.error,kt[Ee.intervention]=O.error,kt[Ee.deprecation]=O.warn,kt);function Rd(t,e){var n=Hu(t.forwardReports).subscribe(function(r){var s=r.message,i=_d[r.type],o;i===O.error?o={kind:r.subtype,origin:R.REPORT,stack:r.stack}:r.stack&&(s+=" Found in ".concat(Bu(r.stack))),e.notify(0,{rawLogsEvent:{date:ye(),message:s,origin:R.REPORT,error:o,status:i}})});return{stop:function(){n.unsubscribe()}}}function Ad(t,e){if(!t.forwardErrorsToLogs)return{stop:It};var n=Fl().subscribe(function(i){i.state==="complete"&&s("xhr",i)}),r=Jl().subscribe(function(i){i.state==="resolve"&&s("fetch",i)});function s(i,o){!t.isIntakeUrl(o.url)&&(Nd(o)||Ti(o.status))&&("xhr"in o?Id(o.xhr,t,a):o.response?$d(o.response,t,a):o.error&&Pd(o.error,t,a));function a(c){e.notify(0,{rawLogsEvent:{message:"".concat(Ld(i)," error ").concat(o.method," ").concat(o.url),date:o.startClocks.timeStamp,error:{origin:R.NETWORK,stack:c||"Failed to load"},http:{method:o.method,status_code:o.status,url:o.url},status:O.error,origin:R.NETWORK}})}}return{stop:function(){n.unsubscribe(),r.unsubscribe()}}}function Id(t,e,n){typeof t.response=="string"?n(Sr(t.response,e)):n(t.response)}function Pd(t,e,n){n(Sr(xe(le(t)),e))}function $d(t,e,n){var r=wl(t);!r||!r.body?n():window.TextDecoder?xd(r.body,e.requestErrorResponseLengthLimit,function(s,i){n(s?"Unable to retrieve response: ".concat(s):i)}):r.text().then(C(function(s){return n(Sr(s,e))}),C(function(s){return n("Unable to retrieve response: ".concat(s))}))}function Nd(t){return t.status===0&&t.responseType!=="opaque"}function Sr(t,e){return t.length>e.requestErrorResponseLengthLimit?"".concat(t.substring(0,e.requestErrorResponseLengthLimit),"..."):t}function Ld(t){return t==="xhr"?"XHR":"Fetch"}function xd(t,e,n){sd(t,function(r,s,i){if(r)n(r);else{var o=new TextDecoder().decode(s);i&&(o+="..."),n(void 0,o)}},{bytesLimit:e,collectStreamBody:!0})}function Ud(t,e){if(!t.forwardErrorsToLogs)return{stop:It};var n=new J,r=Du(n).stop,s=n.subscribe(function(i){e.notify(0,{rawLogsEvent:{message:i.message,date:i.startClocks.timeStamp,error:{kind:i.type,origin:R.SOURCE,stack:i.stack},origin:R.SOURCE,status:O.error}})});return{stop:function(){r(),s.unsubscribe()}}}var Bd=Dl;function kd(t,e,n,r,s){var i,o=Li(t,t.logsEndpointBuilder,n,r,s,(i=t.replica)===null||i===void 0?void 0:i.logsEndpointBuilder);e.subscribe(1,function(a){o.add(a)})}function jd(t){var e=gr();t.subscribe(1,function(n){e.send("log",n)})}function Dd(t){return{get:function(e){var n=t.findTrackedSession(e);if(n)return{session_id:n.id}}}}function Md(t,e,n,r){var s=new Bd;s.subscribe(1,function(l){return pi("logs",l)});var i=function(l){return s.notify(0,{rawLogsEvent:{message:l.message,date:l.startClocks.timeStamp,error:{origin:R.AGENT},origin:R.AGENT,status:O.error}})},o=Ll(),a=$c(e.cookieOptions)&&!fn()&&!Ui()?yd(e):bd(e),c=Fd(e,i,o,a.expireObservable);c.setContextProvider(function(){var l,f,p,h,m,b;return{application:{id:(l=pn())===null||l===void 0?void 0:l.application_id},session:{id:(f=a.findTrackedSession())===null||f===void 0?void 0:f.id},view:{id:(h=(p=pn())===null||p===void 0?void 0:p.view)===null||h===void 0?void 0:h.id},action:{id:(b=(m=pn())===null||m===void 0?void 0:m.user_action)===null||b===void 0?void 0:b.id}}}),Ad(e,s),Ud(e,s),Od(e,s),Rd(e,s);var u=Sd(s).handleLog;Cd(a,e,s,n,r,i),fn()?jd(s):kd(e,s,i,o,a.expireObservable),Qu(pd(t));var d=Dd(a);return{handleLog:u,getInternalContext:d.get}}function Fd(t,e,n,r){var s,i=Xu("browser-logs-sdk",t);if(fn()){var o=gr();i.observable.subscribe(function(c){return o.send("internal_telemetry",c)})}else{var a=Li(t,t.rumEndpointBuilder,e,n,r,(s=t.replica)===null||s===void 0?void 0:s.rumEndpointBuilder);i.observable.subscribe(function(c){return a.add(c,Ku(t))})}return i}var rt=md(Md);Fu(Xe(),"DD_LOGS",rt);var hn="NOT_FOUND";function Hd(t){var e;return{get:function(r){return e&&t(e.key,r)?e.value:hn},put:function(r,s){e={key:r,value:s}},getEntries:function(){return e?[e]:[]},clear:function(){e=void 0}}}function Gd(t,e){var n=[];function r(a){var c=n.findIndex(function(d){return e(a,d.key)});if(c>-1){var u=n[c];return c>0&&(n.splice(c,1),n.unshift(u)),u.value}return hn}function s(a,c){r(a)===hn&&(n.unshift({key:a,value:c}),n.length>t&&n.pop())}function i(){return n}function o(){n=[]}return{get:r,put:s,getEntries:i,clear:o}}var zd=function(e,n){return e===n};function qd(t){return function(n,r){if(n===null||r===null||n.length!==r.length)return!1;for(var s=n.length,i=0;i<s;i++)if(!t(n[i],r[i]))return!1;return!0}}function Jd(t,e){var n=typeof e=="object"?e:{equalityCheck:e},r=n.equalityCheck,s=r===void 0?zd:r,i=n.maxSize,o=i===void 0?1:i,a=n.resultEqualityCheck,c=qd(s),u=o===1?Hd(c):Gd(o,c);function d(){var l=u.get(arguments);if(l===hn){if(l=t.apply(null,arguments),a){var f=u.getEntries(),p=f.find(function(h){return a(h.value,l)});p&&(l=p.value)}u.put(arguments,l)}return l}return d.clearCache=function(){return u.clear()},d}function Vd(t){var e=Array.isArray(t[0])?t[0]:t;if(!e.every(function(r){return typeof r=="function"})){var n=e.map(function(r){return typeof r=="function"?"function "+(r.name||"unnamed")+"()":typeof r}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return e}function Wd(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var s=function(){for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];var u=0,d,l={memoizeOptions:void 0},f=a.pop();if(typeof f=="object"&&(l=f,f=a.pop()),typeof f!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof f+"]");var p=l,h=p.memoizeOptions,m=h===void 0?n:h,b=Array.isArray(m)?m:[m],T=Vd(a),y=t.apply(void 0,[function(){return u++,f.apply(null,arguments)}].concat(b)),g=t(function(){for(var B=[],ue=T.length,Ct=0;Ct<ue;Ct++)B.push(T[Ct].apply(null,arguments));return d=y.apply(null,B),d});return Object.assign(g,{resultFunc:f,memoizedResultFunc:y,dependencies:T,lastResult:function(){return d},recomputations:function(){return u},resetRecomputations:function(){return u=0}}),g};return s}var we=Wd(Jd);/*! common-library 2.58.0 */function Yd(t){return new RegExp("^(?:[a-z]+:)?//","i").test(t)}function Gi(t){return{get size(){return t.length},keys(){return Array.from({length:this.size},(e,n)=>t.key(n))},get(e,n=void 0){const r=t.getItem(e);return r?(s=>{try{JSON.parse(s)}catch{return!1}return!0})(r)?JSON.parse(r):r:n},getAll(){return Object.fromEntries(this.keys().map(e=>[e,this.get(e)]))},set(e,n,r=!0){t.setItem(e,r?JSON.stringify(n):n)},remove:t.removeItem.bind(t),clear:t.clear.bind(t),key:t.key.bind(t),has:e=>Boolean(t.getItem(e))}}Gi(localStorage),Gi(sessionStorage);/*! MIT License  Sindre Sorhus */const gn=t=>t!==null&&typeof t=="object",Xd=typeof globalThis.AbortController=="function",Kd=typeof globalThis.ReadableStream=="function",Zd=typeof globalThis.FormData=="function",zi=(t,e)=>{const n=new globalThis.Headers(t||{}),r=e instanceof globalThis.Headers,s=new globalThis.Headers(e||{});for(const[i,o]of s)r&&o==="undefined"||o===void 0?n.delete(i):n.set(i,o);return n},Cr=(...t)=>{let e={},n={};for(const r of t){if(Array.isArray(r))Array.isArray(e)||(e=[]),e=[...e,...r];else if(gn(r)){for(let[s,i]of Object.entries(r))gn(i)&&s in e&&(i=Cr(e[s],i)),e={...e,[s]:i};gn(r.headers)&&(n=zi(n,r.headers))}e.headers=n}return e},qi=["get","post","put","patch","head","delete"],Qd={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},ef=["get","put","head","delete","options","trace"],tf=[408,413,429,500,502,503,504],Ji=[413,429,503],Vi=Symbol("stop");class Tr extends Error{constructor(e,n,r){super(e.statusText||String(e.status===0||e.status?e.status:"Unknown response error")),this.name="HTTPError",this.response=e,this.request=n,this.options=r}}class Or extends Error{constructor(e){super("Request timed out"),this.name="TimeoutError",this.request=e}}const Wi=t=>new Promise(e=>setTimeout(e,t)),nf=(t,e,n)=>new Promise((r,s)=>{const i=setTimeout(()=>{e&&e.abort(),s(new Or(t))},n.timeout);n.fetch(t).then(r).catch(s).then(()=>{clearTimeout(i)})}),rf=t=>qi.includes(t)?t.toUpperCase():t,Yi={limit:2,methods:ef,statusCodes:tf,afterStatusCodes:Ji},sf=(t={})=>{if(typeof t=="number")return{...Yi,limit:t};if(t.methods&&!Array.isArray(t.methods))throw new Error("retry.methods must be an array");if(t.statusCodes&&!Array.isArray(t.statusCodes))throw new Error("retry.statusCodes must be an array");return{...Yi,...t,afterStatusCodes:Ji}},_r=2147483647;class Xi{constructor(e,n={}){if(this._retryCount=0,this._input=e,this._options={credentials:this._input.credentials||"same-origin",...n,headers:zi(this._input.headers,n.headers),hooks:Cr({beforeRequest:[],beforeRetry:[],afterResponse:[]},n.hooks),method:rf(n.method||this._input.method),prefixUrl:String(n.prefixUrl||""),retry:sf(n.retry),throwHttpErrors:n.throwHttpErrors!==!1,timeout:typeof n.timeout>"u"?1e4:n.timeout,fetch:n.fetch||globalThis.fetch.bind(globalThis)},typeof this._input!="string"&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&typeof this._input=="string"){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(Xd&&(this.abortController=new globalThis.AbortController,this._options.signal&&this._options.signal.addEventListener("abort",()=>{this.abortController.abort()}),this._options.signal=this.abortController.signal),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const a="?"+(typeof this._options.searchParams=="string"?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),c=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,a);(Zd&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)&&!(this._options.headers&&this._options.headers["content-type"])&&this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(c,this.request),this._options)}this._options.json!==void 0&&(this._options.body=JSON.stringify(this._options.json),this.request.headers.set("content-type","application/json"),this.request=new globalThis.Request(this.request,{body:this._options.body}));const r=async()=>{if(this._options.timeout>_r)throw new RangeError(`The \`timeout\` option cannot be greater than ${_r}`);await Wi(1);let o=await this._fetch();for(const a of this._options.hooks.afterResponse){const c=await a(this.request,this._options,this._decorateResponse(o.clone()));c instanceof globalThis.Response&&(o=c)}if(this._decorateResponse(o),!o.ok&&this._options.throwHttpErrors)throw new Tr(o,this.request,this._options);if(this._options.onDownloadProgress){if(typeof this._options.onDownloadProgress!="function")throw new TypeError("The `onDownloadProgress` option must be a function");if(!Kd)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return this._stream(o.clone(),this._options.onDownloadProgress)}return o},i=this._options.retry.methods.includes(this.request.method.toLowerCase())?this._retry(r):r();for(const[o,a]of Object.entries(Qd))i[o]=async()=>{this.request.headers.set("accept",this.request.headers.get("accept")||a);const c=(await i).clone();if(o==="json"){if(c.status===204)return"";if(n.parseJson)return n.parseJson(await c.text())}return c[o]()};return i}_calculateRetryDelay(e){if(this._retryCount++,this._retryCount<this._options.retry.limit&&!(e instanceof Or)){if(e instanceof Tr){if(!this._options.retry.statusCodes.includes(e.response.status))return 0;const r=e.response.headers.get("Retry-After");if(r&&this._options.retry.afterStatusCodes.includes(e.response.status)){let s=Number(r);return Number.isNaN(s)?s=Date.parse(r)-Date.now():s*=1e3,typeof this._options.retry.maxRetryAfter<"u"&&s>this._options.retry.maxRetryAfter?0:s}if(e.response.status===413)return 0}return .3*2**(this._retryCount-1)*1e3}return 0}_decorateResponse(e){return this._options.parseJson&&(e.json=async()=>this._options.parseJson(await e.text())),e}async _retry(e){try{return await e()}catch(n){const r=Math.min(this._calculateRetryDelay(n),_r);if(r!==0&&this._retryCount>0){await Wi(r);for(const s of this._options.hooks.beforeRetry)if(await s({request:this.request,options:this._options,error:n,retryCount:this._retryCount})===Vi)return;return this._retry(e)}if(this._options.throwHttpErrors)throw n}}async _fetch(){for(const e of this._options.hooks.beforeRequest){const n=await e(this.request,this._options);if(n instanceof Request){this.request=n;break}if(n instanceof Response)return n}return this._options.timeout===!1?this._options.fetch(this.request.clone()):nf(this.request.clone(),this.abortController,this._options)}_stream(e,n){const r=Number(e.headers.get("content-length"))||0;let s=0;return new globalThis.Response(new globalThis.ReadableStream({async start(i){const o=e.body.getReader();n&&n({percent:0,transferredBytes:0,totalBytes:r},new Uint8Array);async function a(){const{done:c,value:u}=await o.read();if(c){i.close();return}if(n){s+=u.byteLength;const d=r===0?0:s/r;n({percent:d,transferredBytes:s,totalBytes:r},u)}i.enqueue(u),await a()}await a()}}))}}const mn=(...t)=>{for(const e of t)if((!gn(e)||Array.isArray(e))&&typeof e<"u")throw new TypeError("The `options` argument must be an object");return Cr({},...t)},Rr=t=>{const e=(n,r)=>new Xi(n,mn(t,r));for(const n of qi)e[n]=(r,s)=>new Xi(r,mn(t,s,{method:n}));return e.HTTPError=Tr,e.TimeoutError=Or,e.create=n=>Rr(mn(n)),e.extend=n=>Rr(mn(t,n)),e.stop=Vi,e},of=Rr();/*! connection-aem-tracking 1.8.0 */const Ki="OWC_TRACKING_MANAGER",Zi="PUSH_TRACKING_EVENT",Qi={trackingEvents:[]};new class extends v.SeamlessConnection{constructor(){super(Ki)}get initialState(){return Qi}getReducer(){return(t=Qi,e)=>e.type===this.getActionType(Zi)?{...t,trackingEvents:[...t.trackingEvents,e.payload]}:t}getPublicDispatchers(){return{pushTrackingEvent:t=>{var e;return(e=window.top)==null||e.dataLayer_ow.push(t),this.getAction(Zi,t)}}}};const af=()=>v.initializeStore().getConnectionDispatchers(Ki).then(t=>t);/*! authentication-library 2.58.0 */var S,vn,j,V,fe,D,Q;(function(t){t.BIAS="BIAS",t.CIAS="CIAS"})(S||(S={})),function(t){t.CUSTOMER="CUSTOMER",t.EMPLOYEE="EMPLOYEE"}(vn||(vn={})),function(t){t.LOCAL="local",t.DEVELOP="dev",t.TEST="test",t.INT="int",t.PPROD="pprod",t.PROD="prod"}(j||(j={})),function(t){t.ONEWEB="oneweb",t.OFLOGIN="OFLOGIN",t.CIAS="cias",t.MARKETPLACE_CORE="mrkplc-core"}(V||(V={})),function(t){t.ERROR="ERROR",t.WARNING="WARNING",t.SUCCESS="SUCCESS",t.HIGHLIGHT="HIGHLIGHT"}(fe||(fe={})),function(t){t.ANONYMOUS="ANONYMOUS",t.AUTHENTICATING="AUTHENTICATING",t.ERROR="ERROR",t.LEGACY="LEGACY",t.AUTHENTICATED="AUTHENTICATED",t.SSO="SSO"}(D||(D={})),function(t){t.TOKEN="token",t.OTT="ott",t.ERROR="error",t.ERROR_ID="errorId",t.STATE="state",t.ERROR_CODE="error_code",t.ERROR_DESCRIPTION="error_description",t.EXCEPTION_ID="exception_id"}(Q||(Q={}));const H="B2XCORE_AUTHENTICATION",Ar=`swsp:${H}`,jt="B2XCORE_USER_LOGIN",eo=`${jt}_CIAS`,to=`${jt}_BIAS`,Dt={jwe:null,claims:null,identityProvider:S.CIAS,isPending:!1,profile:null,alert:null},cf={auth:{jwe:"",jweIssuer:"",activeLoginType:"",claims:null,isLoggedIn:null},userProfile:null,alert:null};D.ANONYMOUS;const no="https://test.api.oneweb.mercedes-benz.com/cias/v1",Ir="https://int.api.oneweb.mercedes-benz.com/cias/v1",Se={appName:"b2xlc",tenantId:V.CIAS,envs:{local:no,dev:no,test:Ir,int:Ir,pprod:Ir,prod:"https://api.oneweb.mercedes-benz.com/cias/v1"}},Pr="https://test.api.oneweb.mercedes-benz.com/bias-oidc/v1",ro="https://int.api.oneweb.mercedes-benz.com/bias-oidc/v1",Mt={tenantId:V.OFLOGIN,envs:{local:Pr,dev:Pr,test:Pr,int:ro,pprod:ro,prod:"https://api.oneweb.mercedes-benz.com/bias-oidc/v1"}},$r="https://int.api.oneweb.mercedes-benz.com/b2xvs/v1",yn={envs:{local:"https://test.api.oneweb.mercedes-benz.com/b2xvs/v1",dev:"https://dev.api.oneweb.mercedes-benz.com/b2xvs/v1",test:$r,int:$r,pprod:$r,prod:"https://api.oneweb.mercedes-benz.com/b2xvs/v1"}},Nr="https://int.api.oneweb.mercedes-benz.com/b2xps/v1",uf={envs:{local:"https://test.api.oneweb.mercedes-benz.com/b2xps/v1",dev:"https://dev.api.oneweb.mercedes-benz.com/b2xps/v1",test:Nr,int:Nr,pprod:Nr,prod:"https://api.oneweb.mercedes-benz.com/b2xps/v1"}};function Lr(t){return!t||!Object.keys(t).length?"":`?${Object.entries(t).map(e=>e.map(n=>encodeURIComponent(n)).join("=")).join("&")}`}function bn(t){const e=function(n,r){try{const s=new URL(n);return r.forEach(i=>{s.searchParams.delete(i)}),s.hash==="#."&&(s.hash=""),s.href}catch{return n}}(window.location.href,t);window.history.replaceState(null,"",e),window.seamlessRouter&&(window.seamlessRouter.currentUrl=new URL(e))}const Ce=t=>new URLSearchParams(window.location.search).get(t),so=async()=>!!await v.initializeStore().getConnectionDispatchers(oe,1).catch(()=>!1),io=()=>{var t,e;return{ciam:!((t=window==null?void 0:window.nn)===null||t===void 0)&&t.ciam?window.nn.ciam():null,logincheck:!((e=window==null?void 0:window.nn)===null||e===void 0)&&e.logincheck?window.nn.logincheck():null}},lf={[j.LOCAL]:{debug:!1,info:!1,warn:!1,error:!1},[j.DEVELOP]:{debug:!1,info:!1,warn:!1,error:!1},[j.TEST]:{debug:!1,info:!1,warn:!1,error:!1},[j.INT]:{debug:!1,info:!1,warn:!0,error:!0},[j.PPROD]:{debug:!1,info:!0,warn:!0,error:!0},[j.PROD]:{debug:!1,info:!1,warn:!1,error:!0}};class A{constructor(e=""){this.context="",this.delimiter="\u25B8",this.t=K.initializeLogger("B2X"),this.context=e}log(e,...n){var r;let s,i=!1;e!=null&&e.messages?(i=(r=e.force)!==null&&r!==void 0?r:i,s=e.messages):s=[e,...n],this.t.log(this.context,this.delimiter,...s),this.logToDatadog("info",i,s)}error(...e){this.t.error(this.context,this.delimiter,...e),this.logToDatadog("error",!1,e)}debug(...e){this.t.debug(this.context,this.delimiter,...e)}warn(...e){this.t.warn(this.context,this.delimiter,...e),this.logToDatadog("warn",!1,e)}logToDatadog(e,n,r){const{env:s}=rt.getInitConfiguration();if(!s)return;const i=n||lf[s][e]||!1,[o,...a]=r,c=typeof o=="string"?`[${this.context}] - ${o}`:this.context,u={data:a.map(d=>d instanceof Error?d.toString():d),context:this.context};i&&rt.logger[e](c,u)}trackStateConsumer(e){const[n,r]=this.getStateConsumer();this.t.log(this.context,this.delimiter,e,n),this.logToDatadog("info",!1,[e,n,r])}getStateConsumer(){var e;const n=(e=new Error().stack)===null||e===void 0?void 0:e.split(`
`);if(!n)return["There are no stack lines",n];const r=n.findIndex(o=>o.includes("Object.get"));if(r===-1)return["There was no Object.get in the stack call",n];const s=n[r+1];if(!s||!s.includes("assets.oneweb.mercedes-benz.com/plugin/"))return["The caller does not come from one of AEM components",n];const i=s.indexOf("https://");return[s.substring(i).split("plugin/")[1].split("/")[0],n]}}class Be{static getApiGatewayConfig(){const e=sessionStorage.getItem("ow_aem_apiGatewayConfiguration");return e?JSON.parse(e):null}static getAemJwe(){return sessionStorage.getItem("ow_aem_jwe")||""}static getLoginUrl(){const e=sessionStorage.getItem("ow_aem_ciamLoginUrl");if(e===null){const n="CIAM login url could not be found in session store";throw this.logger.error(n),Error(n)}return e}static getLogoutUrl(){const e=sessionStorage.getItem("ow_aem_ciamLogoutUrl");if(e===null){const n="CIAM logout url could not be found in session store";throw this.logger.error(n),Error(n)}return e}static getPostLogoutUrl(){const e=sessionStorage.getItem("ow_aem_postLogoutCallbackUrl");if(e===null){const n="CIAM post logout url could not be found in session store";this.logger.log(n)}return e}static getPostLoginUrl(){const e=sessionStorage.getItem("ow_aem_postLoginCallbackUrl");if(e===null){const n="CIAM post login url could not be found in session store";this.logger.log(n)}return e}static getMissingData(){var e,n;const{missingFields:r=[]}=((n=(e=window.ow)===null||e===void 0?void 0:e.upmc)===null||n===void 0?void 0:n.getMissingDataConfig())||{};return r}}Be.logger=new A("WKO_SERVICE");const st=t=>we(n=>n,n=>!!n.claims&&!n.isPending)(t),oo=t=>we(n=>n.claims,n=>n)(t),En=t=>we(n=>n.jwe,n=>n)(t),xr=t=>we(n=>n.alert,n=>n)(t),wn=t=>we(n=>n.identityProvider,n=>n)(t),df=t=>we(n=>n.profile,n=>n)(t),Ur=t=>we(n=>n.isPending,n=>n)(t),pe=new A("ONEWEB-ADAPTER");class ff{constructor(){this.seamlessStore=v.initializeStore(),this.modules=io(),pe.log("OneWebAdapter created"),this.waitForCiamModule().then(e=>{e&&(this.subscription=this.seamlessStore.subscribe(H,this.onAuthenticationEvent.bind(this)))})}waitForCiamModule(){return new Promise(e=>{this.ciamTimeOut=setTimeout(()=>{e(!1)},2e3),this.ciamIntervalOut=setInterval(()=>{var n,r;((n=window.nn)===null||n===void 0?void 0:n.ciam)&&((r=window.nn)===null||r===void 0?void 0:r.logincheck)&&e(!0)},10)}).then(e=>(pe.log("CIAM module is available:",e),clearTimeout(this.ciamTimeOut),clearInterval(this.ciamIntervalOut),e))}async onAuthenticationEvent(e){if(e.isPending)return;const n=st(e),r=wn(e)===S.CIAS;pe.log("Oneweb adapter listener"),r?(n&&!(s=>we(o=>o.jwe,o=>Boolean(Be.getAemJwe())&&Be.getAemJwe()===o)(s))(e)&&(pe.log("user IS logged in, but AEM is NOT logged in, trigger AEM login"),await this.useLoginChecks(e).then(()=>pe.log("AEM Init completed"))),!n&&Be.getAemJwe()&&(pe.log("user IS NOT logged in, but AEM IS logged in, trigger AEM logout"),(()=>{var s;(s=io().ciam)===null||s===void 0||s.destroy(),document.dispatchEvent(new Event("plugincomponent:sendUpdateMessage.nn"));const i="logout-requested";window.localStorage.setItem(i,"true"),window.localStorage.removeItem(i)})())):pe.log("no seamless state or issuer is not CIAS, go back")}async useLoginChecks(e){const{ciam:n,logincheck:r}=this.modules,s=new Date().getTime()/1e3+3600;return new Promise(i=>{var o,a,c,u,d;if(!this.isJwsUpdated(e.jwe)){const l=((f={})=>{const p={...f};return`XXX-FAKE-JWS-XXX.${btoa(unescape(encodeURIComponent(JSON.stringify(p)))).replace(/\+/g,"-").replace(/\//g,"_")}.XXX-FAKE-JWS-XXX`})({jwe:e.jwe,name:(o=e.claims)===null||o===void 0?void 0:o.name,first_name:(a=e.claims)===null||a===void 0?void 0:a.given_name,last_name:(c=e.claims)===null||c===void 0?void 0:c.family_name,gender:void 0,email:(u=e.claims)===null||u===void 0?void 0:u.email,phone:void 0,roles:void 0,exp:((d=e.claims)===null||d===void 0?void 0:d.exp)||s});pe.log("FAKE JWS CREATED");try{n==null||n.postLogin(l,e.jwe),n==null||n.init(),r==null||r.init()}catch(f){pe.error(f)}}i(e)})}isJwsUpdated(e){const n=(r=>{let s=null;if(r){const i=r.split(".");if(i.length===3){let o=i[1].replace(/-/g,"+").replace(/_/g,"/");switch(o.length%4){case 0:break;case 2:o+="==";break;case 3:o+="=";break;default:console.error("Illegal base64url string")}o=window.atob(o),s=JSON.parse(decodeURIComponent(escape(o)))}}return s})(sessionStorage.getItem("ow_aem_jws"));return(n==null?void 0:n.jwe)===e}}function Br(){return localStorage.getItem(Ar)?JSON.parse(localStorage.getItem(Ar)):null}const kr="2.58.0",jr="AUTH_PERSIST_STATE",ke="AUTH_LOGIN_ACTION",P="AUTH_LOGIN_ACTION_PENDING",he="AUTH_LOGOUT_ACTION",it="AUTH_PROFILE_ACTION",ao="AUTH_UPDATE_IDENTITY_PROVIDER",Sn="AUTH_SET_ALERT_ACTION",co="AUTH_REMOVE_ALERT_ACTION",ot={ERROR_GENERIC:"Unerwarteter Fehler in der Anmeldekomponente aufgetreten.",ERROR_LOGIN_GENERIC:"Anmeldung fehlgeschlagen. Bitte versuchen Sie es sp\xE4ter noch einmal.",ERROR_LOGIN_SESSION_EXISTS:"Sie sind bereits \xFCber einen anderen Authentifizierungsanbieter eingeloggt. Bitte loggen Sie sich zuerst aus und versuchen Sie es dann erneut.",ERROR_LOGIN_VALIDATION_AUTHORIZATION:"Sie haben aktuell keine Berechtigung f\xFCr die Benutzung dieser Funktionalit\xE4t. Bitte wenden Sie sich an den Administrator der Anwendung und bitten Ihn um Freischaltung f\xFCr Ihre Benutzerkennung.",ERROR_LOGIN_PROFILE_GENERIC:"Das Benutzerprofil konnte nicht abgerufen werden.",ERROR_LOGOUT_GENERIC:"Abmeldung fehlgeschlagen. Bitte versuchen Sie es sp\xE4ter noch einmal."},uo="en_GB",lo={de_DE:{...ot},de_AT:{...ot},de_CH:{...ot},de_AQ:{...ot},de_LI:{...ot},de_LU:{...ot},en_GB:{ERROR_GENERIC:"Unexpected error occurred in login component.",ERROR_LOGIN_GENERIC:"Login failed. Please try again later.",ERROR_LOGIN_SESSION_EXISTS:"Already logged in via another authentication provider. Please logout first and then try again.",ERROR_LOGIN_VALIDATION_AUTHORIZATION:"Please refer to the administrator of the application to get access granted for your user ID.",ERROR_LOGIN_PROFILE_GENERIC:"User profile could not be retrieved.",ERROR_LOGOUT_GENERIC:"Logout failed. Please try again later."}};class W extends Error{constructor(e){super(e),this.name="ERROR_GENERIC",this.type=fe.ERROR,this.name=e}getMessage(){const e=W.locale;return lo[e][this.name]||lo[uo].ERROR_GENERIC}toObject(){return{message:this.getMessage(),type:this.type}}static fromError(e){return{message:e.message,type:fe.ERROR}}}W.locale=uo;class ee extends W{constructor(){super("ERROR_LOGIN_GENERIC")}}class pf extends W{constructor(){super("ERROR_LOGIN_VALIDATION_AUTHORIZATION")}}class hf extends W{constructor(){super("ERROR_LOGIN_SESSION_EXISTS"),this.type=fe.HIGHLIGHT}}class gf extends v.SeamlessConnection{constructor(e=to){super(e),this.logger=new A(to),this.seamlessStore=v.initializeStore()}get initialState(){return Object.seal({})}getReducer(){return e=>e}getPublicDispatchers(){return{initAuthentication:()=>({type:"EMPTY"}),login:this.loginAction.bind(this),logout:this.logoutAction.bind(this),setInitParams:()=>({type:"EMPTY"})}}loginAction(){return async()=>{(await this.seamlessStore.getConnectionDispatchers(H)).login({identityProvider:S.BIAS,tenantId:V.OFLOGIN})}}logoutAction(){return async()=>{(await this.seamlessStore.getConnectionDispatchers(H)).logout()}}}class mf extends v.SeamlessConnection{constructor(e=eo){super(e),this.logger=new A(eo),this.seamlessStore=v.initializeStore()}get initialState(){return Object.seal({})}getReducer(){return e=>e}getPublicDispatchers(){return{initAuthentication:()=>({type:"EMPTY"}),login:this.loginAction.bind(this),logout:this.logoutAction.bind(this),setInitParams:()=>({type:"EMPTY"})}}loginAction(e){return async()=>{const n=await this.seamlessStore.getConnectionDispatchers(H),r={identityProvider:S.CIAS,tenantId:location.hostname.includes("localhost")?V.CIAS:V.ONEWEB,...e};n.login(r)}}logoutAction(e){return async()=>{(await this.seamlessStore.getConnectionDispatchers(H)).logout(e)}}}const fo="REPLACE_STATE";class vf extends v.SeamlessConnection{constructor(e=jt){super(e),this.logger=new A(jt)}get initialState(){const e=this.logger,n=new Proxy(cf,{get:(r,s,i)=>(e.trackStateConsumer("Get Legacy connection usage"),Reflect.get(r,s,i)),set:(r,s,i,o)=>(e.trackStateConsumer("Set Legacy connection usage"),Reflect.set(r,s,i,o))});return Object.freeze(n)}getReducer(){return(e,n)=>(n.type===this.getActionType(fo)&&(e=n.payload),e)}getPublicDispatchers(){return{replaceState:this.replaceStateAction.bind(this)}}onStateChange(e){this.logger.log("LEGACY state has been changed",e);const n=Object.assign(Object.create(null),JSON.parse(JSON.stringify(e)));return super.onStateChange(n)}replaceStateAction(e){const n={auth:{jwe:e.jwe,jweIssuer:e.identityProvider,activeLoginType:e.identityProvider===S.CIAS?vn.CUSTOMER:vn.EMPLOYEE,claims:e.claims,isLoggedIn:st(e)},userProfile:e.profile,alert:e.alert};return this.getAction(fo,n)}}class yf extends v.SeamlessConnection{constructor(e){super(H),this.logger=new A(H),this.seamlessStore=v.initializeStore(),this.clients=new Map,this.conditions=e,this.defaultState=e.state||Dt}get initialState(){const e=this.logger,n=new Proxy(this.defaultState,{get:(r,s,i)=>(s==="profile"&&e.trackStateConsumer("Get profile usage"),Reflect.get(r,s,i))});return Object.freeze(n)}set initialState(e){this.defaultState=e}getPublicDispatchers(){return{login:this.loginAction.bind(this),logout:this.logoutAction.bind(this),loginWithRopc:this.loginRopcAction.bind(this),validateOtp:this.validateOtpAction.bind(this),authenticateWithUsername:this.authenticateWithUsernameAction.bind(this),authenticateWithOtp:this.authenticateWithOtpAction.bind(this),checkConsent:this.checkConsentAction.bind(this),giveConsent:this.giveConsentAction.bind(this),getJwe:this.getJweAction.bind(this),register:this.registerAction.bind(this),removeAlert:this.removeAlertAction.bind(this)}}async onStateChange(e){this.logger.log("Authentication state changed and persisted");const n=this.persistStateToLocalStorage(e);if(!Ur(n)){const r=await this.seamlessStore.getConnectionDispatchers(jt);return Promise.resolve(r.replaceState(n))}return Promise.resolve()}getPublicSelectors(){return{isLoggedIn:st,getAlert:xr,getClaims:oo,getUserProfile:df,getJwe:En,getIdentityProvider:wn,isPending:Ur}}addClient(e){this.clients.set(e.identityProvider,e)}onBeforeRegister(e){this.logger.log("Execute condition on Seamless hook onBeforeRegister:",this.conditions.type);const n=this.conditions.state.identityProvider,r=this.clients.get(n);r==null||r.executeCondition({conditions:this.conditions,dispatch:e,getAction:this.getAction.bind(this),getActionType:this.getActionType.bind(this)})}loginRopcAction(e,n){return async()=>{this.clients.get(S.CIAS).loginRopc(e).then(r=>n(r))}}validateOtpAction(e,n){return async(r,s)=>{const i=this.clients.get(S.CIAS),o=this.getAction.bind(this);i.validateOtp(e,{dispatch:r,getAction:o}).then(()=>{const{B2XCORE_AUTHENTICATION:a}=s();n(a)}).catch(a=>{var c;const u={...Dt,alert:{type:fe.ERROR,message:(c=a.message)!==null&&c!==void 0?c:a.toString()}};n(u)})}}authenticateWithUsernameAction(e,n){return async()=>{const r=this.clients.get(S.CIAS),s=await r.authenticateWithUsername(e);n(s)}}authenticateWithOtpAction(e,n){return async()=>{const r=this.clients.get(S.CIAS),s=await r.authenticateWithOtp(e);n(s)}}checkConsentAction(e){return async()=>{const n=this.clients.get(S.CIAS),r=await n.checkConsent();e(r)}}giveConsentAction(e){return async()=>{const n=this.clients.get(S.CIAS),r=await n.giveConsent();e(r)}}getJweAction(e){return async(n,r)=>{const s=this.clients.get(S.CIAS),i=this.getAction.bind(this);s.getJwe({dispatch:n,getAction:i}).then(()=>{const{B2XCORE_AUTHENTICATION:o}=r();e(o)}).catch(o=>{var a;const c={...Dt,alert:{type:fe.ERROR,message:(a=o.message)!==null&&a!==void 0?a:o.toString()}};e(c)})}}loginAction(e){return async(n,r)=>{try{const{B2XCORE_AUTHENTICATION:s}=r(),{identityProvider:i=S.CIAS}=e;if(st(s))throw this.logger.log("There is active session already, cannot start a new one"),new hf;n(this.getAction(ao,i));const o=this.clients.get(i);o.settings.setAll(e),n(()=>o.login())}catch(s){const i=s instanceof W?s.toObject():W.fromError(s);n(this.getAction(Sn,i))}}}logoutAction(e){return async(n,r)=>{const{B2XCORE_AUTHENTICATION:s}=r(),i=this.clients.get(s.identityProvider),o=i.settings.getItem("logoutOptions");i.settings.setItem("logoutOptions",{...o,...e}),n(this.getAction(he,{identityProvider:s.identityProvider})),n(()=>i.logout())}}registerAction(e=""){let n="";return e.length>0&&(n=Yd(e)?e:`${window.location.origin}${e}`),async(r,s)=>{const{B2XCORE_AUTHENTICATION:i}=s(),o=this.clients.get(i.identityProvider).settings.locale,a=n||sessionStorage.getItem("ow_aem_ciamRegistration")||`${window.location.origin}/bin/daimler/public/ciam/registration.html?lang=${o}`;r(()=>{window.location.href=a})}}removeAlertAction(){return async e=>{e(this.getAction(co))}}getReducer(){return(e,n)=>{switch(this.logger.debug(`Reducer triggered on action: '${n.type}' with payload:`,n.payload),n.type){case this.getActionType(jr):return{...e,...n.payload};case this.getActionType(ao):return{...e,identityProvider:n.payload};case this.getActionType(P):return{...e,isPending:n.payload};case this.getActionType(ke):return{...e,...n.payload};case this.getActionType(it):return{...e,profile:n.payload};case this.getActionType(he):return{...Dt,...n.payload};case this.getActionType(Sn):return{...e,alert:n.payload};case this.getActionType(co):return{...e,alert:null};default:return e}}}async resolveUsingLegacyConnection(e){const n=new Date(2023,5,14),r=new Date(2023,5,21),s=new Date(2023,5,28),i=new Date;let o=!0;switch(e){case j.TEST:case j.INT:i>n&&(o=!1);break;case j.PPROD:i>r&&(o=!1);break;case j.PROD:i>s&&(o=!1)}if(o)try{await this.seamlessStore.addConnection(new vf),await this.seamlessStore.addConnection(new mf),await this.seamlessStore.addConnection(new gf)}catch(a){this.logger.debug("Error adding/getting legacy connection/dispatchers",a)}return this.logger.debug("Should init legacy connections",o,e),o}persistStateToLocalStorage(e){const n=Object.assign(Object.create(null),JSON.parse(JSON.stringify(e)));return localStorage.setItem(Ar,JSON.stringify(n)),n}}const Ft="x-csrf-token",M=new class{constructor(){this.http=of.create({prefixUrl:""}),this.logger=new A("HTTP_CLIENT"),this.csrfTokenValue=""}async fetchJwe(t,e,n){return n.toLowerCase()==="cias"?this.fetchCiasJwe(t,e):this.fetchBiasJwe(t,e)}async fetchCsrfToken(t){return this.http.get("ropc/token",{headers:{"Referrer-Policy":"strict-origin-when-cross-origin"},prefixUrl:t,credentials:"include"}).then(async e=>{const{token:n=""}=await e.json().catch(()=>({}));this.csrfTokenValue=n}).catch(()=>{this.csrfTokenValue=""})}async fetchRopc(t,e,n){return this.authenticateWithUsername(t,e,n).then(async r=>r.hasError?r:await this.fetchPossibleLegalTexts(t)).catch(async r=>{const s=await r.response.json().catch(()=>({}));return{status:r.response.status,data:s,hasError:!r.response.ok}})}async fetchJweViaOtp(t,e){return await this.authenticateWithOtp(t,e).then(async n=>{if(n.hasError)throw new ee}).then(async()=>{await this.giveConsent(t)}).then(()=>this.getJwe(t))}async authenticateWithUsername(t,e,n){return await this.fetchCsrfToken(t),this.http.post("ropc/username",{headers:{"Referrer-Policy":"strict-origin-when-cross-origin",[Ft]:this.csrfTokenValue},json:{username:e,touchpoint:n},prefixUrl:t,credentials:"include"}).then(r=>({status:r.status,data:null,hasError:!r.ok})).catch(async r=>{const s=await r.response.json().catch(()=>({}));return{status:r.response.status,data:s,hasError:!r.response.ok}})}async authenticateWithOtp(t,e){return this.http.post("ropc/otp",{headers:{"Referrer-Policy":"strict-origin-when-cross-origin",[Ft]:this.csrfTokenValue},json:{otp:e},prefixUrl:t,credentials:"include"}).then(n=>({status:n.status,data:null,hasError:!n.ok})).catch(async n=>{const r=await n.response.json().catch(()=>({}));return{status:n.response.status,data:r,hasError:!n.response.ok}})}async fetchPossibleLegalTexts(t){return this.http.get("ropc/consent",{headers:{"Referrer-Policy":"strict-origin-when-cross-origin",[Ft]:this.csrfTokenValue},prefixUrl:t,credentials:"include"}).then(async e=>{const n=await e.json().catch(()=>({}));return{status:e.status,data:n,hasError:!e.ok}})}async giveConsent(t){return this.http.post("ropc/consent",{headers:{"Referrer-Policy":"strict-origin-when-cross-origin",[Ft]:this.csrfTokenValue},prefixUrl:t,credentials:"include"}).then(e=>({status:e.status,data:null,hasError:!e.ok}))}async getJwe(t){return this.http.get("ropc/jwe",{headers:{"Referrer-Policy":"strict-origin-when-cross-origin",[Ft]:this.csrfTokenValue},prefixUrl:t,credentials:"include"}).then(async e=>(await e.json().catch(()=>({}))).accessToken)}async fetchProfile(t,e,n){return this.logger.debug("fetch user profile"),this.http.get("profile",{headers:{Authorization:`Bearer ${t}`},searchParams:{country_code:n},prefixUrl:e}).json().then(r=>(this.logger.debug("Got user profile",r),r))}async fetchClaims(t,e,n){const r=this.getXClientIdFor(n);return this.logger.debug(`fetching claims for ${n}, ${r}`),this.http.get("jwt/claims",{headers:{Accept:"application/json","x-client-id":r,Authorization:`Bearer ${t}`},searchParams:{jwtIssuer:n},prefixUrl:e}).json().then(s=>(this.logger.log("got claims",s),s)).catch(s=>{throw this.logger.error("failed to fetch claims"),s})}async validateJwe(t,e,n){const r=this.getXClientIdFor(n);return this.logger.debug(`validating JWE for ${n}, ${r} (${(t||"").substr(0,5)}...)`),this.http.get("jwt/validate",{headers:{"x-client-id":r,Authorization:`Bearer ${t}`},searchParams:{jwtIssuer:n},mode:"cors",prefixUrl:e}).json().then(s=>(this.logger.log("jwe is valid",s),s)).catch(s=>{throw this.logger.log("Failed to validate jwe",s),s})}async refreshJwe(t,e,n){this.logger.debug("Refresh jwe");const r={accept:"application/json",tenantId:n,Authorization:`Bearer ${e}`};return this.http.post("jwe/refresh",{headers:r,prefixUrl:t}).json().then(s=>s.jwe)}async fetchCiasJwe(t,e){this.logger.debug("Fetching jwe from: ",e);try{if(!t)throw new Error("No OTT provided");return await this.http.get(`jwe/${t}`,{prefixUrl:e}).text()}catch(n){throw this.logger.error("Unable to exchange OTT for JWE"),n}}async fetchBiasJwe(t,e){this.logger.debug("Fetching jwe from: ",e);const n={ott:t,accept:"application/json"};return this.http.post("token",{headers:n,credentials:"include",prefixUrl:e}).json().then(r=>r.token).catch(r=>{throw this.logger.error("An error happened trying to fetch JWE",r),r})}getXClientIdFor(t){return t===S.CIAS?Se.appName:Mt.tenantId}};class bf{constructor(e){this.logger=new A("BIAS_CLIENT"),this.identityProvider=S.BIAS,this.settings=e}login(){const{redirectUrl:e=location.href}=this.settings.getItem("loginOptions"),n={tenant:this.settings.getItem("tenantId")||Mt.tenantId,redirectUrl:e},r=this.settings.getItem("stage"),s=`${Mt.envs[r]}/authentication/${Lr(n)}`;this.logger.debug("Login action on BIAS to url:",s),window.location.href=s}logout(){const e=this.settings.getItem("stage"),n=`${Mt.envs[e]}/logout`;this.logger.debug("Logout action BIAS redirecting to url:",n),window.location.href=n}loginRopc(e){throw new Error("Method not allowed.")}validateOtp(e,n){throw new Error("Method not allowed.")}authenticateWithUsername(e){throw new Error("Method not allowed")}authenticateWithOtp(e){throw new Error("Method not allowed")}checkConsent(){throw new Error("Method not allowed")}giveConsent(){throw new Error("Method not allowed")}getJwe(e){throw new Error("Method not allowed")}async executeCondition(e){const{conditions:n,dispatch:r,getAction:s}=e,{type:i,token:o,state:a,error:c,isPrivatePage:u}=n;try{switch(i){case D.AUTHENTICATING:{this.logger.debug("BIAS OTT is available",o),bn([Q.OTT]),r(s(P,!0));const d=await this.fetchJwe(o).catch(()=>{throw new ee}),l=await this.fetchClaims(d).catch(()=>{throw new ee});r(s(ke,{jwe:d,claims:l})),r(s(P,!1));break}case D.AUTHENTICATED:{this.logger.debug("Auth present in storage, validate it"),r(s(P,!0));const d=En(a);await this.validateJwe(d).then(()=>{r(s(P,!1))}).catch(()=>{r(s(he,{identityProvider:S.BIAS})),u&&this.login()});break}case D.ERROR:{bn(Object.keys(c));let d=new ee;throw c.error_description==="error.validation.authorization"&&(d=new pf),d}default:this.logger.debug("BIAS Anonymous case"),Br()||r(s(jr,n.state)),u&&this.login()}}catch(d){r(s(he,{identityProvider:S.BIAS}));const l=d instanceof W?d.toObject():W.fromError(d);r(s(Sn,l)),u&&(location.href=location.origin)}}fetchJwe(e){const n=this.settings.getItem("stage"),r=Mt.envs[n];return M.fetchJwe(e,r,S.BIAS)}fetchClaims(e){const n=this.settings.getItem("stage"),r=yn.envs[n];return M.fetchClaims(e,r,S.BIAS)}validateJwe(e){const n=this.settings.getItem("stage"),r=yn.envs[n];return M.validateJwe(e,r,S.BIAS)}}class Ef{constructor(e){this.logger=new A("CIAS_CLIENT"),this.identityProvider=S.CIAS,this.settings=e}login(){const{redirectUrl:e=location.href}=this.settings.getItem("loginOptions"),n={prompt:this.settings.prompt,locale:this.settings.locale,tenantId:this.settings.getItem("tenantId")||Se.tenantId,redirectUrl:e},r=this.settings.getItem("stage"),s=`${Se.envs[r]}/authentication${Lr(n)}`;this.logger.log("Login action on cias to url:",s),window.location.href=s}logout(){const{targetUrl:e=location.href}=this.settings.getItem("logoutOptions"),n={locale:this.settings.locale,tenantId:this.settings.getItem("tenantId")||Se.tenantId,targetUrl:e},r=this.settings.getItem("stage"),s=`${Se.envs[r]}/logout${Lr(n)}`;this.logger.log("CIAS logout redirecting to ",s),window.location.href=s}async loginRopc(e){const n=this.settings.getItem("country","AT");return M.fetchRopc(this.determineBaseUrlForRopc(),e,n)}async validateOtp(e,n){const{getAction:r,dispatch:s}=n,i=await M.fetchJweViaOtp(this.determineBaseUrlForRopc(),e).catch(()=>{throw new ee}),o=await this.fetchClaims(i).catch(()=>{throw new ee}),a=await this.fetchProfile(i).catch(()=>null);s(r(P,!0)),s(r(it,a)),s(r(ke,{jwe:i,claims:o})),s(r(P,!1)),this.startTokenRefreshTimer()}async authenticateWithUsername(e){const n=this.settings.getItem("country","AT"),r=this.determineBaseUrlForRopc();return M.authenticateWithUsername(r,e,n)}async authenticateWithOtp(e){const n=this.determineBaseUrlForRopc();return M.authenticateWithOtp(n,e)}async checkConsent(){const e=this.determineBaseUrlForRopc();return M.fetchPossibleLegalTexts(e)}async giveConsent(){const e=this.determineBaseUrlForRopc();return M.giveConsent(e)}async getJwe(e){const{getAction:n,dispatch:r}=e,s=this.determineBaseUrlForRopc(),i=await M.getJwe(s).catch(()=>{throw new ee}),o=await this.fetchClaims(i).catch(()=>{throw new ee}),a=await this.fetchProfile(i).catch(()=>null);r(n(P,!0)),r(n(it,a)),r(n(ke,{jwe:i,claims:o})),r(n(P,!1)),this.startTokenRefreshTimer()}async executeCondition(e){const{conditions:n,dispatch:r,getAction:s}=e,{type:i,token:o,owcAemJwe:a,state:c,error:u,isPrivatePage:d}=n,l=Be.getMissingData();this.dispatch=r,this.getAction=s,this.isPrivatePage=d,this.logger.debug("Missing data status:",l);try{switch(i){case D.AUTHENTICATING:{this.logger.debug("CIAS OTT is available",o),bn([Q.TOKEN]),r(s(P,!0));const f=await this.fetchJwe(o).catch(()=>{throw new ee}),p=await this.fetchClaims(f).catch(()=>{throw new ee});if(!l.length){const h=await this.fetchProfile(f);h&&r(s(it,h))}r(s(ke,{jwe:f,claims:p})),r(s(P,!1)),this.startTokenRefreshTimer();break}case D.LEGACY:this.logger.debug("OWC_AEM_JWE is available",a),r(s(P,!0)),await this.validateJwe(a).then(async()=>{const f=await this.fetchClaims(a).catch(()=>{throw new ee});if(r(s(ke,{jwe:a,claims:f})),!l.length){const p=await this.fetchProfile(a);p&&r(s(it,p))}r(s(P,!1)),this.startTokenRefreshTimer()}).catch(async()=>{this.logger.log("jwe is not valid, try to refresh"),await this.getNewJweAndPersist(a),this.startTokenRefreshTimer()}).catch(()=>{this.dispatch(this.getAction(he,{identityProvider:S.CIAS})),this.logger.log({messages:["Could not refresh token, setting user as logged out"],force:!0}),this.isPrivatePage&&this.login()});break;case D.AUTHENTICATED:{this.logger.debug("Auth present in storage, validate it"),r(s(P,!0));const f=En(c);await this.validateJwe(f).then(async()=>{if(!l.length&&!c.profile){const p=await this.fetchProfile(f);p&&r(s(it,p))}r(s(P,!1)),this.startTokenRefreshTimer()}).catch(async()=>{this.logger.log("jwe is not valid, try to refresh"),await this.getNewJweAndPersist(f),this.startTokenRefreshTimer()}).catch(()=>{this.dispatch(this.getAction(he,{identityProvider:S.CIAS})),this.logger.log({messages:["Could not refresh token, setting user as logged out"],force:!0}),this.isPrivatePage&&this.login()});break}case D.ERROR:{const f=["interaction_required","login_required","account_selection_required","consent_required"];if(bn(Object.keys(u)),!f.includes(u.error))throw new ee;Promise.resolve().then(()=>{r(s(he,{identityProvider:S.CIAS}))});break}default:this.logger.debug("CIAS Anonymous case"),Br()||r(s(jr,n.state)),d&&this.login()}}catch(f){r(s(he,{identityProvider:S.CIAS}));const p=f instanceof W?f.toObject():W.fromError(f);r(s(Sn,p)),d&&(location.href=location.origin)}}startTokenRefreshTimer(){this.logger.debug("startTokenRefreshTimer");const e=setInterval(()=>{v.initializeStore().once(H,n=>{const r=n.jwe,s=n.claims;if(!s||!r)return;const i=1e3*s.exp,o=new Date().getTime(),a=Math.trunc((i-o)/1e3/60);this.logger.debug("Checking when token will expire in minutes",a),a<=5&&this.getNewJweAndPersist(r).then(()=>{clearInterval(e),this.startTokenRefreshTimer()}).catch(()=>{this.dispatch(this.getAction(he,{identityProvider:S.CIAS})),clearInterval(e),this.logger.log("Could not proactively refresh token, setting user as logged out")})})},6e4)}async getNewJweAndPersist(e){this.dispatch(this.getAction(P,!0)),this.logger.log("getNewJweAndPersist");const n=await this.refreshJwe(e),r=await this.fetchClaims(n);this.dispatch(this.getAction(ke,{jwe:n,claims:r})),this.logger.log({messages:["Successfully refreshed the token"],force:!0}),this.dispatch(this.getAction(P,!1))}refreshJwe(e){const n=this.settings.getItem("stage"),r=Se.envs[n];return M.refreshJwe(r,e,this.settings.getItem("tenantId"))}fetchJwe(e){const n=this.settings.getItem("stage"),r=Se.envs[n];return M.fetchJwe(e,r,S.CIAS)}fetchClaims(e){const n=this.settings.getItem("stage"),r=yn.envs[n];return M.fetchClaims(e,r,S.CIAS)}fetchProfile(e){const n=this.settings.getItem("stage"),r=this.settings.getItem("country"),s=uf.envs[n];return M.fetchProfile(e,s,r).catch(()=>(this.logger.warn("failed to fetch profile"),null))}validateJwe(e){const n=this.settings.getItem("stage"),r=yn.envs[n];return M.validateJwe(e,r,S.CIAS)}determineBaseUrlForRopc(){const e=this.settings.getItem("stage");return e===j.PROD?`${window.location.origin}/cias/v1`:Se.envs[e]}}class Ht{static getFullFlagName(e){return`b2x.ff.${e}`}static getFlag(e){return{enabled:!!localStorage.getItem(Ht.getFullFlagName(e))}}static get palLoadingDisabled(){return Ht.getFlag("pal_loading_disabled")}static removeOutdatedFlags(){["oneweb_adapter","pal_adapter","pal_loading_enabled","disable_ucmc_for_pal"].forEach(e=>{localStorage.removeItem(Ht.getFullFlagName(e))})}}const po=location.hostname.includes("localhost"),wf={identityProvider:S.CIAS,country:"DE",language:"de",stage:po?j.INT:j.PROD,tenantId:po?V.CIAS:V.ONEWEB,loginOptions:{redirectUrl:void 0},logoutOptions:{targetUrl:void 0}};class ho{constructor(e){this.options=new Map(Object.entries(wf)),this.logger=new A("SETTINGS"),this.prompt="DEFAULT",e&&this.setAll(e),W.locale=this.locale,this.log()}get locale(){return`${this.getItem("language","de")}_${this.getItem("country","DE")}`}get isOneWeb(){return this.getItem("tenantId",null)===V.ONEWEB}getItem(e,n=null){return this.options.get(e)||n}setItem(e,n){this.options.set(e,n)}hasItem(e){return this.options.has(e)}getItems(){const e=Object.create(null);return this.options.forEach((n,r)=>{Object.defineProperty(e,r,{value:n,enumerable:!0})}),e}setAll(e){Object.entries(e).forEach(([n,r])=>this.setItem(n,r))}log(){this.logger.debug("Authentication params:",{Authority:this.getItem("identityProvider"),Locale:this.locale,Tenant:this.getItem("tenantId"),Stage:this.getItem("stage"),OneWeb:this.isOneWeb})}}(function(){const{environmentVariables:t={},pageEnvironmentVariables:e={}}=window.aemNamespace||{},{stage:n}=t,{stage:r}=e,s=n||r||"PROD";rt.init({clientToken:"pubfa2a3fb0b4f1f215278a027f07e93f65",site:"datadoghq.eu",forwardErrorsToLogs:!1,sessionSampleRate:100,service:"b2xal",env:s.toLowerCase(),version:kr,beforeSend:i=>{i.message=i.message.replace("console error: ",""),i.message=i.message.replace(/%c(\[.*\]) color: [a-zA-Z-]+\s/,"$1 ")}}),rt.addLoggerGlobalContext("tenant","iam"),rt.logger.setHandler(["http"])})();const ge=new A("AUTH_BOOTSTRAP"),Sf=async t=>{ge.debug("Initialize condition check with router state as:",window==null?void 0:window.seamlessRouter);let e=D.ANONYMOUS;const n=await(async()=>{const d=v.initializeStore();return d.getConnectionDispatchers(oe,1).then(()=>{d.once(oe,l=>{if(l.runMode==="AUTHOR")throw new Error("Running in AUTHOR mode, do not detect private pages")})}).then(()=>new Promise(l=>{d.once($e,f=>{const p=Object.values(f.components).some(h=>{var m;return(m=h.config)===null||m===void 0?void 0:m.userSessionRequired});ge.debug("Is this a private page",p),l(p)})})).catch(()=>!1)})(),r=Ce(Q.TOKEN)||Ce(Q.OTT),s=Be.getAemJwe(),i={error:Ce(Q.ERROR),errorId:Ce(Q.ERROR_ID),state:Ce(Q.STATE),error_code:Ce(Q.ERROR_CODE),error_description:Ce(Q.ERROR_DESCRIPTION),exception_id:Ce(Q.EXCEPTION_ID)},o=Object.values(i).some(d=>d),a=Br();o?e=D.ERROR:r?e=D.AUTHENTICATING:a&&st(a)?e=D.AUTHENTICATED:s&&(e=D.LEGACY);const c={...Dt,identityProvider:t.getItem("identityProvider")},u={token:r,owcAemJwe:s,error:i,isPrivatePage:n,state:a||c,hasError:o,type:e};return ge.debug(`Auth conditions type: ${e} as:`,u),u},Cf=async t=>{ge.debug(`==============================   PAGE LOADED  ${location.pathname}  =================================`),ge.debug("Build time and version",kr,"16.6.2023, 09:31:17");const e=v.initializeStore(),n=new ho(t),r=await Sf(n),s=new yf(r);ge.debug("initialState",s.initialState),s.addClient(new Ef(n)),s.addClient(new bf(n)),await s.resolveUsingLegacyConnection(n.getItem("stage")),await e.addConnection(s);const i=s.getPublicSelectors(),o=await e.getConnectionDispatchers(H);return Object.seal({dispatchers:o,settings:n,selectors:i})};async function Tf(){ge.log("Initialization on AEM environment");const t=v.initializeStore();if(await so())try{const{country:e,language:n,stage:r}=await new Promise(i=>{t.once(oe,o=>{ge.log("AEM integration",o),i(o)})}),s=new ho({tenantId:V.ONEWEB,country:e,language:n,stage:r.toLowerCase(),logoutOptions:{targetUrl:Be.getPostLogoutUrl()||location.origin}});Ht.removeOutdatedFlags(),s.isOneWeb&&new ff,await Cf(s.getItems())}catch(e){ge.error("AEM connection rejected",e)}}const Of=new A("TRACKING"),Dr=async t=>{try{const e=await so(),{action:n="header.user_area",event:r="click",category:s="link",label:i="default",type:o="AL"}=t,a={event:r,eventDetail:{category:s,action:n,label:i,url:{login:"/authentication",logout:"/logout",register:"/registration"}[i]||""},application:{id:"B2X",version:`${o}-${kr}`,parentApplicationId:e?"aem":"emh"}};return e?af().then(c=>{c.pushTrackingEvent(a)}):new Promise(c=>{var u;(u=window.dataLayer_ow)===null||u===void 0||u.push(a),c()})}catch(e){Of.error("Tracking failed",e)}};/*! active-profile 1.29.0 */const _f=t=>{const e=typeof t;return t!==null&&(e==="object"||e==="function")},Mr=new Set(["__proto__","prototype","constructor"]),Rf=new Set("0123456789");function Af(t){const e=[];let n="",r="start",s=!1;for(const i of t)switch(i){case"\\":if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd")throw new Error("Invalid character after an index");s&&(n+=i),r="property",s=!s;break;case".":if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd"){r="property";break}if(s){s=!1,n+=i;break}if(Mr.has(n))return[];e.push(n),n="",r="property";break;case"[":if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd"){r="index";break}if(s){s=!1,n+=i;break}if(r==="property"){if(Mr.has(n))return[];e.push(n),n=""}r="index";break;case"]":if(r==="index"){e.push(Number.parseInt(n,10)),n="",r="indexEnd";break}if(r==="indexEnd")throw new Error("Invalid character after an index");default:if(r==="index"&&!Rf.has(i))throw new Error("Invalid character in an index");if(r==="indexEnd")throw new Error("Invalid character after an index");r==="start"&&(r="property"),s&&(s=!1,n+="\\"),n+=i}switch(s&&(n+="\\"),r){case"property":{if(Mr.has(n))return[];e.push(n);break}case"index":throw new Error("Index was not closed");case"start":{e.push("");break}}return e}function If(t,e){if(typeof e!="number"&&Array.isArray(t)){const n=Number.parseInt(e,10);return Number.isInteger(n)&&t[n]===t[e]}return!1}function Pf(t,e,n){if(!_f(t)||typeof e!="string")return n===void 0?t:n;const r=Af(e);if(r.length===0)return n;for(let s=0;s<r.length;s++){const i=r[s];if(If(t,i)?t=s===r.length-1?void 0:null:t=t[i],t==null){if(s!==r.length-1)return n;break}}return t===void 0?n:t}const Fr={B2C:"B2C",B2B:"B2B"},te="B2X_ACTIVE_PROFILE",w={SET_MARKET:"SET_MARKET",SET_LOCALE:"SET_LOCALE",SET_COMPANY:"SET_COMPANY",UPDATE_COMPANY:"UPDATE_COMPANY",SET_USER:"SET_USER",SET_FLEETS:"SET_FLEETS",SET_VEHICLES:"SET_VEHICLES",SET_VEHICLE_COUNT:"SET_VEHICLE_COUNT",SET_ROLES:"SET_ROLES",SET_ACTION_PERMISSIONS:"SET_ACTION_PERMISSIONS",SET_SERVICE_PERMISSIONS:"SET_SERVICE_PERMISSIONS",SET_ENTITY_PERMISSIONS:"SET_ENTITY_PERMISSIONS",SET_USER_JOURNEY_CACHE:"SET_USER_JOURNEY_CACHE",REGENERATE_USER_JOURNEY_CACHE:"REGENERATE_USER_JOURNEY_CACHE",SET_ACTIVE_COSTUMER_GROUP:"SET_ACTIVE_COSTUMER_GROUP",SET_STATE:"SET_STATE",RESET_STATE:"RESET_STATE",ENSURE_PROPERTIES:"ENSURE_PROPERTIES"},je=()=>({market:{},locale:{},fleets:[],vehicles:[],roles:[],userJourneyCache:{},permissions:{actionPermissions:[],servicePermissions:[],entityPermissions:[]},ensureProperties:[],meta:{version:"1.29.0",status:"INITIALIZING"}});function $f(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var go={exports:{}},Hr={exports:{}},mo=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}},Nf=mo,Gr=Object.prototype.toString,zr=function(t){return function(e){var n=Gr.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null));function De(t){return t=t.toLowerCase(),function(e){return zr(e)===t}}function qr(t){return Array.isArray(t)}function Cn(t){return typeof t>"u"}function Lf(t){return t!==null&&!Cn(t)&&t.constructor!==null&&!Cn(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var vo=De("ArrayBuffer");function xf(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&vo(t.buffer),e}function Uf(t){return typeof t=="string"}function Bf(t){return typeof t=="number"}function yo(t){return t!==null&&typeof t=="object"}function Tn(t){if(zr(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}var kf=De("Date"),jf=De("File"),Df=De("Blob"),Mf=De("FileList");function Jr(t){return Gr.call(t)==="[object Function]"}function Ff(t){return yo(t)&&Jr(t.pipe)}function Hf(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||Gr.call(t)===e||Jr(t.toString)&&t.toString()===e)}var Gf=De("URLSearchParams");function zf(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function qf(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Vr(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),qr(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.call(null,t[s],s,t)}function Wr(){var t={};function e(s,i){Tn(t[i])&&Tn(s)?t[i]=Wr(t[i],s):Tn(s)?t[i]=Wr({},s):qr(s)?t[i]=s.slice():t[i]=s}for(var n=0,r=arguments.length;n<r;n++)Vr(arguments[n],e);return t}function Jf(t,e,n){return Vr(e,function(r,s){n&&typeof r=="function"?t[s]=Nf(r,n):t[s]=r}),t}function Vf(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function Wf(t,e,n,r){t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,n&&Object.assign(t.prototype,n)}function Yf(t,e,n){var r,s,i,o={};e=e||{};do{for(r=Object.getOwnPropertyNames(t),s=r.length;s-- >0;)i=r[s],o[i]||(e[i]=t[i],o[i]=!0);t=Object.getPrototypeOf(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e}function Xf(t,e,n){t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;var r=t.indexOf(e,n);return r!==-1&&r===n}function Kf(t){if(!t)return null;var e=t.length;if(Cn(e))return null;for(var n=new Array(e);e-- >0;)n[e]=t[e];return n}var Zf=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),$={isArray:qr,isArrayBuffer:vo,isBuffer:Lf,isFormData:Hf,isArrayBufferView:xf,isString:Uf,isNumber:Bf,isObject:yo,isPlainObject:Tn,isUndefined:Cn,isDate:kf,isFile:jf,isBlob:Df,isFunction:Jr,isStream:Ff,isURLSearchParams:Gf,isStandardBrowserEnv:qf,forEach:Vr,merge:Wr,extend:Jf,trim:zf,stripBOM:Vf,inherits:Wf,toFlatObject:Yf,kindOf:zr,kindOfTest:De,endsWith:Xf,toArray:Kf,isTypedArray:Zf,isFileList:Mf},at=$;function bo(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Eo=function(t,e,n){if(!e)return t;var r;if(n)r=n(e);else if(at.isURLSearchParams(e))r=e.toString();else{var s=[];at.forEach(e,function(o,a){o===null||typeof o>"u"||(at.isArray(o)?a=a+"[]":o=[o],at.forEach(o,function(c){at.isDate(c)?c=c.toISOString():at.isObject(c)&&(c=JSON.stringify(c)),s.push(bo(a)+"="+bo(c))}))}),r=s.join("&")}if(r){var i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+r}return t},Qf=$;function On(){this.handlers=[]}On.prototype.use=function(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1},On.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},On.prototype.forEach=function(t){Qf.forEach(this.handlers,function(e){e!==null&&t(e)})};var ep=On,tp=$,np=function(t,e){tp.forEach(t,function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])})},wo=$;function ct(t,e,n,r,s){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}wo.inherits(ct,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var So=ct.prototype,Co={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){Co[t]={value:t}}),Object.defineProperties(ct,Co),Object.defineProperty(So,"isAxiosError",{value:!0}),ct.from=function(t,e,n,r,s,i){var o=Object.create(So);return wo.toFlatObject(t,o,function(a){return a!==Error.prototype}),ct.call(o,t.message,e,n,r,s),o.name=t.name,i&&Object.assign(o,i),o};var ut=ct,To={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},re=$;function rp(t,e){e=e||new FormData;var n=[];function r(i){return i===null?"":re.isDate(i)?i.toISOString():re.isArrayBuffer(i)||re.isTypedArray(i)?typeof Blob=="function"?new Blob([i]):Buffer.from(i):i}function s(i,o){if(re.isPlainObject(i)||re.isArray(i)){if(n.indexOf(i)!==-1)throw Error("Circular reference detected in "+o);n.push(i),re.forEach(i,function(a,c){if(!re.isUndefined(a)){var u=o?o+"."+c:c,d;if(a&&!o&&typeof a=="object"){if(re.endsWith(c,"{}"))a=JSON.stringify(a);else if(re.endsWith(c,"[]")&&(d=re.toArray(a))){d.forEach(function(l){!re.isUndefined(l)&&e.append(u,r(l))});return}}s(a,u)}}),n.pop()}else e.append(o,r(i))}return s(t),e}var Oo=rp,Yr,_o;function sp(){if(_o)return Yr;_o=1;var t=ut;return Yr=function(e,n,r){var s=r.config.validateStatus;!r.status||!s||s(r.status)?e(r):n(new t("Request failed with status code "+r.status,[t.ERR_BAD_REQUEST,t.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))},Yr}var Xr,Ro;function ip(){if(Ro)return Xr;Ro=1;var t=$;return Xr=t.isStandardBrowserEnv()?function(){return{write:function(e,n,r,s,i,o){var a=[];a.push(e+"="+encodeURIComponent(n)),t.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),t.isString(s)&&a.push("path="+s),t.isString(i)&&a.push("domain="+i),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Xr}var op=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)},ap=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t},cp=op,up=ap,Ao=function(t,e){return t&&!cp(e)?up(t,e):e},Kr,Io;function lp(){if(Io)return Kr;Io=1;var t=$,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Kr=function(n){var r={},s,i,o;return n&&t.forEach(n.split(`
`),function(a){if(o=a.indexOf(":"),s=t.trim(a.substr(0,o)).toLowerCase(),i=t.trim(a.substr(o+1)),s){if(r[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?r[s]=(r[s]?r[s]:[]).concat([i]):r[s]=r[s]?r[s]+", "+i:i}}),r},Kr}var Zr,Po;function dp(){if(Po)return Zr;Po=1;var t=$;return Zr=t.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),r;function s(i){var o=i;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(i){var o=t.isString(i)?s(i):i;return o.protocol===r.protocol&&o.host===r.host}}():function(){return function(){return!0}}(),Zr}var Qr,$o;function _n(){if($o)return Qr;$o=1;var t=ut,e=$;function n(r){t.call(this,r==null?"canceled":r,t.ERR_CANCELED),this.name="CanceledError"}return e.inherits(n,t,{__CANCEL__:!0}),Qr=n,Qr}var No,Lo;function fp(){return Lo||(Lo=1,No=function(t){var e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}),No}var es,xo;function pp(){if(xo)return es;xo=1;var t=$,e=sp(),n=ip(),r=Eo,s=Ao,i=lp(),o=dp(),a=To,c=ut,u=_n(),d=fp();return es=function(l){return new Promise(function(f,p){var h=l.data,m=l.headers,b=l.responseType,T;function y(){l.cancelToken&&l.cancelToken.unsubscribe(T),l.signal&&l.signal.removeEventListener("abort",T)}t.isFormData(h)&&t.isStandardBrowserEnv()&&delete m["Content-Type"];var g=new XMLHttpRequest;if(l.auth){var U=l.auth.username||"",B=l.auth.password?unescape(encodeURIComponent(l.auth.password)):"";m.Authorization="Basic "+btoa(U+":"+B)}var ue=s(l.baseURL,l.url);g.open(l.method.toUpperCase(),r(ue,l.params,l.paramsSerializer),!0),g.timeout=l.timeout;function Ct(){if(g){var ie="getAllResponseHeaders"in g?i(g.getAllResponseHeaders()):null,ze=!b||b==="text"||b==="json"?g.responseText:g.response,Vm={data:ze,status:g.status,statusText:g.statusText,headers:ie,config:l,request:g};e(function(ks){f(ks),y()},function(ks){p(ks),y()},Vm),g=null}}if("onloadend"in g?g.onloadend=Ct:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(Ct)},g.onabort=function(){!g||(p(new c("Request aborted",c.ECONNABORTED,l,g)),g=null)},g.onerror=function(){p(new c("Network Error",c.ERR_NETWORK,l,g,g)),g=null},g.ontimeout=function(){var ie=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded",ze=l.transitional||a;l.timeoutErrorMessage&&(ie=l.timeoutErrorMessage),p(new c(ie,ze.clarifyTimeoutError?c.ETIMEDOUT:c.ECONNABORTED,l,g)),g=null},t.isStandardBrowserEnv()){var sc=(l.withCredentials||o(ue))&&l.xsrfCookieName?n.read(l.xsrfCookieName):void 0;sc&&(m[l.xsrfHeaderName]=sc)}"setRequestHeader"in g&&t.forEach(m,function(ie,ze){typeof h>"u"&&ze.toLowerCase()==="content-type"?delete m[ze]:g.setRequestHeader(ze,ie)}),t.isUndefined(l.withCredentials)||(g.withCredentials=!!l.withCredentials),b&&b!=="json"&&(g.responseType=l.responseType),typeof l.onDownloadProgress=="function"&&g.addEventListener("progress",l.onDownloadProgress),typeof l.onUploadProgress=="function"&&g.upload&&g.upload.addEventListener("progress",l.onUploadProgress),(l.cancelToken||l.signal)&&(T=function(ie){!g||(p(!ie||ie&&ie.type?new u:ie),g.abort(),g=null)},l.cancelToken&&l.cancelToken.subscribe(T),l.signal&&(l.signal.aborted?T():l.signal.addEventListener("abort",T))),h||(h=null);var Bs=d(ue);if(Bs&&["http","https","file"].indexOf(Bs)===-1){p(new c("Unsupported protocol "+Bs+":",c.ERR_BAD_REQUEST,l));return}g.send(h)})},es}var Uo,Bo;function hp(){return Bo||(Bo=1,Uo=null),Uo}var I=$,ko=np,jo=ut,gp=To,mp=Oo,vp={"Content-Type":"application/x-www-form-urlencoded"};function Do(t,e){!I.isUndefined(t)&&I.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function yp(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=pp()),t}function bp(t,e,n){if(I.isString(t))try{return(e||JSON.parse)(t),I.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}var Rn={transitional:gp,adapter:yp(),transformRequest:[function(t,e){if(ko(e,"Accept"),ko(e,"Content-Type"),I.isFormData(t)||I.isArrayBuffer(t)||I.isBuffer(t)||I.isStream(t)||I.isFile(t)||I.isBlob(t))return t;if(I.isArrayBufferView(t))return t.buffer;if(I.isURLSearchParams(t))return Do(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var n=I.isObject(t),r=e&&e["Content-Type"],s;if((s=I.isFileList(t))||n&&r==="multipart/form-data"){var i=this.env&&this.env.FormData;return mp(s?{"files[]":t}:t,i&&new i)}else if(n||r==="application/json")return Do(e,"application/json"),bp(t);return t}],transformResponse:[function(t){var e=this.transitional||Rn.transitional,n=e&&e.silentJSONParsing,r=e&&e.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||r&&I.isString(t)&&t.length)try{return JSON.parse(t)}catch(i){if(s)throw i.name==="SyntaxError"?jo.from(i,jo.ERR_BAD_RESPONSE,this,null,this.response):i}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:hp()},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};I.forEach(["delete","get","head"],function(t){Rn.headers[t]={}}),I.forEach(["post","put","patch"],function(t){Rn.headers[t]=I.merge(vp)});var ts=Rn,Ep=$,wp=ts,Sp=function(t,e,n){var r=this||wp;return Ep.forEach(n,function(s){t=s.call(r,t,e)}),t},Mo,Fo;function Ho(){return Fo||(Fo=1,Mo=function(t){return!!(t&&t.__CANCEL__)}),Mo}var Go=$,ns=Sp,Cp=Ho(),Tp=ts,Op=_n();function rs(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Op}var _p=function(t){rs(t),t.headers=t.headers||{},t.data=ns.call(t,t.data,t.headers,t.transformRequest),t.headers=Go.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),Go.forEach(["delete","get","head","post","put","patch","common"],function(n){delete t.headers[n]});var e=t.adapter||Tp.adapter;return e(t).then(function(n){return rs(t),n.data=ns.call(t,n.data,n.headers,t.transformResponse),n},function(n){return Cp(n)||(rs(t),n&&n.response&&(n.response.data=ns.call(t,n.response.data,n.response.headers,t.transformResponse))),Promise.reject(n)})},Y=$,zo=function(t,e){e=e||{};var n={};function r(u,d){return Y.isPlainObject(u)&&Y.isPlainObject(d)?Y.merge(u,d):Y.isPlainObject(d)?Y.merge({},d):Y.isArray(d)?d.slice():d}function s(u){if(Y.isUndefined(e[u])){if(!Y.isUndefined(t[u]))return r(void 0,t[u])}else return r(t[u],e[u])}function i(u){if(!Y.isUndefined(e[u]))return r(void 0,e[u])}function o(u){if(Y.isUndefined(e[u])){if(!Y.isUndefined(t[u]))return r(void 0,t[u])}else return r(void 0,e[u])}function a(u){if(u in e)return r(t[u],e[u]);if(u in t)return r(void 0,t[u])}var c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a};return Y.forEach(Object.keys(t).concat(Object.keys(e)),function(u){var d=c[u]||s,l=d(u);Y.isUndefined(l)&&d!==a||(n[u]=l)}),n},qo,Jo;function Vo(){return Jo||(Jo=1,qo={version:"0.27.2"}),qo}Vo().version;var Te=ut,ss={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){ss[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var Wo={};ss.transitional=function(t,e,n){function r(s,i){return"[Axios v1.29.0] Transitional option '"+s+"'"+i+(n?". "+n:"")}return function(s,i,o){if(t===!1)throw new Te(r(i," has been removed"+(e?" in "+e:"")),Te.ERR_DEPRECATED);return e&&!Wo[i]&&(Wo[i]=!0,console.warn(r(i," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(s,i,o):!0}};function Rp(t,e,n){if(typeof t!="object")throw new Te("options must be an object",Te.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(t),s=r.length;s-- >0;){var i=r[s],o=e[i];if(o){var a=t[i],c=a===void 0||o(a,i,t);if(c!==!0)throw new Te("option "+i+" must be "+c,Te.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Te("Unknown option "+i,Te.ERR_BAD_OPTION)}}var Ap={assertOptions:Rp,validators:ss},Yo=$,Ip=Eo,Xo=ep,Ko=_p,An=zo,Pp=Ao,Zo=Ap,lt=Zo.validators;function dt(t){this.defaults=t,this.interceptors={request:new Xo,response:new Xo}}dt.prototype.request=function(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=An(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var n=e.transitional;n!==void 0&&Zo.assertOptions(n,{silentJSONParsing:lt.transitional(lt.boolean),forcedJSONParsing:lt.transitional(lt.boolean),clarifyTimeoutError:lt.transitional(lt.boolean)},!1);var r=[],s=!0;this.interceptors.request.forEach(function(l){typeof l.runWhen=="function"&&l.runWhen(e)===!1||(s=s&&l.synchronous,r.unshift(l.fulfilled,l.rejected))});var i=[];this.interceptors.response.forEach(function(l){i.push(l.fulfilled,l.rejected)});var o;if(!s){var a=[Ko,void 0];for(Array.prototype.unshift.apply(a,r),a=a.concat(i),o=Promise.resolve(e);a.length;)o=o.then(a.shift(),a.shift());return o}for(var c=e;r.length;){var u=r.shift(),d=r.shift();try{c=u(c)}catch(l){d(l);break}}try{o=Ko(c)}catch(l){return Promise.reject(l)}for(;i.length;)o=o.then(i.shift(),i.shift());return o},dt.prototype.getUri=function(t){t=An(this.defaults,t);var e=Pp(t.baseURL,t.url);return Ip(e,t.params,t.paramsSerializer)},Yo.forEach(["delete","get","head","options"],function(t){dt.prototype[t]=function(e,n){return this.request(An(n||{},{method:t,url:e,data:(n||{}).data}))}}),Yo.forEach(["post","put","patch"],function(t){function e(n){return function(r,s,i){return this.request(An(i||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:r,data:s}))}}dt.prototype[t]=e(),dt.prototype[t+"Form"]=e(!0)});var $p=dt,is,Qo;function Np(){if(Qo)return is;Qo=1;var t=_n();function e(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(i){r=i});var s=this;this.promise.then(function(i){if(s._listeners){var o,a=s._listeners.length;for(o=0;o<a;o++)s._listeners[o](i);s._listeners=null}}),this.promise.then=function(i){var o,a=new Promise(function(c){s.subscribe(c),o=c}).then(i);return a.cancel=function(){s.unsubscribe(o)},a},n(function(i){s.reason||(s.reason=new t(i),r(s.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var r=this._listeners.indexOf(n);r!==-1&&this._listeners.splice(r,1)}},e.source=function(){var n,r=new e(function(s){n=s});return{token:r,cancel:n}},is=e,is}var ea,ta;function Lp(){return ta||(ta=1,ea=function(t){return function(e){return t.apply(null,e)}}),ea}var os,na;function xp(){if(na)return os;na=1;var t=$;return os=function(e){return t.isObject(e)&&e.isAxiosError===!0},os}var ra=$,Up=mo,In=$p,Bp=zo,kp=ts;function sa(t){var e=new In(t),n=Up(In.prototype.request,e);return ra.extend(n,In.prototype,e),ra.extend(n,e),n.create=function(r){return sa(Bp(t,r))},n}var G=sa(kp);G.Axios=In,G.CanceledError=_n(),G.CancelToken=Np(),G.isCancel=Ho(),G.VERSION=Vo().version,G.toFormData=Oo,G.AxiosError=ut,G.Cancel=G.CanceledError,G.all=function(t){return Promise.all(t)},G.spread=Lp(),G.isAxiosError=xp(),Hr.exports=G,Hr.exports.default=G,function(t){t.exports=Hr.exports}(go);const X=$f(go.exports),Me="http://localhost".replace(/\/+$/,"");class ia{constructor(e,n=Me,r=X){this.basePath=n,this.axios=r,e&&(this.configuration=e,this.basePath=e.basePath||this.basePath)}}class jp extends Error{constructor(e,n){super(n),this.field=e,this.name="RequiredError"}}const ft="https://example.com",Gt=function(t,e,n){if(n==null)throw new jp(e,`Required parameter ${e} was null or undefined when calling ${t}.`)};function as(t,e,n=""){typeof e=="object"?Array.isArray(e)?e.forEach(r=>as(t,r,n)):Object.keys(e).forEach(r=>as(t,e[r],`${n}${n!==""?".":""}${r}`)):t.has(n)?t.append(n,e):t.set(n,e)}const pt=function(t,...e){const n=new URLSearchParams(t.search);as(n,e),t.search=n.toString()},ht=function(t,e,n){const r=typeof t!="string";return(r&&n&&n.isJsonMime?n.isJsonMime(e.headers["Content-Type"]):r)?JSON.stringify(t!==void 0?t:{}):t||""},gt=function(t){return t.pathname+t.search+t.hash},mt=function(t,e,n,r){return(s=e,i=n)=>{const o=Object.assign(Object.assign({},t.options),{url:((r==null?void 0:r.basePath)||i)+t.url});return s.request(o)}};var ne=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(l){o(l)}}function c(d){try{u(r.throw(d))}catch(l){o(l)}}function u(d){d.done?i(d.value):s(d.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};const Dp=function(t){return{createUpdateDeleteCompanies:(e,n={})=>ne(this,void 0,void 0,function*(){Gt("createUpdateDeleteCompanies","companyCUDRequest",e);const r="/companies",s=new URL(r,ft);let i;t&&(i=t.baseOptions);const o=Object.assign(Object.assign({method:"PATCH"},i),n),a={},c={};a["Content-Type"]="application/json",pt(s,c);let u=i&&i.headers?i.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},a),u),n.headers),o.data=ht(e,o,t),{url:gt(s),options:o}}),createUpdateDeleteViewCompanies:(e,n={})=>ne(this,void 0,void 0,function*(){Gt("createUpdateDeleteViewCompanies","viewCompanyCUDRequest",e);const r="/view-companies",s=new URL(r,ft);let i;t&&(i=t.baseOptions);const o=Object.assign(Object.assign({method:"PATCH"},i),n),a={},c={};a["Content-Type"]="application/json",pt(s,c);let u=i&&i.headers?i.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},a),u),n.headers),o.data=ht(e,o,t),{url:gt(s),options:o}}),getCompanies:(e,n={})=>ne(this,void 0,void 0,function*(){Gt("getCompanies","companyDataBatchRequest",e);const r="/companies-fsp",s=new URL(r,ft);let i;t&&(i=t.baseOptions);const o=Object.assign(Object.assign({method:"POST"},i),n),a={},c={};a["Content-Type"]="application/json",pt(s,c);let u=i&&i.headers?i.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},a),u),n.headers),o.data=ht(e,o,t),{url:gt(s),options:o}}),getCompany:(e,n={})=>ne(this,void 0,void 0,function*(){Gt("getCompany","company",e);const r="/companies",s=new URL(r,ft);let i;t&&(i=t.baseOptions);const o=Object.assign(Object.assign({method:"POST"},i),n),a={},c={};a["Content-Type"]="application/json",pt(s,c);let u=i&&i.headers?i.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},a),u),n.headers),o.data=ht(e,o,t),{url:gt(s),options:o}}),getViewCompanies:(e,n={})=>ne(this,void 0,void 0,function*(){Gt("getViewCompanies","viewCompanyFSPBatchRequest",e);const r="/view-companies",s=new URL(r,ft);let i;t&&(i=t.baseOptions);const o=Object.assign(Object.assign({method:"POST"},i),n),a={},c={};a["Content-Type"]="application/json",pt(s,c);let u=i&&i.headers?i.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},a),u),n.headers),o.data=ht(e,o,t),{url:gt(s),options:o}})}},zt=function(t){const e=Dp(t);return{createUpdateDeleteCompanies(n,r){return ne(this,void 0,void 0,function*(){const s=yield e.createUpdateDeleteCompanies(n,r);return mt(s,X,Me,t)})},createUpdateDeleteViewCompanies(n,r){return ne(this,void 0,void 0,function*(){const s=yield e.createUpdateDeleteViewCompanies(n,r);return mt(s,X,Me,t)})},getCompanies(n,r){return ne(this,void 0,void 0,function*(){const s=yield e.getCompanies(n,r);return mt(s,X,Me,t)})},getCompany(n,r){return ne(this,void 0,void 0,function*(){const s=yield e.getCompany(n,r);return mt(s,X,Me,t)})},getViewCompanies(n,r){return ne(this,void 0,void 0,function*(){const s=yield e.getViewCompanies(n,r);return mt(s,X,Me,t)})}}};class Mp extends ia{createUpdateDeleteCompanies(e,n){return zt(this.configuration).createUpdateDeleteCompanies(e,n).then(r=>r(this.axios,this.basePath))}createUpdateDeleteViewCompanies(e,n){return zt(this.configuration).createUpdateDeleteViewCompanies(e,n).then(r=>r(this.axios,this.basePath))}getCompanies(e,n){return zt(this.configuration).getCompanies(e,n).then(r=>r(this.axios,this.basePath))}getCompany(e,n){return zt(this.configuration).getCompany(e,n).then(r=>r(this.axios,this.basePath))}getViewCompanies(e,n){return zt(this.configuration).getViewCompanies(e,n).then(r=>r(this.axios,this.basePath))}}const Fp=function(t){return{getProfiles:(e,n={})=>ne(this,void 0,void 0,function*(){const r="/profiles",s=new URL(r,ft);let i;t&&(i=t.baseOptions);const o=Object.assign(Object.assign({method:"POST"},i),n),a={},c={};a["Content-Type"]="application/json",pt(s,c);let u=i&&i.headers?i.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},a),u),n.headers),o.data=ht(e,o,t),{url:gt(s),options:o}})}},Hp=function(t){const e=Fp(t);return{getProfiles(n,r){return ne(this,void 0,void 0,function*(){const s=yield e.getProfiles(n,r);return mt(s,X,Me,t)})}}};class Gp extends ia{getProfiles(e,n){return Hp(this.configuration).getProfiles(e,n).then(r=>r(this.axios,this.basePath))}}class oa{constructor(e={}){this.apiKey=e.apiKey,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor}isJsonMime(e){const n=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(n.test(e)||e.toLowerCase()==="application/json-patch+json")}}const qt="http://localhost".replace(/\/+$/,"");class aa{constructor(e,n=qt,r=X){this.basePath=n,this.axios=r,e&&(this.configuration=e,this.basePath=e.basePath||this.basePath)}}class zp extends Error{constructor(e,n){super(n),this.field=e,this.name="RequiredError"}}const Pn="https://example.com",ca=function(t,e,n){if(n==null)throw new zp(e,`Required parameter ${e} was null or undefined when calling ${t}.`)};function cs(t,e,n=""){typeof e=="object"?Array.isArray(e)?e.forEach(r=>cs(t,r,n)):Object.keys(e).forEach(r=>cs(t,e[r],`${n}${n!==""?".":""}${r}`)):t.has(n)?t.append(n,e):t.set(n,e)}const $n=function(t,...e){const n=new URLSearchParams(t.search);cs(n,e),t.search=n.toString()},us=function(t,e,n){const r=typeof t!="string";return(r&&n&&n.isJsonMime?n.isJsonMime(e.headers["Content-Type"]):r)?JSON.stringify(t!==void 0?t:{}):t||""},Nn=function(t){return t.pathname+t.search+t.hash},Ln=function(t,e,n,r){return(s=e,i=n)=>{const o=Object.assign(Object.assign({},t.options),{url:((r==null?void 0:r.basePath)||i)+t.url});return s.request(o)}};var Oe=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(l){o(l)}}function c(d){try{u(r.throw(d))}catch(l){o(l)}}function u(d){d.done?i(d.value):s(d.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};const qp={Gt:"GT",Lt:"LT",Gte:"GTE",Lte:"LTE",Eq:"EQ",Neq:"NEQ",Contains:"CONTAINS",NotContains:"NOT_CONTAINS",Before:"BEFORE",NotBefore:"NOT_BEFORE",After:"AFTER",NotAfter:"NOT_AFTER"},Jp=function(t){return{deleteCurrentActiveUserProfile:(e={})=>Oe(this,void 0,void 0,function*(){const n="/active-user-profile",r=new URL(n,Pn);let s;t&&(s=t.baseOptions);const i=Object.assign(Object.assign({method:"DELETE"},s),e),o={};$n(r,{});let a=s&&s.headers?s.headers:{};return i.headers=Object.assign(Object.assign(Object.assign({},o),a),e.headers),{url:Nn(r),options:i}}),getActiveUserProfile:(e,n={})=>Oe(this,void 0,void 0,function*(){const r="/get-active-user-profile",s=new URL(r,Pn);let i;t&&(i=t.baseOptions);const o=Object.assign(Object.assign({method:"POST"},i),n),a={},c={};a["Content-Type"]="application/json",$n(s,c);let u=i&&i.headers?i.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},a),u),n.headers),o.data=us(e,o,t),{url:Nn(s),options:o}}),saveCurrentActiveUserProfile:(e,n={})=>Oe(this,void 0,void 0,function*(){ca("saveCurrentActiveUserProfile","activeUserProfileRequest",e);const r="/active-user-profile",s=new URL(r,Pn);let i;t&&(i=t.baseOptions);const o=Object.assign(Object.assign({method:"POST"},i),n),a={},c={};a["Content-Type"]="application/json",$n(s,c);let u=i&&i.headers?i.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},a),u),n.headers),o.data=us(e,o,t),{url:Nn(s),options:o}})}},ls=function(t){const e=Jp(t);return{deleteCurrentActiveUserProfile(n){return Oe(this,void 0,void 0,function*(){const r=yield e.deleteCurrentActiveUserProfile(n);return Ln(r,X,qt,t)})},getActiveUserProfile(n,r){return Oe(this,void 0,void 0,function*(){const s=yield e.getActiveUserProfile(n,r);return Ln(s,X,qt,t)})},saveCurrentActiveUserProfile(n,r){return Oe(this,void 0,void 0,function*(){const s=yield e.saveCurrentActiveUserProfile(n,r);return Ln(s,X,qt,t)})}}};class Vp extends aa{deleteCurrentActiveUserProfile(e){return ls(this.configuration).deleteCurrentActiveUserProfile(e).then(n=>n(this.axios,this.basePath))}getActiveUserProfile(e,n){return ls(this.configuration).getActiveUserProfile(e,n).then(r=>r(this.axios,this.basePath))}saveCurrentActiveUserProfile(e,n){return ls(this.configuration).saveCurrentActiveUserProfile(e,n).then(r=>r(this.axios,this.basePath))}}const Wp=function(t){return{getCurrentUserPermissions:(e,n={})=>Oe(this,void 0,void 0,function*(){ca("getCurrentUserPermissions","getUserPermissionsBatchRequest",e);const r="/authorization/permissions",s=new URL(r,Pn);let i;t&&(i=t.baseOptions);const o=Object.assign(Object.assign({method:"POST"},i),n),a={},c={};a["Content-Type"]="application/json",$n(s,c);let u=i&&i.headers?i.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},a),u),n.headers),o.data=us(e,o,t),{url:Nn(s),options:o}})}},Yp=function(t){const e=Wp(t);return{getCurrentUserPermissions(n,r){return Oe(this,void 0,void 0,function*(){const s=yield e.getCurrentUserPermissions(n,r);return Ln(s,X,qt,t)})}}};class Xp extends aa{getCurrentUserPermissions(e,n){return Yp(this.configuration).getCurrentUserPermissions(e,n).then(r=>r(this.axios,this.basePath))}}class ua{constructor(e={}){this.apiKey=e.apiKey,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor}isJsonMime(e){const n=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(n.test(e)||e.toLowerCase()==="application/json-patch+json")}}/*! api-interceptors 1.29.0 */function Kp(t){return e=>({...e,withCredentials:t.corsCredentials})}function Zp(t){const e={"Content-Type":"application/json"};return{...t,headers:{...t.headers,...e}}}function Qp(t){return e=>{const n={...e.headers,"x-applicationname":t};return{...e,headers:n}}}function eh(){const t=v.initializeStore();return new Promise(e=>{t.once("B2XCORE_AUTHENTICATION",n=>{e(n.jwe||"")})})}function th(t){return async e=>{if(t&&t.some(s=>{var i;return(i=e.url)==null?void 0:i.includes(s)}))return e;const n=await eh(),r=n?{...e.headers,"authorization-jwe":`Bearer ${n}`}:{...e.headers};return{...e,headers:r}}}var xn,nh=new Uint8Array(16);function rh(){if(!xn&&(xn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!xn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return xn(nh)}const sh=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ih(t){return typeof t=="string"&&sh.test(t)}for(var N=[],ds=0;ds<256;++ds)N.push((ds+256).toString(16).substr(1));function oh(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(N[t[e+0]]+N[t[e+1]]+N[t[e+2]]+N[t[e+3]]+"-"+N[t[e+4]]+N[t[e+5]]+"-"+N[t[e+6]]+N[t[e+7]]+"-"+N[t[e+8]]+N[t[e+9]]+"-"+N[t[e+10]]+N[t[e+11]]+N[t[e+12]]+N[t[e+13]]+N[t[e+14]]+N[t[e+15]]).toLowerCase();if(!ih(n))throw TypeError("Stringified UUID is invalid");return n}function la(t,e,n){t=t||{};var r=t.random||(t.rng||rh)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var s=0;s<16;++s)e[n+s]=r[s];return e}return oh(r)}la();function ah(t){const e={...t.headers,"X-TrackingId":la()||""};return{...t,headers:e}}const ch=Kp,uh=Zp,lh=Qp,dh=th,fh=ah;async function da(){return new Promise((t,e)=>{v.initializeStore().once(te,n=>{t(n)})})}async function ph(t){return await(t||v.initializeStore()).getConnectionDispatchers(te)}/*! connection-aem-environment 1.8.0 */const fa="OWC_AEM_ENV",hh=new class extends v.SeamlessConnection{constructor(){super(fa)}get initialState(){var t,e,n,r,s,i;const o=((t=window.aemNamespace)==null?void 0:t.environmentVariables)||((n=(e=window.top)==null?void 0:e.aemNamespace)==null?void 0:n.environmentVariables),a=((r=window.aemNamespace)==null?void 0:r.pageEnvironmentVariables)||((i=(s=window.top)==null?void 0:s.aemNamespace)==null?void 0:i.pageEnvironmentVariables);return o&&a?{...o,...a}:{}}getReducer(){return()=>this.initialState}getPublicDispatchers(){return{}}},gh=async()=>{const t=v.initializeStore();return await(async()=>{var e;if(!((e=window.top)!=null&&e.aemNamespace)&&!window.aemNamespace)return new Promise(n=>{let r;Object.defineProperty(window.top,"aemNamespace",{get:()=>r,async set(s){r=s,n()}})})})(),await(async()=>{var e,n,r;if(!((n=(e=window.top)==null?void 0:e.aemNamespace)!=null&&n.environmentVariables)&&!((r=window==null?void 0:window.aemNamespace)!=null&&r.environmentVariables))return new Promise(s=>{var i;let o;Object.defineProperty((i=window.top)==null?void 0:i.aemNamespace,"environmentVariables",{get:()=>o,set(a){o=a,s()}})})})(),await(async()=>{var e,n,r;if(!((n=(e=window.top)==null?void 0:e.aemNamespace)!=null&&n.pageEnvironmentVariables)&&!((r=window==null?void 0:window.aemNamespace)!=null&&r.pageEnvironmentVariables))return new Promise(s=>{var i;let o;Object.defineProperty((i=window.top)==null?void 0:i.aemNamespace,"pageEnvironmentVariables",{get:()=>o,set(a){o=a,s()}})})})(),t.addConnection(hh)};async function mh(){const t=v.initializeStore();try{await gh()}catch(e){console.error(e)}return await new Promise(e=>{t.once(fa,n=>{e(n)})})}const Jt=mh(),vt={getAemEnvironment(){return Jt},async getCountry(){return(await Jt).country},async getLanguage(){return(await Jt).language},async getStage(){return(await Jt).stage},async getRunMode(){return(await Jt).runMode}};async function vh(){var t,e;const n={},r=await da(),{market:s,locale:i}=r||{};let o={...s};(!o||!o.domainRef)&&(o={domainRef:{code:await vt.getCountry()}}),n.market=o;let a={...i};if((!a||!a.country||!a.language)&&(a={country:await vt.getCountry(),language:await vt.getLanguage()}),n.locale=a,(t=r==null?void 0:r.user)!=null&&t.domainRef){const{company:c,roles:u,userJourneyCache:d}=r;c&&c.domainRef&&(n.company={domainRef:c==null?void 0:c.domainRef}),d&&d.domainRef&&(n.userJourneyCache={domainRef:d==null?void 0:d.domainRef}),u&&u.length&&(n.roles=u.map(l=>({domainRef:l.domainRef,context:l.context})))}return(e=r==null?void 0:r.vehicles)!=null&&e.length&&(n.vehicles=r==null?void 0:r.vehicles.map(c=>({domainRef:c.domainRef}))),n}async function yh(t){const e=await vh(),n={...t.headers,"B2X-ActiveProfile":JSON.stringify(e)};return{...t,headers:n}}const bh={XA:"AE-AZ",XD:"AE-DU"},Eh={toCountry(t){return bh[t]||t}},wh=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IN","IE","IT","LV","LI","LT","LU","MT","NL","NO","PL","PT","RO","RU","SK","SI","ZA","ES","SE","CH","TH","TR","GB","AQ","AE-AZ","AE-DU"],Sh=["AU","BR","CA","JP","MY","MX","NZ","KR","SG","TW","US"],Ch=["CN","HK","MO"];function Th(t,e){if(t==="MHB2B")switch(e){case"INT":return"/mhb2b-int";case"PPROD":return"/mhb2b-pprod";case"PROD":return"/mhb2b-prod"}return""}function Oh(t){const e=Eh.toCountry(t);if(wh.includes(e))return"ECE";if(Sh.includes(e))return"AMAP";if(Ch.includes(e))return"CN";throw new Error(`Country ${e} is not supported`)}function _h(t){return t==="PROD"?"PROD":t==="PPROD"||t==="PREPROD"?"PPROD":"INT"}const pa={ECE:{INT:{serverApiUrl:"https://services.me-int.mercedes-benz.com"},PPROD:{serverApiUrl:"https://services.me-int.mercedes-benz.com"},PROD:{serverApiUrl:"https://services.me.mercedes-benz.com"}},AMAP:{INT:{serverApiUrl:"https://services-amap.me-int.mercedes-benz.com"},PPROD:{serverApiUrl:"https://services-amap.me-int.mercedes-benz.com"},PROD:{serverApiUrl:"https://services-amap.me.mercedes-benz.com"}},CN:{INT:{serverApiUrl:"https://services-china.me-int.mercedes-benz.com"},PPROD:{serverApiUrl:"https://services-china.me-int.mercedes-benz.com"},PROD:{serverApiUrl:"https://services.me-prod.mercedes-benz.com.cn"}}};function Rh(t,e,n){const r=Oh(t),s=_h(e);return n?`${pa[r][s].serverApiUrl}${Th(n,s)}`:pa[r][s].serverApiUrl}async function Ah(t){const e=await vt.getStage(),n=await vt.getCountry();return{apiBasePath:Rh(n,e,t),id:e}}const Ih={async getConfig(t){return await Ah(t)}};async function Ph(t,e){const n=X.create();return n.interceptors.request.use(yh),n.interceptors.request.use(uh),n.interceptors.request.use(fh),n.interceptors.request.use(lh(e||"")),n.interceptors.request.use(dh()),n.interceptors.request.use(ch(t)),n}async function $h(t,e){const n=await Ih.getConfig(t),r=await Ph(n,e);return{profileApi:new Gp(new oa,`${n.apiBasePath}/mhb2b-profile-overview/mhb2b`,r),companyProfileApi:new Mp(new oa,`${n.apiBasePath}/mhb2b-company-profile/mhb2b`,r),permissionsApi:new Xp(new ua,`${n.apiBasePath}/mhb2b-permissions/mhb2b`,r),activeUserProfileApi:new Vp(new ua,`${n.apiBasePath}/mhb2b-permissions/mhb2b`,r)}}const fs={async getInstances(t,e="b2xpal"){return await $h(t,e)}},ps=async t=>{var e,n,r,s,i;const o={};if((e=t.user)!=null&&e.domainRef&&(o.user={domainRef:t.user.domainRef}),(n=t.company)!=null&&n.domainRef)o.company={domainRef:t.company.domainRef};else if(t.company)o.company={};else return;(r=t.roles)!=null&&r.length&&(o.roles=t.roles),(s=t.fleets)!=null&&s.length&&(o.fleets=t.fleets.map(c=>({domainRef:c.domainRef}))),(i=t.vehicles)!=null&&i.length&&(o.vehicles=t.vehicles.map(c=>({domainRef:c.domainRef}))),t.market&&(o.market=t.market),t.locale&&(o.locale=t.locale);const{activeUserProfileApi:a}=await fs.getInstances("MHB2B");await a.saveCurrentActiveUserProfile({activeUserProfile:o})},Nh=t=>({...t}),Lh=t=>({...t});var Un="NOT_FOUND";function xh(t){var e;return{get:function(n){return e&&t(e.key,n)?e.value:Un},put:function(n,r){e={key:n,value:r}},getEntries:function(){return e?[e]:[]},clear:function(){e=void 0}}}function Uh(t,e){var n=[];function r(a){var c=n.findIndex(function(d){return e(a,d.key)});if(c>-1){var u=n[c];return c>0&&(n.splice(c,1),n.unshift(u)),u.value}return Un}function s(a,c){r(a)===Un&&(n.unshift({key:a,value:c}),n.length>t&&n.pop())}function i(){return n}function o(){n=[]}return{get:r,put:s,getEntries:i,clear:o}}var Bh=function(t,e){return t===e};function kh(t){return function(e,n){if(e===null||n===null||e.length!==n.length)return!1;for(var r=e.length,s=0;s<r;s++)if(!t(e[s],n[s]))return!1;return!0}}function jh(t,e){var n=typeof e=="object"?e:{equalityCheck:e},r=n.equalityCheck,s=r===void 0?Bh:r,i=n.maxSize,o=i===void 0?1:i,a=n.resultEqualityCheck,c=kh(s),u=o===1?xh(c):Uh(o,c);function d(){var l=u.get(arguments);if(l===Un){if(l=t.apply(null,arguments),a){var f=u.getEntries(),p=f.find(function(h){return a(h.value,l)});p&&(l=p.value)}u.put(arguments,l)}return l}return d.clearCache=function(){return u.clear()},d}function Dh(t){var e=Array.isArray(t[0])?t[0]:t;if(!e.every(function(r){return typeof r=="function"})){var n=e.map(function(r){return typeof r=="function"?"function "+(r.name||"unnamed")+"()":typeof r}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return e}function Mh(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var s=function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];var c=0,u,d={memoizeOptions:void 0},l=o.pop();if(typeof l=="object"&&(d=l,l=o.pop()),typeof l!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof l+"]");var f=d,p=f.memoizeOptions,h=p===void 0?n:p,m=Array.isArray(h)?h:[h],b=Dh(o),T=t.apply(void 0,[function(){return c++,l.apply(null,arguments)}].concat(m)),y=t(function(){for(var g=[],U=b.length,B=0;B<U;B++)g.push(b[B].apply(null,arguments));return u=T.apply(null,g),u});return Object.assign(y,{resultFunc:l,memoizedResultFunc:T,dependencies:b,lastResult:function(){return u},recomputations:function(){return c},resetRecomputations:function(){return c=0}}),y};return s}var Vt=Mh(jh);const ha="B2B",Fh="B2C",ga=t=>t.activeCustomerGroup,Hh=t=>t.user,Gh=t=>t.company,zh=Vt([ga],t=>{var e;return(e=t==null?void 0:t.domainRef)==null?void 0:e.id}),qh=Vt([ga],t=>t==null?void 0:t.customerType),hs=Vt([qh],t=>t==null?void 0:t.businessType),ma=t=>!!t&&Object.keys(t).length===0;Vt([hs,Hh,Gh],(t,e,n)=>t===ha&&ma(n)||t===Fh&&ma(e)),Vt([hs,zh],(t,e)=>({businessType:t,customerGroupId:e}));const _e=K.initializeLogger("B2X-PAL"),va=async t=>{var e;const n=await da(),r=await ph(),{market:s,locale:i,user:o,roles:a,fleets:c,vehicles:u,activeCustomerGroup:d,company:l,permissions:f,meta:p}=t,h={...n,meta:p,market:s,locale:i,activeCustomerGroup:d,company:l};o&&(h.user=o),(e=f==null?void 0:f.actionPermissions)!=null&&e.length&&(h.permissions={...h.permissions,actionPermissions:f==null?void 0:f.actionPermissions}),a&&a.length&&(h.roles=a),c!=null&&c.length&&(h.fleets=c),u!=null&&u.length&&(h.vehicles=u),r.setState(h)},ya=async({userToken:t,businessType:e,marketId:n,ensureProperties:r})=>{const{activeUserProfileApi:s}=await fs.getInstances("MHB2B"),i=t?{"authorization-jwe":`Bearer ${t}`}:{},{data:o}=await s.getActiveUserProfile({requests:[{fspRequest:{filterDescriptor:{entityType:"ActiveUserProfile"},includeDescriptor:{includedPropertyPaths:[...new Set(["locale.**","market.**","activeCustomerGroup.**","company.domainRef.**","company.customerGroups.customerGroupId.**","permissions.actionPermissions.domainRef.**","roles.domainRef.**","fleets.domainRef.**","user.domainRef.**","onBehalfOfUser.domainRef.**","vehicles.domainRef.**",...r||[]])]}},marketId:{code:n||await vt.getCountry()},customerBusinessType:e}]},i);return o},yt=async({userToken:t,businessType:e,marketId:n,lastSelectedCompanyProfileId:r,ensureProperties:s},i=!0)=>{_e.debug("Getting active user profile, version=1.29.0");const o=await ya({userToken:t,businessType:e,marketId:n,ensureProperties:s}),a=await Wh({userToken:t,lastSelectedCompanyProfileId:r,marketId:n,ensureProperties:s},o==null?void 0:o.responses[0].items);if(a)if(a.meta={version:"1.29.0",status:"READY"},i)_e.debug(`Now setting the status with ${JSON.stringify(a)}`),await va(a);else return a},Jh=async({ensureProperties:t}={})=>{await yt({userToken:"",businessType:Fr.B2B,marketId:"",ensureProperties:t})},Vh=async({ensureProperties:t}={})=>{await yt({userToken:"",businessType:Fr.B2C,marketId:"",ensureProperties:t})},ba=async(t,e,n,r,s)=>{await ps({...je(),user:r,company:s});const i=await ya({userToken:t,marketId:e,ensureProperties:n});return{...je(),...i==null?void 0:i.responses[0].items[0]}},Wh=async({userToken:t,lastSelectedCompanyProfileId:e,marketId:n,ensureProperties:r},s=[])=>{var i,o;const a=await Yh(s,t,n,r);try{if(t&&((i=a.activeCustomerGroup)==null?void 0:i.customerType.businessType)==ha&&e&&((o=a.company)==null?void 0:o.domainRef)!=e)return _e.debug(`Trying to select the previous company ${e}`),ba(t,n,r,a.user,{domainRef:{meId:e}})}catch(c){_e.error("While checking current active",c)}return a},Yh=async(t,e,n,r)=>{var s,i;const o=t.reduce((a,c)=>{var u;return c.company?c.company.domainRef?a.B2B.REAL.push(c):a.B2B.ANON.push(c):(u=c.user)!=null&&u.domainRef?a.B2C.REAL.push(c):a.B2C.ANON.push(c),a},{B2B:{ANON:[],REAL:[]},B2C:{ANON:[],REAL:[]}});if(o.B2C.REAL.length>0)return _e.debug("Selecting the B2C profile"),{...je(),...o.B2C.REAL[0]};if(o.B2C.ANON.length>0)return _e.debug("Selecting the B2C anonymous"),{...je(),...o.B2C.ANON[0]};if(o.B2B.REAL.length==1)return _e.debug("Selecting the unique B2B profile"),{...je(),...o.B2B.REAL[0]};if(o.B2B.ANON.length==1&&((i=(s=o.B2B.ANON[0].user)==null?void 0:s.companies)==null?void 0:i.length)==1){const a=o.B2B.ANON[0].user,c=(a==null?void 0:a.companies)&&a.companies[0];return ba(e,n,r,a,c)}return _e.debug("B2B mode without explicit company selection, reverting to default"),{...je(),...o.B2B.ANON[0]}};var Bn,Xh=new Uint8Array(16);function Kh(){if(!Bn&&(Bn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Bn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Bn(Xh)}const Zh=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Qh(t){return typeof t=="string"&&Zh.test(t)}for(var L=[],gs=0;gs<256;++gs)L.push((gs+256).toString(16).substr(1));function eg(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(L[t[e+0]]+L[t[e+1]]+L[t[e+2]]+L[t[e+3]]+"-"+L[t[e+4]]+L[t[e+5]]+"-"+L[t[e+6]]+L[t[e+7]]+"-"+L[t[e+8]]+L[t[e+9]]+"-"+L[t[e+10]]+L[t[e+11]]+L[t[e+12]]+L[t[e+13]]+L[t[e+14]]+L[t[e+15]]).toLowerCase();if(!Qh(n))throw TypeError("Stringified UUID is invalid");return n}function tg(t,e,n){t=t||{};var r=t.random||(t.rng||Kh)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var s=0;s<16;++s)e[n+s]=r[s];return e}return eg(r)}function Ea(){return{domainRef:{id:tg()}}}class ng{constructor(){this.request={filterDescriptor:{entityType:"",operation:{}},includeDescriptor:{entityInstancePermissions:!0}}}withEntityType(e){return this.request.filterDescriptor.entityType=e,this}withBinaryFilterEq(e,n,r){return this.request.filterDescriptor.operation={binaryFilter:{operator:qp.Eq,leftOperand:{expression:{propertyPath:e}},rightOperand:{literal:{value:r,valueType:n}}}},this}withIncludeDescriptor(e){return this.request.includeDescriptor=e,this}getInstance(){return this.request}}class rg{async loadPermissions(e){const{permissionsApi:n}=await fs.getInstances("MHB2B");return(await n.getCurrentUserPermissions({requests:[{fspRequest:new ng().withEntityType("PermissionsOfUserWithinContext").withBinaryFilterEq("company.domainRef","CompanyId",e).getInstance()}]})).data.responses[0].items[0]}}const sg=new rg,ig=t=>(t||v.initializeStore()).getConnectionDispatchers("B2XCORE_PROFILE_DO_NOT_USE");K.initializeLogger("UCMS-SERVICE");const og=t=>{var e,n;if((e=t.activeCustomerGroup)!=null&&e.customerType.businessType)return kn((n=t.activeCustomerGroup)==null?void 0:n.customerType.businessType);{const r=t.company?"B2B":"B2C";return kn(r)}},kn=async(t,e)=>{(await ig()).setBusinessType({businessType:t})},ms=K.initializeLogger("B2X-PAL");class ag extends v.PersistentConnection{constructor(){super(te)}get initialState(){return ms.log("Connection initialized with version: 1.29.0"),je()}getReducer(){return(e,n)=>{switch(n.type){case this.getActionType(w.SET_MARKET):return{...e,market:n.payload};case this.getActionType(w.SET_LOCALE):return{...e,locale:n.payload};case this.getActionType(w.SET_COMPANY):return{...e,company:n.payload,activeCustomerGroup:void 0,roles:[],fleets:[],vehicles:[],permissions:{},userJourneyCache:Ea(),ensureProperties:[]};case this.getActionType(w.UPDATE_COMPANY):return{...e,company:n.payload};case this.getActionType(w.SET_USER):return{...e,user:n.payload};case this.getActionType(w.SET_FLEETS):return{...e,fleets:n.payload};case this.getActionType(w.SET_VEHICLES):return{...e,vehicles:n.payload};case this.getActionType(w.SET_VEHICLE_COUNT):return{...e,company:{...e.company,vehicleCount:n.payload}};case this.getActionType(w.SET_ROLES):return{...e,roles:n.payload};case this.getActionType(w.SET_USER_JOURNEY_CACHE):return{...e,userJourneyCache:n.payload};case this.getActionType(w.REGENERATE_USER_JOURNEY_CACHE):return{...e,userJourneyCache:Ea(),ensureProperties:[]};case this.getActionType(w.SET_ACTION_PERMISSIONS):return{...e,permissions:{...e.permissions,actionPermissions:n.payload}};case this.getActionType(w.SET_SERVICE_PERMISSIONS):return{...e,permissions:{...e.permissions,servicePermissions:n.payload}};case this.getActionType(w.SET_ENTITY_PERMISSIONS):return{...e,permissions:{...e.permissions,entityPermissions:n.payload}};case this.getActionType(w.SET_ACTIVE_COSTUMER_GROUP):return{...e,activeCustomerGroup:n.payload};case this.getActionType(w.ENSURE_PROPERTIES):return{...e,ensureProperties:[...new Set([...e.ensureProperties||[],...n.payload])]};case this.getActionType(w.SET_STATE):return{...e,...n.payload};case this.getActionType(w.RESET_STATE):return{...e};default:return e}}}getPublicDispatchers(){return{setMarket:e=>this.getAction(w.SET_MARKET,e),setLocale:e=>this.getAction(w.SET_LOCALE,e),setCompany:(e,n=[],r=[],s=!0,i)=>async(o,a)=>{if(e&&e.domainRef)if(o(this.getAction(w.SET_COMPANY,e)),o(this.getAction(w.SET_ROLES,n)),r!=null&&r.length)o(this.getAction(w.SET_ACTION_PERMISSIONS,r));else try{const c=await sg.loadPermissions(e.domainRef);o(this.getAction(w.SET_ACTION_PERMISSIONS,c.actionPermissions))}catch(c){ms.error("Could not load permissions ... ",c)}else o(this.getAction(w.SET_COMPANY,e));await this.postDispatcherCall(s,a,i)},setActiveUserProfile:(e,n=!0)=>async(r,s)=>{var i,o,a;const c=s()[te],u=(i=c.activeCustomerGroup)==null?void 0:i.customerType.businessType,d=(a=(o=c.company)==null?void 0:o.domainRef)==null?void 0:a.meId;if(!e.companyProfileId||e.businessType===Fr.B2C){if(u===e.businessType)return;const l=await yt({...e,ensureProperties:[...(c==null?void 0:c.ensureProperties)||[],...e.ensureProperties||[]]},!1);if(!l)return;n&&await kn(e.businessType),await va(l)}else{if(d===e.companyProfileId)return;const l={company:{domainRef:{meId:e.companyProfileId}}};await ps(l),n&&await kn(e.businessType),await yt({...e,ensureProperties:[...(c==null?void 0:c.ensureProperties)||[],...e.ensureProperties||[]]})}},setUser:(e,n=!0,r)=>async(s,i)=>{s(this.getAction(w.SET_USER,e)),await this.postDispatcherCall(n,i,r)},setFleets:(e,n=!0,r)=>async(s,i)=>{s(this.getAction(w.SET_FLEETS,e)),await this.postDispatcherCall(!1,i,r)},setVehicles:(e,n=!0,r)=>async(s,i)=>{s(this.getAction(w.SET_VEHICLES,e)),await this.postDispatcherCall(!1,i,r)},setVehicleCount:e=>this.getAction(w.SET_VEHICLE_COUNT,e),setUserJourneyCache:e=>this.getAction(w.SET_USER_JOURNEY_CACHE,e),regenerateUserJourneyCache:()=>this.getAction(w.REGENERATE_USER_JOURNEY_CACHE),setActiveCustomerGroup:e=>this.getAction(w.SET_ACTIVE_COSTUMER_GROUP,e),resetState:()=>this.getAction(w.RESET_STATE),setState:e=>this.getAction(w.SET_STATE,e),loadLastStateFromBE:(e,n)=>async(r,s)=>{var i;await yt({ensureProperties:(i=s()[te])==null?void 0:i.ensureProperties,...e}),await this.postDispatcherCall(!1,s,n)},loadLastB2CStateFromBE:e=>async(n,r)=>{var s;await Vh({ensureProperties:(s=r()[te])==null?void 0:s.ensureProperties}),await this.postDispatcherCall(!1,r,e)},loadLastB2BStateFromBE:e=>async(n,r)=>{var s;await Jh({ensureProperties:(s=r()[te])==null?void 0:s.ensureProperties}),await this.postDispatcherCall(!1,r,e)},ensureProperties:(e,n)=>async(r,s)=>{r(this.getAction(w.ENSURE_PROPERTIES,e));const i=s()[te],o=[];(i.ensureProperties||[]).forEach(a=>{Pf(i,a.replaceAll(".*","").replaceAll(".**",""))==null&&o.push(a)}),o.length&&await yt({ensureProperties:e}),await this.postDispatcherCall(!1,s,n)}}}get storageType(){return"session"}loadPersistedStateCallback(e){return this.getAction(w.SET_STATE,Nh({...e,meta:{...e.meta,version:"1.29.0",status:"INITIALIZING"}}))}transformToPersistentState(e){return Lh(e)}async postDispatcherCall(e,n,r){const{persistBE:s,persistUCMS:i}=e===!0?{persistBE:!0,persistUCMS:!0}:e||{persistBE:!1,persistUCMS:!1};ms.debug(`post dispatcher, persistBE=${s}, persistUCMS=${i} / opts=${JSON.stringify(e)}`);const o=n()[te],a=[];i&&a.push(og(o)),s&&a.push(ps(o)),a.length&&await Promise.all(a),r&&typeof r=="function"&&r(o)}}const me={B2C:"B2C",B2B:"B2B",B2E:"B2E"},cg={[me.B2C]:"bds/user/16",[me.B2B]:"company/24",[me.B2E]:"bds/user/16"},bt=new A("USER_MENU_COMPONENT");var ug=Object.defineProperty,lg=Object.getOwnPropertyDescriptor,wa=(t,e,n,r)=>{for(var s=r>1?void 0:r?lg(e,n):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(s=(r?o(e,n,s):o(s))||s);return r&&s&&ug(e,n,s),s};let jn=class extends Pe.default{constructor(){super(...arguments);E(this,"list")}};wa([Z()],jn.prototype,"list",2),jn=wa([qe({name:"link-list"})],jn);const Zm="";function Wt(t,e,n,r,s,i,o,a){var c=typeof t=="function"?t.options:t;e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),i&&(c._scopeId="data-v-"+i);var u;if(o?(u=function(f){f=f||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!f&&typeof __VUE_SSR_CONTEXT__<"u"&&(f=__VUE_SSR_CONTEXT__),s&&s.call(this,f),f&&f._registeredComponents&&f._registeredComponents.add(o)},c._ssrRegister=u):s&&(u=a?function(){s.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:s),u)if(c.functional){c._injectStyles=u;var d=c.render;c.render=function(p,h){return u.call(h),d(p,h)}}else{var l=c.beforeCreate;c.beforeCreate=l?[].concat(l,u):[u]}return{exports:t,options:c}}var dg=function(){var e=this,n=e._self._c;return e._self._setupProxy,n("ul",{staticClass:"menu-items"},e._l(e.list,function(r){return n("li",{key:r.url},[n("a",{staticClass:"wb-type-copy",attrs:{target:r.target,href:r.url}},[e._v(e._s(r.label))])])}),0)},fg=[],pg=Wt(jn,dg,fg,!1,null,null,null,null);const hg=pg.exports;var gg=Object.defineProperty,mg=Object.getOwnPropertyDescriptor,Sa=(t,e,n,r)=>{for(var s=r>1?void 0:r?mg(e,n):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(s=(r?o(e,n,s):o(s))||s);return r&&s&&gg(e,n,s),s},Ca=(t=>(t.ERROR="alert-circle",t.SUCCESS="checkmark-circle",t.WARNING="alert-circle",t.HIGHLIGHT="bds/info-circle/24",t))(Ca||{});let Dn=class extends Pe.default{constructor(){super(...arguments);E(this,"alert");E(this,"logger",new A("USER_ALERT_COMPONENT"))}get alertType(){const{type:e=fe.HIGHLIGHT}=this.alert||{};return e.toLowerCase()}get alertIcon(){const{type:e=fe.HIGHLIGHT}=this.alert||{};return Ca[e]}get alertMessage(){const{message:e=""}=this.alert||{};return e}handlerDismiss(e){this.logger.log("Alert dismiss triggered"),this.$emit("onDismiss",e)}};Sa([Z({default:null,type:Object})],Dn.prototype,"alert",2),Dn=Sa([qe({name:"user-alert"})],Dn);const Qm="";var vg=function(){var e=this,n=e._self._c;return e._self._setupProxy,e.alert?n("wb-notification",{attrs:{icon:e.alertIcon,mode:e.alertType},on:{wbdismiss:e.handlerDismiss}},[n("wb-notification-content",[e._v(" "+e._s(e.alertMessage)+" ")])],1):e._e()},yg=[],bg=Wt(Dn,vg,yg,!1,null,null,null,null);const Eg=bg.exports;var wg=Object.defineProperty,Sg=Object.getOwnPropertyDescriptor,Et=(t,e,n,r)=>{for(var s=r>1?void 0:r?Sg(e,n):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(s=(r?o(e,n,s):o(s))||s);return r&&s&&wg(e,n,s),s};let Re=class extends Pe.default{constructor(){super(...arguments);E(this,"store",v.initializeStore());E(this,"config");E(this,"businessType");E(this,"claims");E(this,"alert");E(this,"isReachMeAvailable");E(this,"env",null);E(this,"logger",new A("USER_MENU_FLYOUT"));E(this,"authDispatchers");E(this,"tenantId",location.hostname.includes("localhost")?V.CIAS:V.ONEWEB)}get cmicComponentId(){return location.hostname==="localhost"?"cmic":void 0}get menuEntries(){return this.buildMenuEntries(this.config)}get menuLists(){return this.menuEntries[this.businessType].filter(e=>e.links)}get isLoggedIn(){return Boolean(this.claims)}get featureFlag(){return Boolean(localStorage.getItem("b2x.ff.enable-psc"))}get version(){return""}async created(){this.logger.log("user flyout created"),this.authDispatchers=await this.store.getConnectionDispatchers(H),this.store.subscribe(oe,({stage:e="prod"})=>{this.env=e})}onLoginAction(){this.logger.log("Login action triggered"),Dr({type:"UM",label:"login"}),this.authDispatchers.login({identityProvider:S.CIAS,tenantId:this.tenantId})}onLogoutAction(){this.logger.log("Logout action triggered"),Dr({type:"UM",label:"logout"}),this.authDispatchers.logout()}onRegisterAction(){Dr({type:"UM",label:"register"}),this.logger.log("Register action triggered");const{nationalConsentUrl:e=""}=this.config||{};this.authDispatchers.register(e)}onAlertDismiss(){this.authDispatchers.removeAlert()}buildMenuEntries(e){return{[me.B2C]:[{id:"overviewEntriesPrivate",testId:"user-menu-overview-entries-private",links:e.overviewEntriesPrivate},{id:"menuEntriesPrivate",testId:"user-menu-menu-entries-private",links:e.menuEntriesPrivate},{id:"settingsEntriesPrivate",testId:"user-menu-settings-entries-private",links:e.settingsEntriesPrivate}],[me.B2B]:[{id:"overviewEntriesBusiness",testId:"user-menu-overview-entries-business",links:e.overviewEntriesBusiness},{id:"menuEntriesBusiness",testId:"user-menu-menu-entries-business",links:e.menuEntriesBusiness},{id:"settingsEntriesBusiness",testId:"user-menu-settings-entries-business",links:e.settingsEntriesBusiness}],[me.B2E]:[{id:"overviewEntriesRetailer",testId:"user-menu-overview-entries-retailer",links:e.overviewEntriesRetailer},{id:"menuEntriesRetailer",testId:"user-menu-menu-entries-retailer",links:e.menuEntriesRetailer},{id:"settingsEntriesRetailer",testId:"user-menu-settings-entries-retailer",links:e.settingsEntriesRetailer}]}}};Et([Z()],Re.prototype,"config",2),Et([Z()],Re.prototype,"businessType",2),Et([Z()],Re.prototype,"claims",2),Et([Z({default:null})],Re.prototype,"alert",2),Et([Z()],Re.prototype,"isReachMeAvailable",2),Re=Et([qe({name:"user-flyout",components:{LinkList:hg,UserAlert:Eg}})],Re);const ev="";var Cg=function(){var e=this,n=e._self._c;return e._self._setupProxy,e.config?n("div",{staticClass:"user-flyout",class:e.claims?"is-logged-in":""},[e.claims?n("div",{staticClass:"spacing-xs"},[n("p",{staticClass:"headline wb-type-heading-m",attrs:{"data-test-id":"user-menu-salutation"}},[n("span",[e._v(e._s(e.config.salutation))]),e._v(", "),n("span",[e._v(e._s(e.claims.name))])]),e.featureFlag&&e.isLoggedIn&&e.env?n("web-component-loader",{attrs:{name:"iam-profile-selection",environment:e.env,version:e.version}},[n("iam-profile-selection",{staticClass:"profile-selection-user",attrs:{tenant:"IAM"}})],1):e._e(),e._l(e.menuLists,function(r){return n("div",{key:r.id,staticClass:"menu-entries"},[n("link-list",{attrs:{list:r.links,"data-test-id":r.testId}})],1)}),e.isReachMeAvailable?n("ul",{staticClass:"menu-items on-mobile"},[n("li",[n("cmic-notifications-hub-ui",{attrs:{"component-id":e.cmicComponentId,"data-test-id":"user-menu-cmic-entry"}})],1)]):e._e()],2):n("div",[n("p",{staticClass:"headline spacing-xs wb-type-heading-m",attrs:{"data-test-id":"user-menu-title"}},[e._v(e._s(e.config.menuTitle))]),n("p",{staticClass:"sub-headline wb-type-copy spacing-xs",attrs:{"data-test-id":"user-menu-text"}},[e._v(e._s(e.config.introText))])]),n("div",{staticClass:"login-button"},[e.claims?n("button",{staticClass:"wb-button wb-button--secondary wb-button--large block-button",attrs:{type:"button","data-test-id":"user-menu-logout-button"},on:{click:e.onLogoutAction}},[e._v(" "+e._s(e.config.logoutLabel)+" ")]):n("button",{staticClass:"wb-button wb-button--primary wb-button--large block-button",attrs:{type:"button","data-test-id":"user-menu-login-button"},on:{click:e.onLoginAction}},[e._v(" "+e._s(e.config.loginLabel)+" ")])]),e.claims?e._e():n("button",{staticClass:"wb-button wb-button--secondary wb-button--large block-button spacing-xs",attrs:{type:"button","data-test-id":"user-menu-register-button"},on:{click:e.onRegisterAction}},[e._v(" "+e._s(e.config.registerLabel)+" ")]),e.featureFlag&&!e.isLoggedIn&&e.env?n("web-component-loader",{attrs:{name:"iam-profile-selection",environment:e.env,version:e.version}},[n("iam-profile-selection",{staticClass:"profile-selection",attrs:{tenant:"IAM"}})],1):e._e(),n("user-alert",{attrs:{alert:e.alert,"data-test-id":"user-menu-notification"},on:{onDismiss:e.onAlertDismiss}})],1):e._e()},Tg=[],Og=Wt(Re,Cg,Tg,!1,null,null,null,null);const _g=Og.exports;var Rg=Object.defineProperty,Ag=Object.getOwnPropertyDescriptor,Yt=(t,e,n,r)=>{for(var s=r>1?void 0:r?Ag(e,n):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(s=(r?o(e,n,s):o(s))||s);return r&&s&&Rg(e,n,s),s};let Fe=class extends Pe.default{constructor(){super(...arguments);E(this,"config");E(this,"isLoggedIn");E(this,"businessType");E(this,"open");E(this,"logger",new A("HEADER_BUTTON"))}get icon(){return cg[this.businessType]}onButtonClick(){this.logger.log("clicked -> Toggle Flyout"),this.$emit("onClick")}};Yt([Z()],Fe.prototype,"config",2),Yt([Z()],Fe.prototype,"isLoggedIn",2),Yt([Z()],Fe.prototype,"businessType",2),Yt([Z()],Fe.prototype,"open",2),Fe=Yt([qe({name:"header-button"})],Fe);const tv="";var Ig=function(){var e=this,n=e._self._c;return e._self._setupProxy,n("div",{staticClass:"button-container"},[n("div",{staticClass:"fade-in"},[n("owc-header-button",{staticClass:"fade-in owc-header-button__iconWrapper",attrs:{icon:e.icon,type:"button","aria-label":e.config.userProfileAria,open:e.open,"data-test-id":"user-menu-header-button","data-test-business-type":e.businessType},on:{click:e.onButtonClick}}),n("wb-icon",{directives:[{name:"show",rawName:"v-show",value:e.isLoggedIn,expression:"isLoggedIn"}],staticClass:"icon-checkmark",attrs:{name:"bds/checkmark-circle/16"}})],1)])},Pg=[],$g=Wt(Fe,Ig,Pg,!1,null,null,null,null);const Ng=$g.exports;var Lg=Object.defineProperty,xg=Object.getOwnPropertyDescriptor,Ta=(t,e,n,r)=>{for(var s=r>1?void 0:r?xg(e,n):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(s=(r?o(e,n,s):o(s))||s);return r&&s&&Lg(e,n,s),s};let Mn=class extends Pe.default{constructor(){super(...arguments);E(this,"componentId");E(this,"componentRegistry",Cc());E(this,"store",v.initializeStore());E(this,"claims",null);E(this,"config");E(this,"languageDirection","ltr");E(this,"alert",null);E(this,"isFlyoutOpen",!1);E(this,"businessType",me.B2C);E(this,"isReachMeAvailable",!1)}async created(){var e;(e=window.top)!=null&&e.aemNamespace?(bt.log("there is aemNamespace"),this.componentRegistry.subscribe(this.componentId,this.onComponentConfig),this.checkReachMeVisibility()):bt.log("there is no aemNamespace"),this.store.subscribe(H,this.onAuthenticationEvent),this.store.subscribe(oe,this.onAEMEvent),this.store.subscribe(te,this.onPALEvent)}mounted(){document.addEventListener("owc-header-flyout-close",e=>this.toggleFlyout(!1,e))}beforeDestroy(){document.removeEventListener("owc-header-flyout-close",e=>this.toggleFlyout(!1,e)),this.store.unsubscribe(oe,this.onAEMEvent),this.store.unsubscribe(this.componentId,this.onComponentConfig),this.store.unsubscribe(H,this.onAuthenticationEvent),this.store.unsubscribe(te,this.onPALEvent)}onAEMEvent({languageDirection:e}){bt.log(`New ${oe} event`),this.languageDirection=e||this.languageDirection}onComponentConfig(e){bt.log("component config",e),this.config={...e.payload}}onAuthenticationEvent(e){bt.log("New auth event, pending",e.isPending);const n=wn(e);this.alert=xr(e),n===S.CIAS&&st(e)?this.claims=oo(e):this.claims=null,this.alert&&this.toggleFlyout(!0)}onPALEvent(e){this.businessType=this.determineBusinessType(e)}toggleFlyout(e,n){var r;(r=n==null?void 0:n.detail)!=null&&r.isBackInteraction?this.isFlyoutOpen=!0:this.isFlyoutOpen=e!==void 0?e:!this.isFlyoutOpen}determineBusinessType(e){var s;let n;const r=location.href.includes("/my-area/business")?me.B2B:me.B2C;return((s=e.meta)==null?void 0:s.status)==="READY"&&(n=hs(e),bt.log("businessType in PAL:",n)),n||r}checkReachMeVisibility(){this.store.once($e,e=>{const r=Object.values(e.components).find(s=>{var i;return(i=s==null?void 0:s.visibilitySettings)==null?void 0:i.reachMeEnabled});this.isReachMeAvailable=Boolean(r)})}};Ta([Z({default:"iam-user-menu"})],Mn.prototype,"componentId",2),Mn=Ta([qe({name:"user-menu",components:{UserFlyout:_g,HeaderButton:Ng}})],Mn);const nv="";var Ug=function(){var e=this,n=e._self._c;return e._self._setupProxy,n("div",{attrs:{id:"app-vue",dir:e.languageDirection}},[n("header-button",{attrs:{config:e.config,isLoggedIn:Boolean(e.claims),businessType:e.businessType,open:e.isFlyoutOpen},on:{onClick:e.toggleFlyout}}),n("owc-header-secondary-flyout",{attrs:{open:e.isFlyoutOpen,name:"user-menu"}},[n("user-flyout",{attrs:{config:e.config,claims:e.claims,alert:e.alert,businessType:e.businessType,isReachMeAvailable:e.isReachMeAvailable,"data-test-id":"user-menu-flyout"}})],1)],1)},Bg=[],kg=Wt(Mn,Ug,Bg,!1,null,null,null,null);const jg=kg.exports,Dg=/-(\w)/g,Oa=t=>t.replace(Dg,(e,n)=>n?n.toUpperCase():""),Mg=/\B([A-Z])/g,Fg=t=>t.replace(Mg,"-$1").toLowerCase();function Hg(t){const e={};return t.forEach(n=>{e[n]=void 0}),e}function _a(t,e,n){t[e]=[].concat(t[e]||[]),t[e].unshift(n)}function Ra(t,e){t&&(t.$options[e]||[]).forEach(r=>{r.call(t)})}function Gg(t,e){return new CustomEvent(t,{bubbles:!1,cancelable:!1,detail:e})}const zg=t=>/function Boolean/.test(String(t)),qg=t=>/function Number/.test(String(t));function Jg(t,e,{type:n}={}){if(zg(n))return t==="true"||t==="false"?t==="true":t===""||t===e||t!=null?!0:t;if(qg(n)){const r=parseFloat(t,10);return isNaN(r)?t:r}else return t}function Aa(t,e){const n=[];for(let r=0,s=e.length;r<s;r++)n.push(Vg(t,e[r]));return n}function Vg(t,e){if(e.nodeType===3)return e.data.trim()?e.data:null;if(e.nodeType===1){const n={attrs:Wg(e),domProps:{innerHTML:e.innerHTML}};return n.attrs.slot&&(n.slot=n.attrs.slot,delete n.attrs.slot),t(e.tagName,n)}else return null}function Wg(t){const e={};for(let n=0,r=t.attributes.length;n<r;n++){const s=t.attributes[n];e[s.nodeName]=s.nodeValue}return e}function Yg(t,e){const n=typeof e=="function"&&!e.cid;let r=!1,s,i,o;function a(d){if(r)return;const l=typeof d=="function"?d.options:d,f=Array.isArray(l.props)?l.props:Object.keys(l.props||{});s=f.map(Fg),i=f.map(Oa);const p=Array.isArray(l.props)?{}:l.props||{};o=i.reduce((h,m,b)=>(h[m]=p[f[b]],h),{}),_a(l,"beforeCreate",function(){const h=this.$emit;this.$emit=(m,...b)=>(this.$root.$options.customElement.dispatchEvent(Gg(m,b)),h.call(this,m,...b))}),_a(l,"created",function(){i.forEach(h=>{this.$root.props[h]=this[h]})}),i.forEach(h=>{Object.defineProperty(u.prototype,h,{get(){return this._wrapper.props[h]},set(m){this._wrapper.props[h]=m},enumerable:!1,configurable:!0})}),r=!0}function c(d,l){const f=Oa(l),p=d.hasAttribute(l)?d.getAttribute(l):void 0;d._wrapper.props[f]=Jg(p,l,o[f])}class u extends HTMLElement{constructor(){const l=super();l.attachShadow({mode:"open"});const f=l._wrapper=new t({name:"shadow-root",customElement:l,shadowRoot:l.shadowRoot,data(){return{props:{},slotChildren:[]}},render(h){return h(e,{ref:"inner",props:this.props},this.slotChildren)}});new MutationObserver(h=>{let m=!1;for(let b=0;b<h.length;b++){const T=h[b];r&&T.type==="attributes"&&T.target===l?c(l,T.attributeName):m=!0}m&&(f.slotChildren=Object.freeze(Aa(f.$createElement,l.childNodes)))}).observe(l,{childList:!0,subtree:!0,characterData:!0,attributes:!0})}get vueComponent(){return this._wrapper.$refs.inner}connectedCallback(){const l=this._wrapper;if(l._isMounted)Ra(this.vueComponent,"activated");else{const f=()=>{l.props=Hg(i),s.forEach(p=>{c(this,p)})};r?f():e().then(p=>{(p.__esModule||p[Symbol.toStringTag]==="Module")&&(p=p.default),a(p),f()}),l.slotChildren=Object.freeze(Aa(l.$createElement,this.childNodes)),l.$mount(),this.shadowRoot.appendChild(l.$el)}}disconnectedCallback(){Ra(this.vueComponent,"deactivated")}}return n||a(e),u}var vs={};Object.defineProperty(vs,"__esModule",{value:!0});var Ia=vs.seamlessCustomElement=void 0;const Xg=t=>{class e extends t{constructor(){var s;super();const r=document.createElement("style");r.textContent="@import\"https://assets.oneweb.mercedes-benz.com/plugin/workbench/core/6.9.8/css/globals.css\";.menu-items{list-style:none;margin:0;padding:0 0 1rem;border-bottom:1px solid var(--wb-grey-85)}.menu-items:first-child,.menu-items li{padding-top:1rem}.menu-items a{color:var(--wb-grey-45);text-decoration:none}@media (max-width: 47.99em){.menu-items a{margin-bottom:var(--wb-spacing-s)}}wb-notification{margin-top:var(--wb-spacing-xs)}@media (min-width: 48em){.on-mobile{display:none}}.spacing-xs{margin-bottom:var(--wb-spacing-xs)}.user-flyout{padding:var(--wb-spacing-s) var(--wb-spacing-xs)}@media (min-width: 48em) and (max-width: 47.99em){.headline{margin-top:-.6rem}}.profile-selection{display:flex;justify-content:center}.profile-selection-user{display:flex;justify-content:flex-start;border-bottom:1px solid var(--wb-grey-85);padding:var(--wb-spacing-xs) 0}.sub-headline{color:var(--wb-grey-20)}.login-button{margin-bottom:var(--wb-spacing-xxs)}.is-logged-in .login-button{margin:0}.block-button{display:block!important;text-align:center!important;width:100%}.button-container{position:relative}.button-container .fade-in{animation:fadeIn .5s}.button-container .icon-checkmark{position:absolute;--size: 16px;top:4px;right:4px;color:var(--wb-blue-45);animation:fadeIn .5s}.button-container .icon-checkmark svg{background-image:radial-gradient(var(--wb-white) 0%,var(--wb-white) 100%);background-size:8px 8px;background-position:center center;background-repeat:no-repeat}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}\n",(s=this.shadowRoot)==null||s.prepend(r)}}return e};Ia=vs.seamlessCustomElement=Xg;/*! profile-library 2.58.0 */const ys="B2XCORE_PROFILE_DO_NOT_USE",Fn=`swsp:${ys}`,Pa="SET_STATE";var bs,Ae,ve;(function(t){t.CT="ct",t.CTX="ctx"})(bs||(bs={})),function(t){t.B2B="B2B",t.B2C="B2C",t.B2E="B2E"}(Ae||(Ae={})),function(t){t.URL="url",t.PAGE="page",t.PERSISTED="persisted",t.USER="user"}(ve||(ve={}));const Kg=["company.name","user.companies.name","user.companies.domainRef.**"];async function Zg(t){const e=v.initializeStore();return await async function(n,r=1){return v.initializeStore().getConnectionDispatchers(n,r).then(()=>!0).catch(()=>!1)}($e)?new Promise(n=>{e.once($e,r=>{const s=Object.values(r.components);n(t?t(s):s)})}):Promise.resolve([])}const Hn=K.initializeLogger("B2X-PL");function $a(t){return{get size(){return t.length},keys(){return Array.from({length:this.size},(e,n)=>t.key(n))},get(e,n=void 0){const r=t.getItem(e);return r?(s=>{try{JSON.parse(s)}catch{return!1}return!0})(r)?JSON.parse(r):r:n},getAll(){return Object.fromEntries(this.keys().map(e=>[e,this.get(e)]))},set(e,n,r=!0){t.setItem(e,r?JSON.stringify(n):n)},remove:t.removeItem.bind(t),clear:t.clear.bind(t),key:t.key.bind(t),has:e=>Boolean(t.getItem(e))}}const Gn={local:$a(localStorage),session:$a(sessionStorage)},Qg={get emhContextConfig(){return(async()=>{var t;const[e]=await Zg(n=>[n.find(r=>{var s;return(s=r.payload)===null||s===void 0?void 0:s.userContextType})]);return{source:ve.PAGE,businessType:!((t=e==null?void 0:e.payload)===null||t===void 0)&&t.forceUserContextType?e.payload.userContextType:null}})()},get urlPathAvailable(){const t={source:ve.PAGE,businessType:null},e=location.href.includes("/my-area"),n=location.href.includes("/my-area/business");return["/profile-overview"].some(r=>location.href.includes(r))?t.businessType=null:n?t.businessType=Ae.B2B:e&&(t.businessType=Ae.B2C),(async()=>t)()},get ctxAvailable(){return(async()=>{return{source:ve.URL,businessType:(t=bs.CTX,new URLSearchParams(window.location.search).get(t))};var t})()},get sessionAvailable(){return(async()=>{var t;return{source:ve.PERSISTED,businessType:(t=Gn.session.get(Fn))===null||t===void 0?void 0:t.businessType}})()},get localAvailable(){return(async()=>{var t;return{source:ve.PERSISTED,businessType:(t=Gn.local.get(Fn))===null||t===void 0?void 0:t.businessType}})()}},em=[Ae.B2B,Ae.B2C,Ae.B2E];function Na(t){const e={persist(n){Gn.local.set(Fn,n),Gn.session.set(Fn,n)},getBusinessContext:()=>async function(){var n;let r={source:ve.PERSISTED,businessType:Ae.B2C};for await(const s of Object.values(Qg))if(em.includes((n=s.businessType)===null||n===void 0?void 0:n.toUpperCase())){const{source:i,businessType:o}=s;return{businessType:o,source:i}}return r}()};if(t){const{source:n,businessType:r}=t;e.persist({source:n,businessType:r})}return e}class tm extends v.SeamlessConnection{constructor(e){super(ys),this.initialState=e}get initialState(){return Object.seal({...this.defaultState})}set initialState(e){this.defaultState={...e,meta:{version:"2.58.0"}},this.persist(e)}getReducer(){return(e,n)=>{if(n.type===this.getActionType(Pa)){const r={...e,...n.payload};return this.persist(r),r}return e}}getPublicDispatchers(){return{setBusinessType:e=>(n,r)=>this.setContextAction({dispatch:n,getState:r,options:e})}}onBeforeRegister(e){this.dispatcher=n=>e.call(this,n)}persist(e){const n=Object.assign(Object.create(null),JSON.parse(JSON.stringify(e)));return Na().persist(n),n}setContextAction(e){const{dispatch:n,getState:r,options:s}=e,{source:i=ve.USER,businessType:o}=s,{B2XCORE_PROFILE:a}=r();n(this.getAction(Pa,{...a,source:i,businessType:o})),s.syncPal&&(Hn.debug(`Syncing PL to PAL with ${o}`),n(()=>async function(c){const u=v.initializeStore(),d=await u.getConnectionDispatchers("B2X_ACTIVE_PROFILE",1).catch(()=>null);d&&d.setActiveUserProfile({businessType:c,ensureProperties:Kg},!1)}(o)))}}async function nm(){Hn.log("Profile library initialisation 2.58.0");const t=Na(),{source:e,businessType:n}=await t.getBusinessContext();Hn.log(`Business type: ${n} from ${e}`),await v.initializeStore().addConnection(new tm({source:e,businessType:n})),Hn.log("SDS PL connection initialized")}class rm{constructor(e){E(this,"store",v.initializeStore());E(this,"authListener");E(this,"activeProfileDispatchers");E(this,"authenticationState");E(this,"country","DE");E(this,"logger",new A("PAL-ADAPTER"));this.country=e||this.country,window.addEventListener("pagehide",()=>this.destroy())}async start(){try{await this.store.addConnection(new ag),this.activeProfileDispatchers=await this.store.getConnectionDispatchers(te),this.authListener=this.store.subscribe(H,async e=>{this.logger.log("Received auth state"),!(Ur(e)||xr(e)||wn(e)!==S.CIAS)&&(this.authenticationState=e,await this.loadActiveProfile(),this.logger.log("Profile activation library initialized"))})}catch(e){this.logger.warn("Failed to initialize profile activation library.",e)}}async loadActiveProfile(){var r;const e=this.authenticationState&&En(this.authenticationState)||void 0;this.logger.debug(`setActiveProfile: jwe ${Boolean(e)}`);const n=await new Promise(s=>this.store.once(ys,s));this.logger.debug(`PL state: ${JSON.stringify(n)}`),(r=this.activeProfileDispatchers)==null||r.loadLastStateFromBE({userToken:e,marketId:this.country,businessType:n.businessType,ensureProperties:["company.name","user.companies.name","user.companies.domainRef.**"]})}destroy(){this.logger.log("Stopping active profile loader"),this.authListener&&this.authListener.unsubscribe()}}const Es=new A("BOOT_LIBS");async function sm(){Es.log("Initialize Libs: AL, PL and PAL"),await Promise.all([Tf(),nm()]).catch(t=>Es.error(t)),v.initializeStore().subscribe(oe,({country:t})=>{!!localStorage.getItem("b2x.ff.pal_loading_disabled")||(Es.log("Active Profile initialization"),new rm(t).start())})}const im="web-component-loader";let La,ws,xa=!1,zn=!1,Ss=!1,Ua=!1,Cs=!1;const Ts=typeof window<"u"?window:{},Ie=Ts.document||{head:{}},x={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,n,r)=>t.addEventListener(e,n,r),rel:(t,e,n,r)=>t.removeEventListener(e,n,r),ce:(t,e)=>new CustomEvent(t,e)},Ba=t=>Promise.resolve(t),om="{visibility:hidden}.hydrated{visibility:inherit}",He=(t,e="")=>()=>{},am=(t,e)=>()=>{},ka={},Os=t=>(t=typeof t,t==="object"||t==="function"),wt=(t,e,...n)=>{let r=null,s=null,i=!1,o=!1;const a=[],c=d=>{for(let l=0;l<d.length;l++)r=d[l],Array.isArray(r)?c(r):r!=null&&typeof r!="boolean"&&((i=typeof t!="function"&&!Os(r))&&(r=String(r)),i&&o?a[a.length-1].$text$+=r:a.push(i?_s(null,r):r),o=i)};if(c(n),e){e.name&&(s=e.name);{const d=e.className||e.class;d&&(e.class=typeof d!="object"?d:Object.keys(d).filter(l=>d[l]).join(" "))}}const u=_s(t,null);return u.$attrs$=e,a.length>0&&(u.$children$=a),u.$name$=s,u},_s=(t,e)=>{const n={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return n.$attrs$=null,n.$name$=null,n},ja={},cm=t=>t&&t.$tag$===ja,Da=(t,e,n,r,s,i)=>{if(n!==r){let o=Im(t,e);if(e.toLowerCase(),e==="class"){const a=t.classList,c=Ma(n),u=Ma(r);a.remove(...c.filter(d=>d&&!u.includes(d))),a.add(...u.filter(d=>d&&!c.includes(d)))}else{const a=Os(r);if((o||a&&r!==null)&&!s)try{if(t.tagName.includes("-"))t[e]=r;else{const c=r==null?"":r;e==="list"?o=!1:(n==null||t[e]!=c)&&(t[e]=c)}}catch{}r==null||r===!1?(r!==!1||t.getAttribute(e)==="")&&t.removeAttribute(e):(!o||i&4||s)&&!a&&(r=r===!0?"":r,t.setAttribute(e,r))}}},um=/\s/,Ma=t=>t?t.split(um):[],Fa=(t,e,n,r)=>{const s=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,i=t&&t.$attrs$||ka,o=e.$attrs$||ka;for(r in i)r in o||Da(s,r,i[r],void 0,n,e.$flags$);for(r in o)Da(s,r,i[r],o[r],n,e.$flags$)},Rs=(t,e,n,r)=>{const s=e.$children$[n];let i=0,o,a,c;if(xa||(Ss=!0,s.$tag$==="slot"&&(s.$flags$|=s.$children$?2:1)),s.$flags$&1)o=s.$elm$=Ie.createTextNode("");else if(o=s.$elm$=Ie.createElement(s.$flags$&2?"slot-fb":s.$tag$),Fa(null,s,Ua),s.$children$)for(i=0;i<s.$children$.length;++i)a=Rs(t,s,i),a&&o.appendChild(a);return o["s-hn"]=ws,s.$flags$&3&&(o["s-sr"]=!0,o["s-cr"]=La,o["s-sn"]=s.$name$||"",c=t&&t.$children$&&t.$children$[n],c&&c.$tag$===s.$tag$&&t.$elm$&&Xt(t.$elm$,!1)),o},Xt=(t,e)=>{x.$flags$|=1;const n=t.childNodes;for(let r=n.length-1;r>=0;r--){const s=n[r];s["s-hn"]!==ws&&s["s-ol"]&&(za(s).insertBefore(s,As(s)),s["s-ol"].remove(),s["s-ol"]=void 0,Ss=!0),e&&Xt(s,e)}x.$flags$&=-2},Ha=(t,e,n,r,s,i)=>{let o=t["s-cr"]&&t["s-cr"].parentNode||t,a;for(;s<=i;++s)r[s]&&(a=Rs(null,n,s),a&&(r[s].$elm$=a,o.insertBefore(a,As(e))))},Ga=(t,e,n,r,s)=>{for(;e<=n;++e)(r=t[e])&&(s=r.$elm$,zn=!0,s["s-ol"]?s["s-ol"].remove():Xt(s,!0),s.remove())},lm=(t,e,n,r)=>{let s=0,i=0,o=e.length-1,a=e[0],c=e[o],u=r.length-1,d=r[0],l=r[u],f;for(;s<=o&&i<=u;)a==null?a=e[++s]:c==null?c=e[--o]:d==null?d=r[++i]:l==null?l=r[--u]:qn(a,d)?(Kt(a,d),a=e[++s],d=r[++i]):qn(c,l)?(Kt(c,l),c=e[--o],l=r[--u]):qn(a,l)?((a.$tag$==="slot"||l.$tag$==="slot")&&Xt(a.$elm$.parentNode,!1),Kt(a,l),t.insertBefore(a.$elm$,c.$elm$.nextSibling),a=e[++s],l=r[--u]):qn(c,d)?((a.$tag$==="slot"||l.$tag$==="slot")&&Xt(c.$elm$.parentNode,!1),Kt(c,d),t.insertBefore(c.$elm$,a.$elm$),c=e[--o],d=r[++i]):(f=Rs(e&&e[i],n,i),d=r[++i],f&&za(a.$elm$).insertBefore(f,As(a.$elm$)));s>o?Ha(t,r[u+1]==null?null:r[u+1].$elm$,n,r,i,u):i>u&&Ga(e,s,o)},qn=(t,e)=>t.$tag$===e.$tag$?t.$tag$==="slot"?t.$name$===e.$name$:!0:!1,As=t=>t&&t["s-ol"]||t,za=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,Kt=(t,e)=>{const n=e.$elm$=t.$elm$,r=t.$children$,s=e.$children$;e.$tag$==="slot"||Fa(t,e,Ua),r!==null&&s!==null?lm(n,r,e,s):s!==null?Ha(n,null,e,s,0,s.length-1):r!==null&&Ga(r,0,r.length-1)},qa=t=>{const e=t.childNodes;let n,r,s,i,o,a;for(r=0,s=e.length;r<s;r++)if(n=e[r],n.nodeType===1){if(n["s-sr"]){for(o=n["s-sn"],n.hidden=!1,i=0;i<s;i++)if(a=e[i].nodeType,e[i]["s-hn"]!==n["s-hn"]||o!==""){if(a===1&&o===e[i].getAttribute("slot")){n.hidden=!0;break}}else if(a===1||a===3&&e[i].textContent.trim()!==""){n.hidden=!0;break}}qa(n)}},se=[],Ja=t=>{let e,n,r,s,i,o,a=0;const c=t.childNodes,u=c.length;for(;a<u;a++){if(e=c[a],e["s-sr"]&&(n=e["s-cr"])&&n.parentNode)for(r=n.parentNode.childNodes,s=e["s-sn"],o=r.length-1;o>=0;o--)n=r[o],!n["s-cn"]&&!n["s-nr"]&&n["s-hn"]!==e["s-hn"]&&(Va(n,s)?(i=se.find(d=>d.$nodeToRelocate$===n),zn=!0,n["s-sn"]=n["s-sn"]||s,i?i.$slotRefNode$=e:se.push({$slotRefNode$:e,$nodeToRelocate$:n}),n["s-sr"]&&se.map(d=>{Va(d.$nodeToRelocate$,n["s-sn"])&&(i=se.find(l=>l.$nodeToRelocate$===n),i&&!d.$slotRefNode$&&(d.$slotRefNode$=i.$slotRefNode$))})):se.some(d=>d.$nodeToRelocate$===n)||se.push({$nodeToRelocate$:n}));e.nodeType===1&&Ja(e)}},Va=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",dm=(t,e)=>{const n=t.$hostElement$,r=t.$cmpMeta$,s=t.$vnode$||_s(null,null),i=cm(e)?e:wt(null,null,e);ws=n.tagName,r.$attrsToReflect$&&(i.$attrs$=i.$attrs$||{},r.$attrsToReflect$.map(([o,a])=>i.$attrs$[a]=n[o])),i.$tag$=null,i.$flags$|=4,t.$vnode$=i,i.$elm$=s.$elm$=n,La=n["s-cr"],xa=(r.$flags$&1)!==0,zn=!1,Kt(s,i);{if(x.$flags$|=1,Ss){Ja(i.$elm$);let o,a,c,u,d,l,f=0;for(;f<se.length;f++)o=se[f],a=o.$nodeToRelocate$,a["s-ol"]||(c=Ie.createTextNode(""),c["s-nr"]=a,a.parentNode.insertBefore(a["s-ol"]=c,a));for(f=0;f<se.length;f++)if(o=se[f],a=o.$nodeToRelocate$,o.$slotRefNode$){for(u=o.$slotRefNode$.parentNode,d=o.$slotRefNode$.nextSibling,c=a["s-ol"];c=c.previousSibling;)if(l=c["s-nr"],l&&l["s-sn"]===a["s-sn"]&&u===l.parentNode&&(l=l.nextSibling,!l||!l["s-nr"])){d=l;break}(!d&&u!==a.parentNode||a.nextSibling!==d)&&a!==d&&(!a["s-hn"]&&a["s-ol"]&&(a["s-hn"]=a["s-ol"].parentNode.nodeName),u.insertBefore(a,d))}else a.nodeType===1&&(a.hidden=!0)}zn&&qa(i.$elm$),x.$flags$&=-2,se.length=0}},Wa=t=>St(t).$hostElement$,fm=(t,e,n)=>{const r=Wa(t);return{emit:s=>Ya(r,e,{bubbles:!!(n&4),composed:!!(n&2),cancelable:!!(n&1),detail:s})}},Ya=(t,e,n)=>{const r=x.ce(e,n);return t.dispatchEvent(r),r},Xa=(t,e)=>{e&&!t.$onRenderResolve$&&e["s-p"]&&e["s-p"].push(new Promise(n=>t.$onRenderResolve$=n))},Is=(t,e)=>{if(t.$flags$|=16,t.$flags$&4){t.$flags$|=512;return}return Xa(t,t.$ancestorComponent$),Nm(()=>pm(t))},pm=(t,e)=>{const n=He("scheduleUpdate",t.$cmpMeta$.$tagName$),r=t.$lazyInstance$;let s;return n(),ym(s,()=>hm(t,r))},hm=async(t,e,n)=>{const r=t.$hostElement$,s=He("update",t.$cmpMeta$.$tagName$),i=r["s-rc"],o=He("render",t.$cmpMeta$.$tagName$);gm(t,e),i&&(i.map(a=>a()),r["s-rc"]=void 0),o(),s();{const a=r["s-p"],c=()=>mm(t);a.length===0?c():(Promise.all(a).then(c),t.$flags$|=4,a.length=0)}},gm=(t,e,n)=>{try{e=e.render(),t.$flags$&=-17,t.$flags$|=2,dm(t,e)}catch(r){Ge(r,t.$hostElement$)}return null},mm=t=>{const e=t.$cmpMeta$.$tagName$,n=t.$hostElement$,r=He("postUpdate",e),s=t.$ancestorComponent$;t.$flags$&64?r():(t.$flags$|=64,Za(n),r(),t.$onReadyResolve$(n),s||Ka()),t.$onRenderResolve$&&(t.$onRenderResolve$(),t.$onRenderResolve$=void 0),t.$flags$&512&&Ls(()=>Is(t)),t.$flags$&=-517},Ka=t=>{Za(Ie.documentElement),Ls(()=>Ya(Ts,"appload",{detail:{namespace:im}}))},vm=(t,e,n)=>{if(t&&t[e])try{return t[e](n)}catch(r){Ge(r)}},ym=(t,e)=>t&&t.then?t.then(e):e(),Za=t=>t.classList.add("hydrated"),bm=(t,e)=>t!=null&&!Os(t)&&e&1?String(t):t,Em=(t,e)=>St(t).$instanceValues$.get(e),wm=(t,e,n,r)=>{const s=St(t),i=s.$hostElement$,o=s.$instanceValues$.get(e),a=s.$flags$,c=s.$lazyInstance$;n=bm(n,r.$members$[e][0]);const u=Number.isNaN(o)&&Number.isNaN(n),d=n!==o&&!u;if((!(a&8)||o===void 0)&&d&&(s.$instanceValues$.set(e,n),c)){if(r.$watchers$&&a&128){const l=r.$watchers$[e];l&&l.map(f=>{try{c[f](n,o,e)}catch(p){Ge(p,i)}})}(a&18)===2&&Is(s)}},Qa=(t,e,n)=>{if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const r=Object.entries(e.$members$),s=t.prototype;if(r.map(([i,[o]])=>{(o&31||n&2&&o&32)&&Object.defineProperty(s,i,{get(){return Em(this,i)},set(a){wm(this,i,a,e)},configurable:!0,enumerable:!0})}),n&1){const i=new Map;s.attributeChangedCallback=function(o,a,c){x.jmp(()=>{const u=i.get(o);if(this.hasOwnProperty(u))c=this[u],delete this[u];else if(s.hasOwnProperty(u)&&typeof this[u]=="number"&&this[u]==c)return;this[u]=c===null&&typeof this[u]=="boolean"?!1:c})},t.observedAttributes=r.filter(([o,a])=>a[0]&15).map(([o,a])=>{const c=a[1]||o;return i.set(c,o),a[0]&512&&e.$attrsToReflect$.push([o,c]),c})}}return t},Sm=async(t,e,n,r,s)=>{if((e.$flags$&32)===0){if(e.$flags$|=32,s=Pm(n),s.then){const c=am();s=await s,c()}s.isProxied||(n.$watchers$=s.watchers,Qa(s,n,2),s.isProxied=!0);const a=He("createInstance",n.$tagName$);e.$flags$|=8;try{new s(e)}catch(c){Ge(c)}e.$flags$&=-9,e.$flags$|=128,a(),ec(e.$lazyInstance$)}const i=e.$ancestorComponent$,o=()=>Is(e);i&&i["s-rc"]?i["s-rc"].push(o):o()},ec=t=>{vm(t,"connectedCallback")},Cm=t=>{if((x.$flags$&1)===0){const e=St(t),n=e.$cmpMeta$,r=He("connectedCallback",n.$tagName$);if(e.$flags$&1)ec(e.$lazyInstance$);else{e.$flags$|=1,n.$flags$&12&&Tm(t);{let s=t;for(;s=s.parentNode||s.host;)if(s["s-p"]){Xa(e,e.$ancestorComponent$=s);break}}n.$members$&&Object.entries(n.$members$).map(([s,[i]])=>{if(i&31&&t.hasOwnProperty(s)){const o=t[s];delete t[s],t[s]=o}}),Sm(t,e,n)}r()}},Tm=t=>{const e=t["s-cr"]=Ie.createComment("");e["s-cn"]=!0,t.insertBefore(e,t.firstChild)},Om=t=>{(x.$flags$&1)===0&&St(t)},_m=(t,e={})=>{const n=He(),r=[],s=e.exclude||[],i=Ts.customElements,o=Ie.head,a=o.querySelector("meta[charset]"),c=Ie.createElement("style"),u=[];let d,l=!0;Object.assign(x,e),x.$resourcesUrl$=new URL(e.resourcesUrl||"./",Ie.baseURI).href,t.map(f=>{f[1].map(p=>{const h={$flags$:p[0],$tagName$:p[1],$members$:p[2],$listeners$:p[3]};h.$members$=p[2],h.$attrsToReflect$=[],h.$watchers$={};const m=h.$tagName$,b=class extends HTMLElement{constructor(T){super(T),T=this,Am(T,h)}connectedCallback(){d&&(clearTimeout(d),d=null),l?u.push(this):x.jmp(()=>Cm(this))}disconnectedCallback(){x.jmp(()=>Om(this))}componentOnReady(){return St(this).$onReadyPromise$}};h.$lazyBundleId$=f[0],!s.includes(m)&&!i.get(m)&&(r.push(m),i.define(m,Qa(b,h,1)))})}),c.innerHTML=r+om,c.setAttribute("data-styles",""),o.insertBefore(c,a?a.nextSibling:o.firstChild),l=!1,u.length?u.map(f=>f.connectedCallback()):x.jmp(()=>d=setTimeout(Ka,30)),n()},Ps=new WeakMap,St=t=>Ps.get(t),Rm=(t,e)=>Ps.set(e.$lazyInstance$=t,e),Am=(t,e)=>{const n={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return n.$onReadyPromise$=new Promise(r=>n.$onReadyResolve$=r),t["s-p"]=[],t["s-rc"]=[],Ps.set(t,n)},Im=(t,e)=>e in t,Ge=(t,e)=>(0,console.error)(t,e),$s=new Map,Pm=(t,e,n)=>{const r=t.$tagName$.replace(/-/g,"_"),s=t.$lazyBundleId$,i=$s.get(s);if(i)return i[r];if(!n||!BUILD.hotModuleReplacement){const o=a=>($s.set(s,a),a[r]);switch(s){case"web-component-loader":return Promise.resolve().then(()=>Jm).then(o,Ge)}}return import(`./${s}.entry.js`).then(o=>($s.set(s,o),o[r]),Ge)},tc=[],nc=[],$m=(t,e)=>n=>{t.push(n),Cs||(Cs=!0,e&&x.$flags$&4?Ls(Ns):x.raf(Ns))},rc=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(n){Ge(n)}t.length=0},Ns=()=>{rc(tc),rc(nc),(Cs=tc.length>0)&&x.raf(Ns)},Ls=t=>Ba().then(t),Nm=$m(nc,!0),Lm=()=>Ba(),xm=(t,e)=>typeof window>"u"?Promise.resolve():Lm().then(()=>_m([["web-component-loader",[[4,"web-component-loader",{name:[513],version:[513],environment:[513],ready:[32]}]]]],e));(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var t=HTMLElement;window.HTMLElement=function(){return Reflect.construct(t,[],this.constructor)},HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)}})();function Um(t){const e=Yg(t,jg),n=Ia(e);window.customElements.define("iam-user-menu",n)}async function Bm(){await sm(),xm(),window.Vue&&Um(window.Vue)}Bm();/*! component-registry-connection 1.8.0 */const km=Object.freeze(Object.defineProperty({__proto__:null,proxy:function(t){(window.top||window).aemNamespace.componentData=new Proxy({},{set:(e,n,r)=>typeof n=="string"&&(t.addComponent({id:n,data:r}),!0)})}},Symbol.toStringTag,{value:"Module"})),jm={DEV:"dev.",TEST:"test.",INT:"int.",PPROD:"preprod.",PROD:""},xs=(t,e="")=>{let n=jm[t.toUpperCase()];return n===void 0&&(n=""),`https://${n}assets.oneweb.mercedes-benz.com/plugin${e}`},Us={},Dm=({name:t,environment:e,version:n=""})=>{const r=`${t}:${e}@${n}`;if(Us[r])return Promise.resolve(Us[r]);const s=Mm({name:t,environment:e,version:n});return fetch(s).then(i=>Hm(i,{name:t,environment:e,version:n})).then(i=>i.json()).then(i=>(Us[r]=i,i))},Mm=({name:t,environment:e,version:n})=>{const r=`?ck=${Date.now()}`,s=n?`-${n}`:"";return xs(e,`/${t}/manifest${s}.json${r}`)},Fm=({name:t,environment:e,version:n})=>{const r=`?ck=${Date.now()}`;return xs(e,`/${t}/${n}/${t}.json${r}`)},Hm=(t,{name:e,environment:n,version:r})=>{if(t.ok)return t;const s=Fm({name:e,environment:n,version:r});return fetch(s)},Gm=t=>typeof t.attrs.nomodule>"u",zm=({url:t,attrs:e})=>document.querySelector(`script[src="${t}"]`)!==null?Promise.resolve(!0):new Promise((r,s)=>{const i=document.createElement("script");i.setAttribute("async",""),Object.keys(e).forEach(o=>{i.setAttribute(o,e[o])}),i.setAttribute("src",t),i.onload=()=>{r(!0)},i.onerror=()=>s(new Error(`Failed to load injected script element "${t}"`)),document.body.append(i)}),qm=async t=>{const e=await Dm(t),{scripts:n}=e.config.files,r=n.filter(Gm).map(s=>Object.assign(Object.assign({},s),{url:xs(t.environment,s.url)}));return Promise.all(r.map(zm))},Jm=Object.freeze(Object.defineProperty({__proto__:null,web_component_loader:class{constructor(t){Rm(this,t),this.loaded=fm(this,"loaded",7),this.name="",this.version="",this.environment="TEST",this.ready=!1}connectedCallback(){this.loadComponent()}loadComponent(){qm({name:this.name,environment:this.environment,version:this.version}).catch(t=>console.warn("failed to load component scripts",t)).finally(()=>{this.loaded.emit(this.name),this.ready=!0})}watchHandler(t,e){t!==e&&this.loadComponent()}render(){return wt(ja,null,wt("div",{class:"component",hidden:!this.ready},wt("slot",null)),wt("div",{class:"loader",hidden:this.ready},wt("slot",{name:"loader"})))}get host(){return Wa(this)}static get watchers(){return{name:["watchHandler"]}}}},Symbol.toStringTag,{value:"Module"}))});
